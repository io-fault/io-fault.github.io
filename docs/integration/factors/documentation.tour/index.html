<html><head><title>system.factors.documentation.tour</title><meta charset="utf-8"/><link as="style" rel="preload" href="../../.legacy-web/core.css"></link><link as="style" rel="preload" href="../../.legacy-web/factor.css"></link><link rel="stylesheet" href="../../.legacy-web/core.css"></link><link rel="stylesheet" href="../../.legacy-web/factor.css"></link></head><body><main><h1><div class="parallel"><div class="left"></div><div class="right"></div></div><span class="prefix"></span><span class="title">system.factors.documentation.tour</span><span class="factor-type">http://if.fault.io/factors/meta.chapter</span></h1><div class="text.abstract"></div><section class="unspecified" documented="true" local-identifier="High-Level Construction Commands" id="High-Level-Construction-Commands"><h1><div class="parallel"><div class="left"></div><div class="right"></div></div><span class="prefix"></span><a class="title" href="#High-Level-Construction-Commands"><span class="text.normal">High-Level Construction Commands</span></a><span class="abstract-type"></span></h1><p><span class="text.normal">cwctx, chctx</span></p><p><span class="text.normal">Current working projects.</span><span class="text.line-break"> </span><span class="text.normal">f +pkg</span><span class="text.line-break"> </span><span class="text.normal">f -pkg</span><span class="text.line-break"> </span><span class="text.normal">f ls [list cwp's]</span><span class="text.line-break"> </span><span class="text.normal">f -*</span><span class="text.line-break"> </span><span class="text.normal">f void [clear cwp's pycache]</span><span class="text.line-break"> </span><span class="text.normal">f incorporate, construct, test, validate, etc.</span></p></section><section class="unspecified" documented="true" local-identifier="Low-Level Construction Commands" id="Low-Level-Construction-Commands"><h1><div class="parallel"><div class="left"></div><div class="right"></div></div><span class="prefix"></span><a class="title" href="#Low-Level-Construction-Commands"><span class="text.normal">Low-Level Construction Commands</span></a><span class="abstract-type"></span></h1><p><span class="text.normal">The sections in this chapter introduce a set of ideas that are often implicit.</span><span class="text.line-break"> </span><a class="none" href="http://fault.io/dev/null"><span class="invalid">system.development</span></a><span class="text.normal"> makes these explicit at the cost of having to learn</span><span class="text.line-break"> </span><span class="text.normal">a new set of commands and having to manage a new set of possible failures.</span></p><p><span class="text.normal">The factor processing instructions use Python's loader interface to identify</span><span class="text.line-break"> </span><span class="text.normal">possible factors. Packages and modules will occasionally be imported to</span><span class="text.line-break"> </span><span class="text.normal">extract information. Given this, it is recommended that</span><span class="text.line-break"> </span><code class="system.environ">PYTHONDONTWRITEBYTECODE</code><span class="text.normal"> be set to </span><code class="">1</code><span class="text.normal"> and</span><span class="text.line-break"> </span><code class="system.environ">PYTHONOPTIMIZE</code><span class="text.normal"> be unset:</span></p><pre class="text.syntax"><code class="/pl/sh">PYTHONDONTWRITEBYTECODE=1
export PYTHONDONTWRITEBYTECODE
unset PYTHONOPTIMIZE
</code></pre><p><span class="text.normal">Unless the operating system manages construction contexts itself, they must</span><span class="text.line-break"> </span><span class="text.normal">be generated by </span><a class="project-local" href="../bin.setup"><span class="unknown">bin.setup</span></a><span class="text.normal">:</span></p><pre class="text.syntax"><code class="/pl/sh">python -m fault.development.bin.setup
</code></pre><p><span class="text.normal">This initializes </span><code class="system.filepath">~/.fault/fpi</code><span class="text.normal"> with information scraped from</span><span class="text.line-break"> </span><span class="text.normal">the tools found in </span><code class="system.environ">PATH</code><span class="text.normal">. It avoids feeding the compiler</span><span class="text.line-break"> </span><span class="text.normal">collection interesting options for performance, but it does attempt to figure</span><span class="text.line-break"> </span><span class="text.normal">out how to link executables and libraries on the system.</span></p><div class="admonition-NOTE"><table><tr><td><span class="admonition.icon"></span></td><td><span class="admonition.severity">NOTE</span></td></tr><tr><td></td><td><div class="admonition.content"><p><span class="text.normal">A fictitous </span><code class="factor">pkg</code><span class="text.normal"> project is used for illustrative purposes.</span></p></div></td></tr></table></div><pre class="text.syntax"><code class="/pl/sh">git clone git://github.com/someguy/pkg.git pkg
</code></pre><p><span class="text.normal">SCM repositories should prefer to leave package contents uncontained. That is,</span><span class="text.line-break"> </span><span class="text.normal">the contents of the first package should be the contents of the root directory.</span><span class="text.line-break"> </span><span class="text.normal">This is preferred in order to allow packages to be arbitrarily named by the user.</span></p><pre class="text.syntax"><code class="/pl/sh">python -m fault.development.bin.prepare pkg
</code></pre><p><a class="section-reference" href="#Preparation">Preparation<span class="ern"></span></a><span class="text.normal"> is the arbitrary operation performed when a source tree is to be</span><span class="text.line-break"> </span><span class="text.normal">prepared for use. Usually, this only needs to be done once after a tree is fetched</span><span class="text.line-break"> </span><span class="text.normal">from an SCM repository. Subsequent executions of </span><a class="project-local" href="../bin.prepare"><span class="unknown">bin.prepare</span></a><span class="text.normal"> should only be</span><span class="text.line-break"> </span><span class="text.normal">necessary when changes are made to the sources that modify the factor set.</span></p><p><span class="text.normal">By default, </span><a class="project-local" href="../bin.prepare"><span class="unknown">bin.prepare</span></a><span class="text.normal"> does nothing. A factor set has to define hooks in order to</span><span class="text.line-break"> </span><span class="text.normal">leverage it.</span></p><pre class="text.syntax"><code class="/pl/sh">python -m fault.development.bin.construct pkg &#38;&#38; \
python -m fault.development.bin.incorporate pkg &#38;&#38; \
python -m fault.development.bin.validate pkg
</code></pre><p><span class="text.normal">All of these commands use the default construction context given that an environment</span><span class="text.line-break"> </span><span class="text.normal">override was not configured. The default is the </span><code class="fpi:context">host</code><span class="text.normal"> context.</span></p><div class="admonition-TODO"><table><tr><td><span class="admonition.icon"></span></td><td><span class="admonition.severity">TODO</span></td></tr><tr><td></td><td><div class="admonition.content"><ul class="text.set"><li><p><span class="text.normal">More exploration of </span><a class="project-local" href="../bin"><span class="unknown">bin</span></a><span class="text.normal">.</span></p></li></ul></div></td></tr></table></div></section><section class="unspecified" documented="true" local-identifier="Programmatic Software Engineering" id="Programmatic-Software-Engineering"><h1><div class="parallel"><div class="left"></div><div class="right"></div></div><span class="prefix"></span><a class="title" href="#Programmatic-Software-Engineering"><span class="text.normal">Programmatic Software Engineering</span></a><span class="abstract-type"></span></h1><p><span class="text.normal">Using </span><a class="project-local" href="../libdev"><span class="unknown">libdev</span></a><span class="text.normal"> to create and specify the consistency of targets at runtime.</span></p></section><h1 class="footing"></h1></main></body></html>