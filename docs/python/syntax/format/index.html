<html root="2"><head><title>fault.syntax.format</title><meta charset="utf-8"/><link as="style" rel="preload" href="../../.legacy-web/core.css"></link><link as="style" rel="preload" href="../../.legacy-web/factor.css"></link><link rel="stylesheet" href="../../.legacy-web/core.css"></link><link rel="stylesheet" href="../../.legacy-web/factor.css"></link></head><body><main><h1><span class="prefix"></span><div class="page-subject"><img class="icon" src="../../.factor-type-icon/if.fault.io/python-module.svg"></img><span class="subject-identifier">format</span><span class="element-status"><span class="nothing-missed">0</span></span><a href="http://if.fault.io/factors/python.module"><code class="type">python.module</code></a></div><div class="page-context"><a href="../"><img class="icon" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTYiIGhlaWdodD0iMjU2Ij48dGV4dCB4PSI0IiB5PSIwLjg4ZW0iIGZvbnQtc2l6ZT0iMjQ4Ij7wn5OEPC90ZXh0Pjwvc3ZnPg=="></img></a><span class="context-identifier">fault.syntax</span></div></h1><section class="chapter"><p><span class="text.normal">Line and character format interpretation and serialization.</span></p></section><section class="import" documented="false" local-identifier="Sequence" id="Sequence"><h1><span class="prefix"></span><a class="title" href="#Sequence"><span class="text.normal">Sequence</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">import</span></div></h1></section><section class="import" documented="false" local-identifier="Iterable" id="Iterable"><h1><span class="prefix"></span><a class="title" href="#Iterable"><span class="text.normal">Iterable</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">import</span></div></h1></section><section class="import" documented="false" local-identifier="Callable" id="Callable"><h1><span class="prefix"></span><a class="title" href="#Callable"><span class="text.normal">Callable</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">import</span></div></h1></section><section class="import" documented="false" local-identifier="TypeAlias" id="TypeAlias"><h1><span class="prefix"></span><a class="title" href="#TypeAlias"><span class="text.normal">TypeAlias</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">import</span></div></h1></section><section class="import" documented="false" local-identifier="partial" id="partial"><h1><span class="prefix"></span><a class="title" href="#partial"><span class="text.normal">partial</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">import</span></div></h1></section><section class="import" documented="false" local-identifier="struct" id="struct"><h1><span class="prefix"></span><a class="title" href="#struct"><span class="text.normal">struct</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">import</span></div></h1></section><section class="class" documented="true" local-identifier="Fields" id="Fields"><h1><span class="prefix"></span><a class="title" href="#Fields"><span class="text.normal">Fields</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">class</span></div></h1><div class="inheritance"><code class="type"><a class="invalid" href="#object"><span class="unknown">object</span></a></code></div><p><span class="text.normal">Format configuration for separating the fields in a line of syntax.</span></p><p><span class="text.normal">Essentially, a structured </span><a class="factor-local" href="#Fields.partial"><span class="method">partial</span></a><span class="text.normal"> instance that provides an interface</span><span class="text.line-break"> </span><span class="text.normal">consistent with other </span><a class="project-local" href="../format"><span class="unknown">format</span></a><span class="text.normal"> data structures. </span><a class="invalid" href="#separation"><span class="unknown">separation</span></a><span class="text.normal"> intends</span><span class="text.line-break"> </span><span class="text.normal">to be used to identify the configuration that </span><a class="invalid" href="#isolate"><span class="unknown">isolate</span></a><span class="text.normal"> uses in order</span><span class="text.line-break"> </span><span class="text.normal">separate the fields of a string. In many cases, </span><a class="invalid" href="#separation"><span class="unknown">separation</span></a><span class="text.normal"> should be</span><span class="text.line-break"> </span><span class="text.normal">the instance of a class and </span><a class="invalid" href="#isolate"><span class="unknown">isolate</span></a><span class="text.normal"> should be an unbound method that</span><span class="text.line-break"> </span><span class="text.normal">performs the desired functionality.</span></p><section class="method" documented="true" local-identifier="partial" id="Fields.partial"><h1><span class="prefix"></span><a class="section" href="#Fields">Fields</a><a class="title" href="#Fields.partial"><span class="text.normal">partial</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">method</span></div></h1><p><code class="signature">partial(self, *argv, **kw)</code></p><p><span class="text.normal">Construct a direct call to </span><a class="invalid" href="#isolate"><span class="unknown">isolate</span></a><span class="text.normal"> with </span><a class="invalid" href="#separation"><span class="unknown">separation</span></a><span class="text.line-break"> </span><span class="text.normal">and the given arguments bound to the call.</span></p></section><section class="method" documented="true" local-identifier="structure" id="Fields.structure"><h1><span class="prefix"></span><a class="section" href="#Fields">Fields</a><a class="title" href="#Fields.structure"><span class="text.normal">structure</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">method</span></div><code class="type">Iterable[Sequence[tuple[str,str]]]</code></h1><p><code class="signature">structure(self, lines)</code></p><p><span class="text.normal">Perform </span><a class="invalid" href="#isolate"><span class="unknown">isolate</span></a><span class="text.normal"> against the given </span><a class="factor-local" href="#Fields.structure.Parameters.lines"><span class="parameter">lines</span></a><span class="text.normal">.</span></p></section><section class="method" documented="true" local-identifier="sequence" id="Fields.sequence"><h1><span class="prefix"></span><a class="section" href="#Fields">Fields</a><a class="title" href="#Fields.sequence"><span class="text.normal">sequence</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">method</span></div><code class="type">Iterable[str]</code></h1><p><code class="signature">sequence(self, fields)</code></p><p><span class="text.normal">Reconstruct the original lines from the given field vectors.</span></p></section></section><section class="class" documented="true" local-identifier="Lines" id="Lines"><h1><span class="prefix"></span><a class="title" href="#Lines"><span class="text.normal">Lines</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">class</span></div></h1><div class="inheritance"><code class="type"><a class="invalid" href="#object"><span class="unknown">object</span></a></code></div><p><span class="text.normal">Format configuration for reading and writing indented syntax lines.</span></p><section class="data" documented="false" local-identifier="termination" id="Lines.termination"><h1><span class="prefix"></span><a class="section" href="#Lines">Lines</a><a class="title" href="#Lines.termination"><span class="text.normal">termination</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">data</span></div><code class="type"><a class="invalid" href="#str"><span class="unknown">str</span></a></code></h1><pre class="text.syntax"><code class="source">termination: str = '\n'
</code></pre></section><section class="data" documented="false" local-identifier="indentation" id="Lines.indentation"><h1><span class="prefix"></span><a class="section" href="#Lines">Lines</a><a class="title" href="#Lines.indentation"><span class="text.normal">indentation</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">data</span></div><code class="type"><a class="invalid" href="#str"><span class="unknown">str</span></a></code></h1><pre class="text.syntax"><code class="source">indentation: str = '\t'
	@staticmethod
</code></pre></section><section class="staticmethod" documented="true" local-identifier="_splitpartial" id="Lines._splitpartial"><h1><span class="prefix"></span><a class="section" href="#Lines">Lines</a><a class="title" href="#Lines._splitpartial"><span class="text.normal">_splitpartial</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">staticmethod</span></div><code class="type">tuple[str, Sequence[str]]</code></h1><p><code class="signature">_splitpartial(lt, text)</code></p><p><span class="text.normal">Interpret the given </span><a class="factor-local" href="#Lines._splitpartial.Parameters.text"><span class="parameter">text</span></a><span class="text.normal"> as a sequence of lines using the</span><span class="text.line-break"> </span><span class="text.normal">configured </span><a class="factor-local" href="#Lines.termination"><span class="data">termination</span></a><span class="text.normal"> character.</span></p><p><span class="text.normal">The </span><a class="factor-local" href="#Lines._splitpartial.Parameters.leading"><span class="parameter">leading</span></a><span class="text.normal"> string is prefixed to the first line in the split,</span><span class="text.line-break"> </span><span class="text.normal">and the final line is removed and returned as the remainder to</span><span class="text.line-break"> </span><span class="text.normal">be passed back in as </span><a class="factor-local" href="#Lines._splitpartial.Parameters.leading"><span class="parameter">leading</span></a><span class="text.normal"> to the next call.</span></p><p><span class="text.normal">Use </span><a class="invalid" href="#split"><span class="unknown">split</span></a><span class="text.normal"> when </span><a class="factor-local" href="#Lines._splitpartial.Parameters.text"><span class="parameter">text</span></a><span class="text.normal"> is known to be complete.</span></p><section class="unspecified" documented="true" local-identifier="Returns" id="Lines._splitpartial.Returns"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#Lines">Lines</a><a class="section" href="#Lines._splitpartial">_splitpartial</a><a class="title" href="#Lines._splitpartial.Returns"><span class="text.normal">Returns</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><p><span class="text.normal">A pair of values. The remainder from the split and the</span><span class="text.line-break"> </span><span class="text.normal">split lines with the given </span><a class="factor-local" href="#Lines._splitpartial.Parameters.leading"><span class="parameter">leading</span></a><span class="text.normal"> prefixed on the first line.</span></p></section></section><section class="method" documented="true" local-identifier="measure_partial_termination" id="Lines.measure_partial_termination"><h1><span class="prefix"></span><a class="section" href="#Lines">Lines</a><a class="title" href="#Lines.measure_partial_termination"><span class="text.normal">measure_partial_termination</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">method</span></div><code class="type"><a class="invalid" href="#int"><span class="unknown">int</span></a></code></h1><p><code class="signature">measure_partial_termination(self, line)</code></p><p><span class="text.normal">Identify the number of characters at the end of the </span><a class="factor-local" href="#Lines.measure_partial_termination.Parameters.line"><span class="parameter">line</span></a><span class="text.normal"> that</span><span class="text.line-break"> </span><span class="text.normal">intersect with </span><a class="factor-local" href="#Lines.termination"><span class="data">termination</span></a><span class="text.normal">.</span></p></section><section class="method" documented="true" local-identifier="measure_indentation" id="Lines.measure_indentation"><h1><span class="prefix"></span><a class="section" href="#Lines">Lines</a><a class="title" href="#Lines.measure_indentation"><span class="text.normal">measure_indentation</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">method</span></div><code class="type"><a class="invalid" href="#int"><span class="unknown">int</span></a></code></h1><p><code class="signature">measure_indentation(self, line)</code></p><p><span class="text.normal">Identify the indentation level of the given </span><a class="factor-local" href="#Lines.measure_indentation.Parameters.line"><span class="parameter">line</span></a><span class="text.normal"> by counting the</span><span class="text.line-break"> </span><span class="text.normal">leading </span><a class="factor-local" href="#Lines.indentation"><span class="data">indentation</span></a><span class="text.normal"> characters.</span></p></section><section class="method" documented="true" local-identifier="level" id="Lines.level"><h1><span class="prefix"></span><a class="section" href="#Lines">Lines</a><a class="title" href="#Lines.level"><span class="text.normal">level</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">method</span></div><code class="type">tuple[int, str]</code></h1><p><code class="signature">level(self, line)</code></p><p><span class="text.normal">Measure the indentation of </span><a class="factor-local" href="#Lines.level.Parameters.line"><span class="parameter">line</span></a><span class="text.normal"> and reconstruct it as a tuple</span><span class="text.line-break"> </span><span class="text.normal">expressing the indentation level as an integer and the content</span><span class="text.line-break"> </span><span class="text.normal">of the line without the indentation characters.</span></p></section><section class="method" documented="true" local-identifier="structure" id="Lines.structure"><h1><span class="prefix"></span><a class="section" href="#Lines">Lines</a><a class="title" href="#Lines.structure"><span class="text.normal">structure</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">method</span></div><code class="type">Iterable[tuple[int, str]]</code></h1><p><code class="signature">structure(self, itext)</code></p><p><span class="text.normal">Structure the given iterator of strings as an iterator of lines.</span></p><p><span class="text.normal">Excludes a final empty line.</span></p></section><section class="method" documented="true" local-identifier="sequence" id="Lines.sequence"><h1><span class="prefix"></span><a class="section" href="#Lines">Lines</a><a class="title" href="#Lines.sequence"><span class="text.normal">sequence</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">method</span></div><code class="type">Iterable[str]</code></h1><p><code class="signature">sequence(self, ilines)</code></p><p><span class="text.normal">Reconstruct the original lines from an iterable of indentation level</span><span class="text.line-break"> </span><span class="text.normal">and line content pairs.</span></p><p><span class="text.normal">Includes a final empty line.</span></p></section></section><section class="class" documented="true" local-identifier="Characters" id="Characters"><h1><span class="prefix"></span><a class="title" href="#Characters"><span class="text.normal">Characters</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">class</span></div></h1><div class="inheritance"><code class="type"><a class="invalid" href="#object"><span class="unknown">object</span></a></code></div><p><span class="text.normal">Character encoding and decoding configuration.</span></p><p><span class="text.normal">Primarily, a minor abstraction for Python's codecs providing</span><span class="text.line-break"> </span><a class="factor-local" href="#Characters.structure"><span class="method">structure</span></a><span class="text.normal"> and </span><a class="factor-local" href="#Characters.sequence"><span class="method">sequence</span></a><span class="text.normal"> interfaces that can be composed with </span><a class="factor-local" href="#Lines"><span class="class">Lines</span></a><span class="text.normal">.</span></p><section class="staticmethod" documented="false" local-identifier="_alloc_coder_pair" id="Characters._alloc_coder_pair"><h1><span class="prefix"></span><a class="section" href="#Characters">Characters</a><a class="title" href="#Characters._alloc_coder_pair"><span class="text.normal">_alloc_coder_pair</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">staticmethod</span></div></h1><p><code class="signature">_alloc_coder_pair(coder, method, final)</code></p></section><section class="staticmethod" documented="false" local-identifier="_alloc_codec_constructors" id="Characters._alloc_codec_constructors"><h1><span class="prefix"></span><a class="section" href="#Characters">Characters</a><a class="title" href="#Characters._alloc_codec_constructors"><span class="text.normal">_alloc_codec_constructors</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">staticmethod</span></div></h1><p><code class="signature">_alloc_codec_constructors(ci, errors)</code></p></section><section class="classmethod" documented="true" local-identifier="from_codec" id="Characters.from_codec"><h1><span class="prefix"></span><a class="section" href="#Characters">Characters</a><a class="title" href="#Characters.from_codec"><span class="text.normal">from_codec</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">classmethod</span></div></h1><p><code class="signature">from_codec(Class, encoding, errors)</code></p><p><span class="text.normal">Create an instance using a Python </span><a class="factor-local" href="#Characters.from_codec.Parameters.encoding"><span class="parameter">encoding</span></a><span class="text.normal"> and </span><a class="factor-local" href="#Characters.from_codec.Parameters.errors"><span class="parameter">errors</span></a><span class="text.normal"> handling scheme.</span></p><p><span class="text.normal">If mixed error handling is needed in one instance, create two instances</span><span class="text.line-break"> </span><span class="text.normal">with </span><a class="factor-local" href="#Characters.from_codec"><span class="classmethod">from_codec</span></a><span class="text.normal"> and combine the fields as needed into a third</span><span class="text.line-break"> </span><span class="text.normal">instance.</span></p></section><section class="method" documented="true" local-identifier="sequence" id="Characters.sequence"><h1><span class="prefix"></span><a class="section" href="#Characters">Characters</a><a class="title" href="#Characters.sequence"><span class="text.normal">sequence</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">method</span></div><code class="type">Iterable[bytes]</code></h1><p><code class="signature">sequence(self, itext)</code></p><p><span class="text.normal">Encode the strings produced by </span><a class="factor-local" href="#Characters.sequence.Parameters.itext"><span class="parameter">itext</span></a><span class="text.normal"> as </span><a class="invalid" href="#bytes"><span class="unknown">bytes</span></a><span class="text.normal">.</span></p></section><section class="method" documented="true" local-identifier="structure" id="Characters.structure"><h1><span class="prefix"></span><a class="section" href="#Characters">Characters</a><a class="title" href="#Characters.structure"><span class="text.normal">structure</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">method</span></div><code class="type">Iterable[str]</code></h1><p><code class="signature">structure(self, ibytes)</code></p><p><span class="text.normal">Decode the data produced by </span><a class="factor-local" href="#Characters.structure.Parameters.ibytes"><span class="parameter">ibytes</span></a><span class="text.normal"> as unicode strings.</span></p></section></section><h1 class="footing"></h1></main></body></html>