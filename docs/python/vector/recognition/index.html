<html root="2"><head><title>fault.vector.recognition</title><meta charset="utf-8"/><link as="style" rel="preload" href="../../.legacy-web/core.css"></link><link as="style" rel="preload" href="../../.legacy-web/factor.css"></link><link rel="stylesheet" href="../../.legacy-web/core.css"></link><link rel="stylesheet" href="../../.legacy-web/factor.css"></link></head><body><main><h1><span class="prefix"></span><div class="page-subject"><img class="icon" src="../../.factor-type-icon/if.fault.io/python-module.svg"></img><span class="subject-identifier">recognition</span><span class="element-status"><span class="nothing-missed">0</span></span><a href="http://if.fault.io/factors/python.module"><code class="type">python.module</code></a></div><div class="page-context"><a href="../"><img class="icon" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTYiIGhlaWdodD0iMjU2Ij48dGV4dCB4PSI0IiB5PSIwLjg4ZW0iIGZvbnQtc2l6ZT0iMjQ4Ij7im5PvuI88L3RleHQ+PC9zdmc+"></img></a><span class="context-identifier">fault.vector</span></div></h1><section class="chapter"><p><span class="text.normal">System argument vector interpretation methods.</span></p><p><a class="factor-local" href="#legacy"><span class="function">legacy</span></a><span class="text.normal"> is the only implemented method and should cover most use cases.</span></p></section><section class="unspecified" documented="true" local-identifier="Events" id="Events"><h1><span class="prefix"></span><a class="title" href="#Events"><span class="text.normal">Events</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><dl class="text.mapping"><div id="Events.mismatch-unrecognized" documented="true"><dt><a class="dkn" href="#Events.mismatch-unrecognized"></a><span class="directory-key"><code class="">mismatch-unrecognized</code></span></dt><dd><div class="status"></div><p><span class="text.normal">The signalled option did not appear in either index.</span></p></dd></div><div id="Events.mismatch-parameter-restricted" documented="true"><dt><a class="dkn" href="#Events.mismatch-parameter-restricted"></a><span class="directory-key"><code class="">mismatch-parameter-restricted</code></span></dt><dd><div class="status"></div><p><span class="text.normal">The long option was given a parameter, but the option takes none.</span></p></dd></div><div id="Events.mismatch-parameter-required" documented="true"><dt><a class="dkn" href="#Events.mismatch-parameter-required"></a><span class="directory-key"><code class="">mismatch-parameter-required</code></span></dt><dd><div class="status"></div><p><span class="text.normal">The option requires a parameter, but no argument was provided.</span><span class="text.line-break"> </span><span class="text.normal">Either due to end of fields or explicit termination.</span></p></dd></div><div id="Events.sequence-append" documented="true"><dt><a class="dkn" href="#Events.sequence-append"></a><span class="directory-key"><code class="">sequence-append</code></span></dt><dd><div class="status"></div><p><span class="text.normal">Append the option's arguments to the slots.</span></p></dd></div><div id="Events.set-add" documented="true"><dt><a class="dkn" href="#Events.set-add"></a><span class="directory-key"><code class="">set-add</code></span></dt><dd><div class="status"></div><p><span class="text.normal">Add the option's argument to the set identified by the slot.</span></p></dd></div><div id="Events.field-replace" documented="true"><dt><a class="dkn" href="#Events.field-replace"></a><span class="directory-key"><code class="">field-replace</code></span></dt><dd><div class="status"></div><p><span class="text.normal">Assign the option's argument to the field identified by the slot.</span></p></dd></div><div id="Events.integer-add" documented="true"><dt><a class="dkn" href="#Events.integer-add"></a><span class="directory-key"><code class="">integer-add</code></span></dt><dd><div class="status"></div><p><span class="text.normal">Add a positive or negative integer to the field identified by the slot.</span></p></dd></div><div id="Events.subfield-replace" documented="true"><dt><a class="dkn" href="#Events.subfield-replace"></a><span class="directory-key"><code class="">subfield-replace</code></span></dt><dd><div class="status"></div><p><span class="text.normal">Using the mapping identified by the slot, assign the key and value extracted</span><span class="text.line-break"> </span><span class="text.normal">from the argument.</span></p></dd></div><div id="Events.sequence-append-assignment" documented="true"><dt><a class="dkn" href="#Events.sequence-append-assignment"></a><span class="directory-key"><code class="">sequence-append-assignment</code></span></dt><dd><div class="status"></div><p><span class="text.normal">Using the sequence identified by the slot, append the tuple representing</span><span class="text.line-break"> </span><span class="text.normal">assignment provided as the argument to the option.</span></p></dd></div></dl></section><section class="class" documented="true" local-identifier="UsageViolation" id="UsageViolation"><h1><span class="prefix"></span><a class="title" href="#UsageViolation"><span class="text.normal">UsageViolation</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">class</span></div></h1><div class="inheritance"><code class="type"><a class="invalid" href="#Exception"><span class="unknown">Exception</span></a></code></div><p><span class="text.normal">Exception signalling that options were not properly expressed.</span></p><section class="unspecified" documented="true" local-identifier="Properties" id="UsageViolation.Properties"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#UsageViolation">UsageViolation</a><a class="title" href="#UsageViolation.Properties"><span class="text.normal">Properties</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><dl class="text.mapping"><div id="UsageViolation.Properties.mismatch" documented="true"><dt><a class="dkn" href="#UsageViolation.Properties.mismatch"></a><span class="directory-key"><span class="text.normal">mismatch</span></span></dt><dd><div class="status"></div><dl class="text.mapping"><div id="UsageViolation.Properties.mismatch.'mismatch-unrecognized'" documented="true"><dt><a class="dkn" href="#UsageViolation.Properties.mismatch.'mismatch-unrecognized'"></a><span class="directory-key"><code class="">'mismatch-unrecognized'</code></span></dt><dd><div class="status"></div><p><span class="text.normal">The option could not be mapped to an action and configuration slot.</span></p></dd></div><div id="UsageViolation.Properties.mismatch.'mismatch-parameter-required'" documented="true"><dt><a class="dkn" href="#UsageViolation.Properties.mismatch.'mismatch-parameter-required'"></a><span class="directory-key"><code class="">'mismatch-parameter-required'</code></span></dt><dd><div class="status"></div><p><span class="text.normal">The option required a parameter and the argument vector had no more elements.</span></p></dd></div><div id="UsageViolation.Properties.mismatch.'mismatch-parameter-restricted'" documented="true"><dt><a class="dkn" href="#UsageViolation.Properties.mismatch.'mismatch-parameter-restricted'"></a><span class="directory-key"><code class="">'mismatch-parameter-restricted'</code></span></dt><dd><div class="status"></div><p><span class="text.normal">The option was given an argument, but takes zero.</span></p></dd></div></dl></dd></div><div id="UsageViolation.Properties.origin" documented="true"><dt><a class="dkn" href="#UsageViolation.Properties.origin"></a><span class="directory-key"><span class="text.normal">origin</span></span></dt><dd><div class="status"></div><p><span class="text.normal">The location of the option as cited by the mismatch event.</span></p></dd></div><div id="UsageViolation.Properties.option" documented="true"><dt><a class="dkn" href="#UsageViolation.Properties.option"></a><span class="directory-key"><span class="text.normal">option</span></span></dt><dd><div class="status"></div><p><span class="text.normal">The identified option being processed.</span></p></dd></div><div id="UsageViolation.Properties.argument" documented="true"><dt><a class="dkn" href="#UsageViolation.Properties.argument"></a><span class="directory-key"><span class="text.normal">argument</span></span></dt><dd><div class="status"></div><p><span class="text.normal">The option's identified argument if any.</span></p></dd></div></dl></section><section class="method" documented="false" local-identifier="__init__" id="UsageViolation.__init__"><h1><span class="prefix"></span><a class="section" href="#UsageViolation">UsageViolation</a><a class="title" href="#UsageViolation.__init__"><span class="text.normal">__init__</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">method</span></div></h1><p><code class="signature">__init__(self, mismatch, origin, option)</code></p></section><section class="method" documented="false" local-identifier="__str__" id="UsageViolation.__str__"><h1><span class="prefix"></span><a class="section" href="#UsageViolation">UsageViolation</a><a class="title" href="#UsageViolation.__str__"><span class="text.normal">__str__</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">method</span></div></h1><p><code class="signature">__str__(self)</code></p></section></section><section class="function" documented="true" local-identifier="legacy" id="legacy"><h1><span class="prefix"></span><a class="title" href="#legacy"><span class="text.normal">legacy</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">function</span></div></h1><p><code class="signature">legacy(restricted, required, options, trap, offset, signal, assignment)</code></p><p><span class="text.normal">Interpret an argument vector, </span><a class="factor-local" href="#legacy.Parameters.options"><span class="parameter">options</span></a><span class="text.normal">, according to the </span><a class="factor-local" href="#legacy.Parameters.restricted"><span class="parameter">restricted</span></a><span class="text.line-break"> </span><span class="text.normal">and </span><a class="factor-local" href="#legacy.Parameters.required"><span class="parameter">required</span></a><span class="text.normal"> option indexes. Identified signals are translated into</span><span class="text.line-break"> </span><span class="text.normal">events describing the expected operation, target slot, and value to be</span><span class="text.line-break"> </span><span class="text.normal">processed by a configuration context.</span></p><p><span class="text.normal">The produced events are terminated by a </span><code class="">'remainder'</code><span class="text.normal"> event containing</span><span class="text.line-break"> </span><span class="text.normal">the excess fields that could not be translated. If all fields were processed</span><span class="text.line-break"> </span><span class="text.normal">as options, the remainder will be an empty list.</span></p><p><span class="text.normal">In the case of an error, the event prior to the remainder will be identified</span><span class="text.line-break"> </span><span class="text.normal">as a mismatch operation with the slot identifying the option that failed</span><span class="text.line-break"> </span><span class="text.normal">to match an index entry.</span></p><section class="unspecified" documented="true" local-identifier="Parameters" id="legacy.Parameters"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#legacy">legacy</a><a class="title" href="#legacy.Parameters"><span class="text.normal">Parameters</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><dl class="text.mapping"><div id="legacy.Parameters.restricted" class="parameter" documented="true"><dt><a class="dkn" href="#legacy.Parameters.restricted"></a><span class="directory-key"><code class="parameter">restricted</code></span></dt><dd><div class="status"></div><p><span class="text.normal">Mapping designating the options that take no parameters.</span></p></dd></div><div id="legacy.Parameters.required" class="parameter" documented="true"><dt><a class="dkn" href="#legacy.Parameters.required"></a><span class="directory-key"><code class="parameter">required</code></span></dt><dd><div class="status"></div><p><span class="text.normal">Mapping designating the options that require one or more parameters.</span></p></dd></div><div id="legacy.Parameters.options" class="parameter" documented="true"><dt><a class="dkn" href="#legacy.Parameters.options"></a><span class="directory-key"><code class="parameter">options</code></span></dt><dd><div class="status"></div><p><span class="text.normal">The argument vector to interpret.</span></p></dd></div><div id="legacy.Parameters.trap" class="parameter" documented="true"><dt><a class="dkn" href="#legacy.Parameters.trap"></a><span class="directory-key"><code class="parameter">trap</code></span></dt><dd><div class="status"></div><p><span class="text.normal">Optional slot identifier used when an unrecognized long option</span><span class="text.line-break"> </span><span class="text.normal">is processed. Produces </span><code class="">sequence-append</code><span class="text.normal"> events.</span></p></dd></div><div id="legacy.Parameters.offset" class="parameter" documented="true"><dt><a class="dkn" href="#legacy.Parameters.offset"></a><span class="directory-key"><code class="parameter">offset</code></span></dt><dd><div class="status"></div><p><span class="text.normal">Defaults to zero; designates the offset to apply to field indexes</span><span class="text.line-break"> </span><span class="text.normal">in order to properly mention a flag or parameter's location.</span></p></dd></div><div id="legacy.Parameters.signal" class="parameter" documented="true"><dt><a class="dkn" href="#legacy.Parameters.signal"></a><span class="directory-key"><code class="parameter">signal</code></span></dt><dd><div class="status"></div><p><span class="text.normal">Defaults to </span><code class="">-</code><span class="text.normal">; the character used to identify options in the vector.</span></p></dd></div><div id="legacy.Parameters.assignment" class="parameter" documented="true"><dt><a class="dkn" href="#legacy.Parameters.assignment"></a><span class="directory-key"><code class="parameter">assignment</code></span></dt><dd><div class="status"></div><p><span class="text.normal">Defaults to </span><code class="">=</code><span class="text.normal">; the character used to separate a long option's name</span><span class="text.line-break"> </span><span class="text.normal">from its argument.</span></p></dd></div></dl></section></section><section class="function" documented="false" local-identifier="_sfr" id="_sfr"><h1><span class="prefix"></span><a class="title" href="#_sfr"><span class="text.normal">_sfr</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">function</span></div></h1><p><code class="signature">_sfr(t, k, i, v)</code></p></section><section class="function" documented="false" local-identifier="_seq" id="_seq"><h1><span class="prefix"></span><a class="title" href="#_seq"><span class="text.normal">_seq</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">function</span></div></h1><p><code class="signature">_seq(t, k, i, v)</code></p></section><section class="data" documented="false" local-identifier="operations" id="operations"><h1><span class="prefix"></span><a class="title" href="#operations"><span class="text.normal">operations</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">data</span></div></h1><pre class="text.syntax"><code class="source">operations = {
	'field-replace': (lambda t, k, i, v: t.__setitem__(k, i(k, v))),
	'sequence-append': (lambda t, k, i, v: t[k].append(i(k, v))),
	'set-add': (lambda t, k, i, v: t[k].add(i(k, v))),
	'set-discard': (lambda t, k, i, v: t[k].discard(i(k, v))),
	'integer-add': (lambda t, k, i, v: t.__setitem__(k, t.get(k, 0) + int(i(k, v)))),
	'subfield-replace': _sfr,
	'sequence-append-assignment': _seq,
}
</code></pre></section><section class="function" documented="true" local-identifier="merge" id="merge"><h1><span class="prefix"></span><a class="title" href="#merge"><span class="text.normal">merge</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">function</span></div></h1><p><code class="signature">merge(target, events, Interpreter, Operations)</code></p><p><span class="text.normal">Apply the values provided by </span><a class="factor-local" href="#merge.Parameters.events"><span class="parameter">events</span></a><span class="text.normal"> into </span><a class="factor-local" href="#merge.Parameters.target"><span class="parameter">target</span></a><span class="text.normal"> using</span><span class="text.line-break"> </span><span class="text.normal">the event's operation to select the merge method provided in </span><a class="factor-local" href="#merge.Parameters.Operations"><span class="parameter">Operations</span></a><span class="text.normal">.</span></p><section class="unspecified" documented="true" local-identifier="Parameters" id="merge.Parameters"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#merge">merge</a><a class="title" href="#merge.Parameters"><span class="text.normal">Parameters</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><dl class="text.mapping"><div id="merge.Parameters.target" class="parameter" documented="true"><dt><a class="dkn" href="#merge.Parameters.target"></a><span class="directory-key"><code class="parameter">target</code></span></dt><dd><div class="status"></div><p><span class="text.normal">The object that the interpreted options and arguments are being</span><span class="text.line-break"> </span><span class="text.normal">inserted into. A configuration dictionary.</span></p></dd></div><div id="merge.Parameters.events" class="parameter" documented="true"><dt><a class="dkn" href="#merge.Parameters.events"></a><span class="directory-key"><code class="parameter">events</code></span></dt><dd><div class="status"></div><p><span class="text.normal">An iterable producing recognized option events.</span><span class="text.line-break"> </span><span class="text.normal">Normally, constructed by </span><a class="factor-local" href="#legacy"><span class="function">legacy</span></a><span class="text.normal">.</span></p></dd></div><div id="merge.Parameters.Interpreter" class="parameter" documented="true"><dt><a class="dkn" href="#merge.Parameters.Interpreter"></a><span class="directory-key"><code class="parameter">Interpreter</code></span></dt><dd><div class="status"></div><p><span class="text.normal">A function called with the slot being assigned and value that needs</span><span class="text.line-break"> </span><span class="text.normal">to be interpreted prior to the storage operation.</span></p><p><span class="text.normal">Defaults to a reflection of the given value(no-op).</span></p></dd></div><div id="merge.Parameters.Operations" class="parameter" documented="true"><dt><a class="dkn" href="#merge.Parameters.Operations"></a><span class="directory-key"><code class="parameter">Operations</code></span></dt><dd><div class="status"></div><p><span class="text.normal">A mapping designating how an assignment operation is to be</span><span class="text.line-break"> </span><span class="text.normal">performed against the </span><a class="factor-local" href="#merge.Parameters.target"><span class="parameter">target</span></a><span class="text.normal">.</span></p><p><span class="text.normal">Defaults to </span><a class="factor-local" href="#operations"><span class="data">operations</span></a><span class="text.normal">.</span></p></dd></div></dl></section></section><h1 class="footing"></h1></main></body></html>