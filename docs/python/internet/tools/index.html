<html root="2"><head><title>fault.internet.tools</title><meta charset="utf-8"/><link as="style" rel="preload" href="../../.legacy-web/core.css"></link><link as="style" rel="preload" href="../../.legacy-web/factor.css"></link><link rel="stylesheet" href="../../.legacy-web/core.css"></link><link rel="stylesheet" href="../../.legacy-web/factor.css"></link></head><body><main><h1><span class="prefix"></span><div class="page-subject"><img class="icon" src="../../.factor-type-icon/if.fault.io/python-module.svg"></img><span class="subject-identifier">tools</span><a href="http://if.fault.io/factors/python.module"><code class="type">python.module</code></a></div><div class="page-context"><a href="../"><img class="icon" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTYiIGhlaWdodD0iMjU2Ij48dGV4dCB4PSI0IiB5PSIwLjg4ZW0iIGZvbnQtc2l6ZT0iMjQ4Ij7wn5OhPC90ZXh0Pjwvc3ZnPg=="></img></a><span class="context-identifier">fault.internet</span></div></h1><section class="chapter"><p><span class="text.normal">Collection of parsers and formatters that apply to multiple protocols.</span></p><p><span class="text.normal">Generally, a supplement for </span><a class="project-local" href="../http"><span class="unknown">http</span></a><span class="text.normal">, and a dependency of </span><a class="project-local" href="../media"><span class="unknown">media</span></a><span class="text.normal">.</span><span class="text.line-break"> </span><span class="text.normal">The tokenization that occurs in </span><a class="project-local" href="../http"><span class="unknown">http</span></a><span class="text.normal"> is intentionally simple, but</span><span class="text.line-break"> </span><span class="text.normal">some of the unparsed fields may need to be structured by the downstream of</span><span class="text.line-break"> </span><span class="text.normal">a tokenization instance. Notably, cookie headers make use of parameter</span><span class="text.line-break"> </span><span class="text.normal">series that can be processed by </span><a class="factor-local" href="#split_parameter_series"><span class="function">split_parameter_series</span></a><span class="text.normal">.</span></p></section><section class="unspecified" documented="true" local-identifier="References" id="References"><h1><span class="prefix"></span><a class="title" href="#References"><span class="text.normal">References</span></a><span class="abstract-type"></span></h1><dl class="text.mapping"><div id="References.Cookies" documented="true"><dt><a class="dkn" href="#References.Cookies"></a><span class="directory-key"><span class="text.normal">Cookies</span></span></dt><dd><div class="status"></div><p><a class="absolute" href="http://www.ietf.org/rfc/rfc2109.txt">http://www.ietf.org/rfc/rfc2109.txt</a></p></dd></div></dl></section><section class="import" documented="false" local-identifier="itertools" id="itertools"><h1><span class="prefix"></span><a class="title" href="#itertools"><span class="text.normal">itertools</span></a><span class="abstract-type">import</span></h1></section><section class="function" documented="true" local-identifier="resolve_backslashes" id="resolve_backslashes"><h1><span class="prefix"></span><a class="title" href="#resolve_backslashes"><span class="text.normal">resolve_backslashes</span></a><span class="abstract-type">function</span><code class="type"><a class="invalid" href="#bytes"><span class="unknown">bytes</span></a></code></h1><p><code class="signature">resolve_backslashes(field)</code></p><p><span class="text.normal">Properly resolve backslashes inside </span><code class="">quoted-string</code><span class="text.normal"> areas.</span></p></section><section class="data" documented="false" local-identifier="http_separators" id="http_separators"><h1><span class="prefix"></span><a class="title" href="#http_separators"><span class="text.normal">http_separators</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">http_separators = b'()&#60;&#62;@,;:\\\"/[]?={} \t\x7f' + bytes(range(32))
</code></pre></section><section class="data" documented="false" local-identifier="tmap" id="tmap"><h1><span class="prefix"></span><a class="title" href="#tmap"><span class="text.normal">tmap</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">tmap = bytearray(range(256))
</code></pre></section><section class="function" documented="false" local-identifier="_quote" id="_quote"><h1><span class="prefix"></span><a class="title" href="#_quote"><span class="text.normal">_quote</span></a><span class="abstract-type">function</span></h1><p><code class="signature">_quote(octets)</code></p></section><section class="function" documented="true" local-identifier="quote" id="quote"><h1><span class="prefix"></span><a class="title" href="#quote"><span class="text.normal">quote</span></a><span class="abstract-type">function</span></h1><p><code class="signature">quote(octets)</code></p><p><span class="text.normal">Discover whether the octets should be quoted and backslash-escape any octets</span><span class="text.line-break"> </span><span class="text.normal">cited as needing escapes. </span><a class="factor-local" href="#quote"><span class="function">quote</span></a><span class="text.normal"> is fairly expensive and should be avoided</span><span class="text.line-break"> </span><span class="text.normal">when possible. Given the case that it is known ahead of time that a quotation</span><span class="text.line-break"> </span><span class="text.normal">is unnecessary, </span><a class="factor-local" href="#join_parameter_series"><span class="function">join_parameter_series.Parameters.quote</span></a><span class="text.normal"> provided.</span></p></section><section class="function" documented="true" local-identifier="join_parameter_series" id="join_parameter_series"><h1><span class="prefix"></span><a class="title" href="#join_parameter_series"><span class="text.normal">join_parameter_series</span></a><span class="abstract-type">function</span></h1><p><code class="signature">join_parameter_series(fields)</code></p><p><span class="text.normal">Given an iterator of key-value pairs, construct a properly escaped</span><span class="text.line-break"> </span><span class="text.normal">parameters series that is commonly used within HTTP headers.</span></p><p><span class="text.normal">The </span><a class="factor-local" href="#join_parameter_series.Parameters.quote"><span class="parameter">quote</span></a><span class="text.normal"> parameter is provided in order to override the escape mechanism</span><span class="text.line-break"> </span><span class="text.normal">given the case that it is known that no escaping need happen.</span></p></section><section class="function" documented="false" local-identifier="_normal_parameter_area" id="_normal_parameter_area"><h1><span class="prefix"></span><a class="title" href="#_normal_parameter_area"><span class="text.normal">_normal_parameter_area</span></a><span class="abstract-type">function</span></h1><p><code class="signature">_normal_parameter_area(more)</code></p></section><section class="function" documented="false" local-identifier="_normal_mediarange_area" id="_normal_mediarange_area"><h1><span class="prefix"></span><a class="title" href="#_normal_mediarange_area"><span class="text.normal">_normal_mediarange_area</span></a><span class="abstract-type">function</span></h1><p><code class="signature">_normal_mediarange_area(more)</code></p></section><section class="function" documented="true" local-identifier="split_parameter_series" id="split_parameter_series"><h1><span class="prefix"></span><a class="title" href="#split_parameter_series"><span class="text.normal">split_parameter_series</span></a><span class="abstract-type">function</span></h1><p><code class="signature">split_parameter_series(series)</code></p><p><span class="text.normal">Given a series of </span><code class="">;</code><span class="text.normal"> separated of key-value pairs, return the sequence</span><span class="text.line-break"> </span><span class="text.normal">of key value pairs parsing </span><code class="rfc:http">quoted-string</code><span class="text.normal"> ranges properly.</span></p><p><span class="text.normal">Specification designated invalid character sequences are not checked,</span><span class="text.line-break"> </span><span class="text.normal">and must be handled separately for strict conformance.</span></p></section><section class="function" documented="false" local-identifier="decode_parameters" id="decode_parameters"><h1><span class="prefix"></span><a class="title" href="#decode_parameters"><span class="text.normal">decode_parameters</span></a><span class="abstract-type">function</span></h1><p><code class="signature">decode_parameters(sequence)</code></p></section><section class="function" documented="false" local-identifier="encode_parameters" id="encode_parameters"><h1><span class="prefix"></span><a class="title" href="#encode_parameters"><span class="text.normal">encode_parameters</span></a><span class="abstract-type">function</span></h1><p><code class="signature">encode_parameters(sequence)</code></p></section><h1 class="footing"></h1></main></body></html>