<html root="2"><head><title>fault.time.gregorian</title><meta charset="utf-8"/><link as="style" rel="preload" href="../../.legacy-web/core.css"></link><link as="style" rel="preload" href="../../.legacy-web/factor.css"></link><link rel="stylesheet" href="../../.legacy-web/core.css"></link><link rel="stylesheet" href="../../.legacy-web/factor.css"></link></head><body><main><h1><span class="prefix"></span><div class="page-subject"><img class="icon" src="../../.factor-type-icon/if.fault.io/python-module.svg"></img><span class="subject-identifier">gregorian</span><a href="http://if.fault.io/factors/python.module"><code class="type">python.module</code></a></div><div class="page-context"><a href="../"><img class="icon" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTYiIGhlaWdodD0iMjU2Ij48dGV4dCB4PSI0IiB5PSIwLjg4ZW0iIGZvbnQtc2l6ZT0iMjQ4Ij7ij7M8L3RleHQ+PC9zdmc+"></img></a><span class="context-identifier">fault.time</span></div></h1><section class="chapter"><p><span class="text.normal">Gregorian calendar functions and data.</span></p></section><section class="import" documented="false" local-identifier="operator" id="operator"><h1><span class="prefix"></span><a class="title" href="#operator"><span class="text.normal">operator</span></a><span class="abstract-type">import</span></h1></section><section class="import" documented="false" local-identifier="callib" id="callib"><h1><span class="prefix"></span><a class="title" href="#callib"><span class="text.normal">callib</span></a><span class="abstract-type">import</span></h1></section><section class="data" documented="false" local-identifier="centuries_in_cycle" id="centuries_in_cycle"><h1><span class="prefix"></span><a class="title" href="#centuries_in_cycle"><span class="text.normal">centuries_in_cycle</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">centuries_in_cycle = 4
</code></pre></section><section class="data" documented="false" local-identifier="years_in_century" id="years_in_century"><h1><span class="prefix"></span><a class="title" href="#years_in_century"><span class="text.normal">years_in_century</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">years_in_century = 100
</code></pre></section><section class="data" documented="false" local-identifier="years_in_decade" id="years_in_decade"><h1><span class="prefix"></span><a class="title" href="#years_in_decade"><span class="text.normal">years_in_decade</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">years_in_decade = 10
</code></pre></section><section class="data" documented="false" local-identifier="centuries_in_millennium" id="centuries_in_millennium"><h1><span class="prefix"></span><a class="title" href="#centuries_in_millennium"><span class="text.normal">centuries_in_millennium</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">centuries_in_millennium = 10
</code></pre></section><section class="data" documented="false" local-identifier="month_names" id="month_names"><h1><span class="prefix"></span><a class="title" href="#month_names"><span class="text.normal">month_names</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">month_names = (
	"january",
	"february",
	"march",
	"april",
	"may",
	"june",
	"july",
	"august",
	"september",
	"october",
	"november",
	"december",
)
</code></pre></section><section class="data" documented="false" local-identifier="months_in_year" id="months_in_year"><h1><span class="prefix"></span><a class="title" href="#months_in_year"><span class="text.normal">months_in_year</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">months_in_year = len(month_names)
</code></pre></section><section class="data" documented="false" local-identifier="month_abbreviations" id="month_abbreviations"><h1><span class="prefix"></span><a class="title" href="#month_abbreviations"><span class="text.normal">month_abbreviations</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">month_abbreviations = (
	"jan", "feb", "mar",
	"apr", "may", "jun",
	"jul", "aug", "sep",
	"oct", "nov", "dec",
)
</code></pre></section><section class="data" documented="false" local-identifier="month_name_to_number" id="month_name_to_number"><h1><span class="prefix"></span><a class="title" href="#month_name_to_number"><span class="text.normal">month_name_to_number</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">month_name_to_number = {
	month_names[i] : i for i in range(len(month_names))
}
</code></pre></section><section class="data" documented="false" local-identifier="calendar_year" id="calendar_year"><h1><span class="prefix"></span><a class="title" href="#calendar_year"><span class="text.normal">calendar_year</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">calendar_year = (
	31, 28, 31, 30,
	31, 30, 31, 31,
	30, 31, 30, 31
)
</code></pre></section><section class="data" documented="false" local-identifier="calendar_leap" id="calendar_leap"><h1><span class="prefix"></span><a class="title" href="#calendar_leap"><span class="text.normal">calendar_leap</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">calendar_leap = (calendar_year[0], calendar_year[1] + 1) + calendar_year[2:] # Feb29
</code></pre></section><section class="data" documented="false" local-identifier="leap_cycle" id="leap_cycle"><h1><span class="prefix"></span><a class="title" href="#leap_cycle"><span class="text.normal">leap_cycle</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">leap_cycle = (
	('leap', 1, calendar_leap),
	('years', 3, calendar_year)
)
</code></pre></section><section class="data" documented="false" local-identifier="cycle" id="cycle"><h1><span class="prefix"></span><a class="title" href="#cycle"><span class="text.normal">cycle</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">cycle = (
	'gregorian-cycle', 1, (
		# First century; normal leap cycle throughout.
		('first-century', 25, leap_cycle),

		# Subsequent three centuries in the cycle.
		# First year in century is leap exception.
		('centuries', 3, (
			('first-year-exception', 4, calendar_year),
			('regular-cycle', 24, leap_cycle),
		)),
	)
)
</code></pre></section><section class="data" documented="false" local-identifier="calendar" id="calendar"><h1><span class="prefix"></span><a class="title" href="#calendar"><span class="text.normal">calendar</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">calendar = callib.aggregate(cycle)
</code></pre></section><section class="function" documented="false" local-identifier="resolve_by_months" id="resolve_by_months"><h1><span class="prefix"></span><a class="title" href="#resolve_by_months"><span class="text.normal">resolve_by_months</span></a><span class="abstract-type">function</span></h1><p><code class="signature">resolve_by_months(months)</code></p></section><section class="function" documented="false" local-identifier="resolve_by_days" id="resolve_by_days"><h1><span class="prefix"></span><a class="title" href="#resolve_by_days"><span class="text.normal">resolve_by_days</span></a><span class="abstract-type">function</span></h1><p><code class="signature">resolve_by_days(days)</code></p></section><section class="data" documented="false" local-identifier="months_in_cycle" id="months_in_cycle"><h1><span class="prefix"></span><a class="title" href="#months_in_cycle"><span class="text.normal">months_in_cycle</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">months_in_cycle = months_in_year * years_in_century * centuries_in_cycle
</code></pre></section><section class="data" documented="false" local-identifier="r" id="r"><h1><span class="prefix"></span><a class="title" href="#r"><span class="text.normal">r</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">r = resolve_by_months(months_in_cycle-1)
</code></pre></section><section class="data" documented="false" local-identifier="days_in_cycle" id="days_in_cycle"><h1><span class="prefix"></span><a class="title" href="#days_in_cycle"><span class="text.normal">days_in_cycle</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">days_in_cycle = r[1] + r[-1]
</code></pre></section><section class="function" documented="true" local-identifier="year_is_leap" id="year_is_leap"><h1><span class="prefix"></span><a class="title" href="#year_is_leap"><span class="text.normal">year_is_leap</span></a><span class="abstract-type">function</span></h1><p><code class="signature">year_is_leap(y)</code></p><p><span class="text.normal">Given a gregorian calendar year, determine whether it is a leap year.</span></p></section><section class="function" documented="true" local-identifier="month_from_days" id="month_from_days"><h1><span class="prefix"></span><a class="title" href="#month_from_days"><span class="text.normal">month_from_days</span></a><span class="abstract-type">function</span></h1><p><code class="signature">month_from_days(days)</code></p><p><span class="text.normal">Convert the given number Earth-days to a month in the Gregorian cycle.</span></p><div class="admonition-NOTE"><table><tr><td><span class="admonition.icon"></span></td><td><span class="admonition.severity">NOTE</span></td></tr><tr><td></td><td><div class="admonition.content"><p><span class="text.normal">This does not communicate the remainder of days.</span></p></div></td></tr></table></div></section><section class="function" documented="true" local-identifier="days_from_month" id="days_from_month"><h1><span class="prefix"></span><a class="title" href="#days_from_month"><span class="text.normal">days_from_month</span></a><span class="abstract-type">function</span></h1><p><code class="signature">days_from_month(months)</code></p><p><span class="text.normal">Convert the given months to the number of Earth-days leading up to the</span><span class="text.line-break"> </span><span class="text.normal">Gregorian month.</span></p></section><section class="function" documented="true" local-identifier="date_from_days" id="date_from_days"><h1><span class="prefix"></span><a class="title" href="#date_from_days"><span class="text.normal">date_from_days</span></a><span class="abstract-type">function</span></h1><p><code class="signature">date_from_days(days)</code></p><p><span class="text.normal">Convert the given Earth-days into a Gregorian date in the common form:</span><span class="text.line-break"> </span><span class="text.normal">(year, month, day).</span></p></section><section class="function" documented="true" local-identifier="days_from_date" id="days_from_date"><h1><span class="prefix"></span><a class="title" href="#days_from_date"><span class="text.normal">days_from_date</span></a><span class="abstract-type">function</span></h1><p><code class="signature">days_from_date(date)</code></p><p><span class="text.normal">Convert a Gregorian date in the common form, (year, month, day), to the number</span><span class="text.line-break"> </span><span class="text.normal">of days leading up to the date.</span></p></section><section class="function" documented="false" local-identifier="context" id="context"><h1><span class="prefix"></span><a class="title" href="#context"><span class="text.normal">context</span></a><span class="abstract-type">function</span></h1><p><code class="signature">context(context)</code></p></section><h1 class="footing"></h1></main></body></html>