<html root="2"><head><title>fault.system.ports</title><meta charset="utf-8"/><link as="style" rel="preload" href="../../.legacy-web/core.css"></link><link as="style" rel="preload" href="../../.legacy-web/factor.css"></link><link rel="stylesheet" href="../../.legacy-web/core.css"></link><link rel="stylesheet" href="../../.legacy-web/factor.css"></link></head><body><main><h1><span class="prefix"></span><div class="page-subject"><img class="icon" src="../../.factor-type-icon/if.fault.io/python-module.svg"></img><span class="subject-identifier">ports</span><a href="http://if.fault.io/factors/python.module"><code class="type">python.module</code></a></div><div class="page-context"><a href="../"><img class="icon" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTYiIGhlaWdodD0iMjU2Ij48dGV4dCB4PSI0IiB5PSIwLjg4ZW0iIGZvbnQtc2l6ZT0iMjQ4Ij7impnvuI88L3RleHQ+PC9zdmc+"></img></a><span class="context-identifier">fault.system</span></div></h1><section class="chapter"><p><span class="text.normal">Process state storage for residual file descriptors.</span></p><p><a class="project-local" href="../ports"><span class="unknown">ports</span></a><span class="text.normal"> manages the set of file descriptors that are intended to be kept across process images.</span><span class="text.line-break"> </span><span class="text.normal">This module is normally used exclusively by daemon processes that wish to update their</span><span class="text.line-break"> </span><span class="text.normal">process image without having to discard listening sockets.</span></p></section><section class="import" documented="false" local-identifier="os" id="os"><h1><span class="prefix"></span><a class="title" href="#os"><span class="text.normal">os</span></a><span class="abstract-type">import</span></h1></section><section class="import" documented="false" local-identifier="typing" id="typing"><h1><span class="prefix"></span><a class="title" href="#typing"><span class="text.normal">typing</span></a><span class="abstract-type">import</span></h1></section><section class="import" documented="false" local-identifier="kernel" id="kernel"><h1><span class="prefix"></span><a class="title" href="#kernel"><span class="text.normal">kernel</span></a><span class="abstract-type">import</span></h1></section><section class="data" documented="false" local-identifier="_state" id="_state"><h1><span class="prefix"></span><a class="title" href="#_state"><span class="text.normal">_state</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">_state = {}
</code></pre></section><section class="function" documented="true" local-identifier="close" id="close"><h1><span class="prefix"></span><a class="title" href="#close"><span class="text.normal">close</span></a><span class="abstract-type">function</span></h1><p><code class="signature">close(identifier)</code></p><p><span class="text.normal">Close the ports associated with the </span><a class="factor-local" href="#close.Parameters.identifier"><span class="parameter">identifier</span></a><span class="text.normal"> and remove them from storage.</span></p></section><section class="function" documented="true" local-identifier="restore" id="restore"><h1><span class="prefix"></span><a class="title" href="#restore"><span class="text.normal">restore</span></a><span class="abstract-type">function</span><code class="type">None</code></h1><p><code class="signature">restore(identifier, ports)</code></p><p><span class="text.normal">Add </span><a class="factor-local" href="#restore.Parameters.ports"><span class="parameter">ports</span></a><span class="text.normal"> to the set using the </span><a class="factor-local" href="#restore.Parameters.identifier"><span class="parameter">identifier</span></a><span class="text.normal"> presuming that the ports</span><span class="text.line-break"> </span><span class="text.normal">are properly configured. Used by daemon processes after performing</span><span class="text.line-break"> </span><a class="invalid" href="#exec"><span class="syscall">exec</span></a><span class="text.normal"> to refresh the process image.</span></p></section><section class="function" documented="true" local-identifier="install" id="install"><h1><span class="prefix"></span><a class="title" href="#install"><span class="text.normal">install</span></a><span class="abstract-type">function</span><code class="type">None</code></h1><p><code class="signature">install(identifier, ports)</code></p><p><span class="text.normal">Add the </span><a class="factor-local" href="#install.Parameters.ports"><span class="parameter">ports</span></a><span class="text.normal"> to the set making sure that they are properly configured</span><span class="text.line-break"> </span><span class="text.normal">to persist across process images.</span></p><p><span class="text.normal">If a sequence of ports is already installed with the </span><a class="factor-local" href="#install.Parameters.identifier"><span class="parameter">identifier</span></a><span class="text.normal">, it</span><span class="text.line-break"> </span><span class="text.normal">will be extended.</span></p></section><section class="function" documented="true" local-identifier="allocate" id="allocate"><h1><span class="prefix"></span><a class="title" href="#allocate"><span class="text.normal">allocate</span></a><span class="abstract-type">function</span><code class="type">typing.Mapping[str, kernel.Ports]</code></h1><p><code class="signature">allocate()</code></p><p><span class="text.normal">Return the full set of installed ports for use within a worker process</span><span class="text.line-break"> </span><span class="text.normal">and remove the installed ports from process the global data.</span></p></section><h1 class="footing"></h1></main></body></html>