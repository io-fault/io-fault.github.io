<html root="2"><head><title>fault.system.extensions.kernel</title><meta charset="utf-8"/><link as="style" rel="preload" href="../../.legacy-web/core.css"></link><link as="style" rel="preload" href="../../.legacy-web/factor.css"></link><link rel="stylesheet" href="../../.legacy-web/core.css"></link><link rel="stylesheet" href="../../.legacy-web/factor.css"></link></head><body><main><h1><span class="prefix"></span><div class="page-subject"><img class="icon" src="../../.factor-type-icon/if.fault.io/system-extension.svg"></img><span class="subject-identifier">kernel</span><a href="http://if.fault.io/factors/system.extension"><code class="type">system.extension</code></a></div><div class="page-context"><a href="../"><img class="icon" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTYiIGhlaWdodD0iMjU2Ij48dGV4dCB4PSI0IiB5PSIwLjg4ZW0iIGZvbnQtc2l6ZT0iMjQ4Ij7impnvuI88L3RleHQ+PC9zdmc+"></img></a><span class="context-identifier">fault.system</span></div></h1><section class="chapter"></section><section class="macro" documented="false" local-identifier="POSIX_SYSCALL" id="POSIX_SYSCALL"><h1><span class="prefix"></span><a class="title" href="#POSIX_SYSCALL"><span class="text.normal">POSIX_SYSCALL</span></a><span class="abstract-type">macro</span></h1><p><code class="signature">POSIX_SYSCALL()</code></p></section><section class="macro" documented="false" local-identifier="RETRY_INIT" id="RETRY_INIT"><h1><span class="prefix"></span><a class="title" href="#RETRY_INIT"><span class="text.normal">RETRY_INIT</span></a><span class="abstract-type">macro</span></h1><p><code class="signature">RETRY_INIT()</code></p></section><section class="macro" documented="false" local-identifier="RETRY" id="RETRY"><h1><span class="prefix"></span><a class="title" href="#RETRY"><span class="text.normal">RETRY</span></a><span class="abstract-type">macro</span></h1><p><code class="signature">RETRY()</code></p></section><section class="define" documented="false" local-identifier="CONFIG_SOCKET_TRANSFER_LIMIT" id="CONFIG_SOCKET_TRANSFER_LIMIT"><h1><span class="prefix"></span><a class="title" href="#CONFIG_SOCKET_TRANSFER_LIMIT"><span class="text.normal">CONFIG_SOCKET_TRANSFER_LIMIT</span></a><span class="abstract-type">define</span></h1><pre class="text.syntax"><code class="source">#define CONFIG_SOCKET_TRANSFER_LIMIT 1
</code></pre></section><section class="structure" documented="false" local-identifier="kp_message" id="kp_message"><h1><span class="prefix"></span><a class="title" href="#kp_message"><span class="text.normal">kp_message</span></a><span class="abstract-type">structure</span></h1><section class="structure" documented="false" local-identifier="iovec" id="kp_message.iovec"><h1><span class="prefix"></span><a class="section" href="#kp_message">kp_message</a><a class="title" href="#kp_message.iovec"><span class="text.normal">iovec</span></a><span class="abstract-type">structure</span></h1></section><section class="field" documented="false" local-identifier="iov" id="kp_message.iov"><h1><span class="prefix"></span><a class="section" href="#kp_message">kp_message</a><a class="title" href="#kp_message.iov"><span class="text.normal">iov</span></a><span class="abstract-type">field</span><code class="type">struct iovec</code></h1></section><section class="structure" documented="false" local-identifier="msghdr" id="kp_message.msghdr"><h1><span class="prefix"></span><a class="section" href="#kp_message">kp_message</a><a class="title" href="#kp_message.msghdr"><span class="text.normal">msghdr</span></a><span class="abstract-type">structure</span></h1></section><section class="field" documented="false" local-identifier="mh" id="kp_message.mh"><h1><span class="prefix"></span><a class="section" href="#kp_message">kp_message</a><a class="title" href="#kp_message.mh"><span class="text.normal">mh</span></a><span class="abstract-type">field</span><code class="type">struct msghdr</code></h1></section><section class="field" documented="false" local-identifier="buf" id="kp_message.buf"><h1><span class="prefix"></span><a class="section" href="#kp_message">kp_message</a><a class="title" href="#kp_message.buf"><span class="text.normal">buf</span></a><span class="abstract-type">field</span><code class="type">char[CMSG_SPACE(sizeof(kport_t) * 1)]</code></h1></section><section class="structure" documented="false" local-identifier="cmsghdr" id="kp_message.cmsghdr"><h1><span class="prefix"></span><a class="section" href="#kp_message">kp_message</a><a class="title" href="#kp_message.cmsghdr"><span class="text.normal">cmsghdr</span></a><span class="abstract-type">structure</span></h1></section><section class="field" documented="false" local-identifier="_align" id="kp_message._align"><h1><span class="prefix"></span><a class="section" href="#kp_message">kp_message</a><a class="title" href="#kp_message._align"><span class="text.normal">_align</span></a><span class="abstract-type">field</span><code class="type">struct cmsghdr</code></h1></section><section class="field" documented="false" local-identifier="ab" id="kp_message.ab"><h1><span class="prefix"></span><a class="section" href="#kp_message">kp_message</a><a class="title" href="#kp_message.ab"><span class="text.normal">ab</span></a><span class="abstract-type">field</span><code class="type">union (unnamed union at /x/p/python/fault/system/extensions/kernel/posix.c:40:2)</code></h1></section></section><section class="function" documented="false" local-identifier="_init_kp_message" id="_init_kp_message"><h1><span class="prefix"></span><a class="title" href="#_init_kp_message"><span class="text.normal">_init_kp_message</span></a><span class="abstract-type">function</span><code class="type">struct cmsghdr *</code></h1><p><code class="signature">_init_kp_message(m, buf, bufsize)</code></p></section><section class="function" documented="false" local-identifier="kp_chfd" id="kp_chfd"><h1><span class="prefix"></span><a class="title" href="#kp_chfd"><span class="text.normal">kp_chfd</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">kp_chfd(kp, op, delta)</code></p></section><section class="function" documented="false" local-identifier="kp_chfl" id="kp_chfl"><h1><span class="prefix"></span><a class="title" href="#kp_chfl"><span class="text.normal">kp_chfl</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">kp_chfl(kp, op, delta)</code></p></section><section class="function" documented="false" local-identifier="kp_receive" id="kp_receive"><h1><span class="prefix"></span><a class="title" href="#kp_receive"><span class="text.normal">kp_receive</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">kp_receive(kp, buf, size)</code></p></section><section class="function" documented="false" local-identifier="kp_transmit" id="kp_transmit"><h1><span class="prefix"></span><a class="title" href="#kp_transmit"><span class="text.normal">kp_transmit</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">kp_transmit(kp, buf, size)</code></p></section><section class="function" documented="true" local-identifier="kp_accept" id="kp_accept"><h1><span class="prefix"></span><a class="title" href="#kp_accept"><span class="text.normal">kp_accept</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">kp_accept(kp, buf, size)</code></p><p><span class="text.normal">Regular socket accept from listening sockets.</span></p></section><section class="function" documented="true" local-identifier="kp_alloc_meta" id="kp_alloc_meta"><h1><span class="prefix"></span><a class="title" href="#kp_alloc_meta"><span class="text.normal">kp_alloc_meta</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">kp_alloc_meta(kp, buf, size)</code></p><p><span class="text.normal">Allocate kport_t pairs capable of transmitting and receiving other kernel ports.</span></p></section><section class="function" documented="false" local-identifier="kp_alloc_bidirectional" id="kp_alloc_bidirectional"><h1><span class="prefix"></span><a class="title" href="#kp_alloc_bidirectional"><span class="text.normal">kp_alloc_bidirectional</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">kp_alloc_bidirectional(kp, buf, size)</code></p></section><section class="function" documented="false" local-identifier="kp_alloc_unidirectional" id="kp_alloc_unidirectional"><h1><span class="prefix"></span><a class="title" href="#kp_alloc_unidirectional"><span class="text.normal">kp_alloc_unidirectional</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">kp_alloc_unidirectional(kp, buf, size)</code></p></section><section class="define" documented="false" local-identifier="LF" id="LF"><h1><span class="prefix"></span><a class="title" href="#LF"><span class="text.normal">LF</span></a><span class="abstract-type">define</span></h1><pre class="text.syntax"><code class="source">#define LF(FLAG) \
	STATIC(PyObj) \
	ln_get_##FLAG(Link ln, void *closure) \
	{ \
		if (Link_Get(ln, FLAG)) \
			Py_RETURN_TRUE; \
		Py_RETURN_FALSE; \
	}
</code></pre><pre class="text.syntax"><code class="source">#define LF(FLAG) \
	{#FLAG, (getter)ln_get_##FLAG, NULL, NULL},
</code></pre></section><section class="function" documented="false" local-identifier="ln_hash" id="ln_hash"><h1><span class="prefix"></span><a class="title" href="#ln_hash"><span class="text.normal">ln_hash</span></a><span class="abstract-type">function</span><code class="type">Py_hash_t</code></h1><p><code class="signature">ln_hash(ln)</code></p></section><section class="function" documented="false" local-identifier="ln_richcompare" id="ln_richcompare"><h1><span class="prefix"></span><a class="title" href="#ln_richcompare"><span class="text.normal">ln_richcompare</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">ln_richcompare(ln, operand, cmpop)</code></p></section><section class="function" documented="false" local-identifier="ln_call" id="ln_call"><h1><span class="prefix"></span><a class="title" href="#ln_call"><span class="text.normal">ln_call</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">ln_call(ln, args, kw)</code></p></section><section class="function" documented="false" local-identifier="ln_clear" id="ln_clear"><h1><span class="prefix"></span><a class="title" href="#ln_clear"><span class="text.normal">ln_clear</span></a><span class="abstract-type">function</span><code class="type">void</code></h1><p><code class="signature">ln_clear(ln)</code></p></section><section class="function" documented="false" local-identifier="ln_traverse" id="ln_traverse"><h1><span class="prefix"></span><a class="title" href="#ln_traverse"><span class="text.normal">ln_traverse</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">ln_traverse(self, visit, arg)</code></p></section><section class="function" documented="false" local-identifier="ln_new" id="ln_new"><h1><span class="prefix"></span><a class="title" href="#ln_new"><span class="text.normal">ln_new</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">ln_new(typ, args, kw)</code></p></section><section class="function" documented="false" local-identifier="ln_dealloc" id="ln_dealloc"><h1><span class="prefix"></span><a class="title" href="#ln_dealloc"><span class="text.normal">ln_dealloc</span></a><span class="abstract-type">function</span><code class="type">void</code></h1><p><code class="signature">ln_dealloc(ln)</code></p></section><section class="function" documented="false" local-identifier="Link_Create" id="Link_Create"><h1><span class="prefix"></span><a class="title" href="#Link_Create"><span class="text.normal">Link_Create</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">Link_Create(typ, ctx, ev, task)</code></p></section><section class="macro" documented="false" local-identifier="_kports_alloc" id="_kports_alloc"><h1><span class="prefix"></span><a class="title" href="#_kports_alloc"><span class="text.normal">_kports_alloc</span></a><span class="abstract-type">macro</span></h1><p><code class="signature">_kports_alloc()</code></p></section><section class="define" documented="false" local-identifier="PyMethod_Id" id="PyMethod_Id"><h1><span class="prefix"></span><a class="title" href="#PyMethod_Id"><span class="text.normal">PyMethod_Id</span></a><span class="abstract-type">define</span></h1><pre class="text.syntax"><code class="source">#define PyMethod_Id(N) kp_##N
</code></pre><pre class="text.syntax"><code class="source">#define PyMethod_Id(N) k_##N
</code></pre><pre class="text.syntax"><code class="source">#define PyMethod_Id(N) inv_##N
</code></pre><pre class="text.syntax"><code class="source">#define PyMethod_Id(N) ev_##N
</code></pre><pre class="text.syntax"><code class="source">#define PyMethod_Id(N) ks_##N
</code></pre></section><section class="define" documented="false" local-identifier="PyMethod_TypeControl" id="PyMethod_TypeControl"><h1><span class="prefix"></span><a class="title" href="#PyMethod_TypeControl"><span class="text.normal">PyMethod_TypeControl</span></a><span class="abstract-type">define</span></h1><pre class="text.syntax"><code class="source">#define PyMethod_TypeControl PyMethod_ClassType
</code></pre><pre class="text.syntax"><code class="source">#define PyMethod_TypeControl PyMethod_ClassType
</code></pre></section><section class="function" documented="false" local-identifier="kports_alloc" id="kports_alloc"><h1><span class="prefix"></span><a class="title" href="#kports_alloc"><span class="text.normal">kports_alloc</span></a><span class="abstract-type">function</span><code class="type">KPorts</code></h1><p><code class="signature">kports_alloc(fill, length)</code></p></section><section class="function" documented="false" local-identifier="kports_create" id="kports_create"><h1><span class="prefix"></span><a class="title" href="#kports_create"><span class="text.normal">kports_create</span></a><span class="abstract-type">function</span><code class="type">KPorts</code></h1><p><code class="signature">kports_create(data, length)</code></p></section><section class="function" documented="true" local-identifier="kp_close" id="kp_close"><h1><span class="prefix"></span><a class="title" href="#kp_close"><span class="text.normal">kp_close</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">kp_close(self)</code></p><p><a class="project-local" href="../kernel#Ports.close"><span class="unknown">kernel.Ports.close</span></a></p></section><section class="function" documented="false" local-identifier="kp_configure" id="kp_configure"><h1><span class="prefix"></span><a class="title" href="#kp_configure"><span class="text.normal">kp_configure</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">kp_configure(self)</code></p></section><section class="function" documented="true" local-identifier="kp_allocate" id="kp_allocate"><h1><span class="prefix"></span><a class="title" href="#kp_allocate"><span class="text.normal">kp_allocate</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">kp_allocate(subtype, length)</code></p><p><a class="project-local" href="../kernel#Ports.allocate"><span class="unknown">kernel.Ports.allocate</span></a></p></section><section class="function" documented="false" local-identifier="kports_richcompare" id="kports_richcompare"><h1><span class="prefix"></span><a class="title" href="#kports_richcompare"><span class="text.normal">kports_richcompare</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">kports_richcompare(self, x, op)</code></p></section><section class="function" documented="true" local-identifier="kports_length" id="kports_length"><h1><span class="prefix"></span><a class="title" href="#kports_length"><span class="text.normal">kports_length</span></a><span class="abstract-type">function</span><code class="type">Py_ssize_t</code></h1><p><code class="signature">kports_length(self)</code></p><p><a class="project-local" href="../kernel#Ports.__len__"><span class="unknown">kernel.Ports.__len__</span></a></p></section><section class="function" documented="true" local-identifier="kports_concat" id="kports_concat"><h1><span class="prefix"></span><a class="title" href="#kports_concat"><span class="text.normal">kports_concat</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">kports_concat(self, x)</code></p><p><a class="project-local" href="../kernel#Ports.__concat__"><span class="unknown">kernel.Ports.__concat__</span></a></p></section><section class="function" documented="true" local-identifier="kports_repeat" id="kports_repeat"><h1><span class="prefix"></span><a class="title" href="#kports_repeat"><span class="text.normal">kports_repeat</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">kports_repeat(self, quantity)</code></p><p><a class="project-local" href="../kernel#Ports.__repeat__"><span class="unknown">kernel.Ports.__repeat__</span></a></p></section><section class="function" documented="true" local-identifier="kports_getitem" id="kports_getitem"><h1><span class="prefix"></span><a class="title" href="#kports_getitem"><span class="text.normal">kports_getitem</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">kports_getitem(self, index)</code></p><p><a class="project-local" href="../kernel#Ports.__getitem__"><span class="unknown">kernel.Ports.__getitem__</span></a></p></section><section class="function" documented="true" local-identifier="kports_setitem" id="kports_setitem"><h1><span class="prefix"></span><a class="title" href="#kports_setitem"><span class="text.normal">kports_setitem</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">kports_setitem(self, index, val)</code></p><p><a class="project-local" href="../kernel#Ports.__setitem__"><span class="unknown">kernel.Ports.__setitem__</span></a></p></section><section class="function" documented="true" local-identifier="kports_subscript" id="kports_subscript"><h1><span class="prefix"></span><a class="title" href="#kports_subscript"><span class="text.normal">kports_subscript</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">kports_subscript(self, item)</code></p><p><a class="project-local" href="../kernel#Ports.__getitem__"><span class="unknown">kernel.Ports.__getitem__</span></a></p></section><section class="function" documented="false" local-identifier="kports_getbuffer" id="kports_getbuffer"><h1><span class="prefix"></span><a class="title" href="#kports_getbuffer"><span class="text.normal">kports_getbuffer</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">kports_getbuffer(self, view, flags)</code></p></section><section class="function" documented="true" local-identifier="kports_new" id="kports_new"><h1><span class="prefix"></span><a class="title" href="#kports_new"><span class="text.normal">kports_new</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">kports_new(subtype, args, kw)</code></p><p><a class="project-local" href="../kernel#Ports.__new__"><span class="unknown">kernel.Ports.__new__</span></a></p></section><section class="function" documented="false" local-identifier="kports_dealloc" id="kports_dealloc"><h1><span class="prefix"></span><a class="title" href="#kports_dealloc"><span class="text.normal">kports_dealloc</span></a><span class="abstract-type">function</span><code class="type">void</code></h1><p><code class="signature">kports_dealloc(self)</code></p></section><section class="define" documented="false" local-identifier="INITIAL_TASK_COUNT" id="INITIAL_TASK_COUNT"><h1><span class="prefix"></span><a class="title" href="#INITIAL_TASK_COUNT"><span class="text.normal">INITIAL_TASK_COUNT</span></a><span class="abstract-type">define</span></h1><pre class="text.syntax"><code class="source">#define INITIAL_TASK_COUNT 4
</code></pre></section><section class="define" documented="false" local-identifier="MAX_TASKS_PER_SEGMENT" id="MAX_TASKS_PER_SEGMENT"><h1><span class="prefix"></span><a class="title" href="#MAX_TASKS_PER_SEGMENT"><span class="text.normal">MAX_TASKS_PER_SEGMENT</span></a><span class="abstract-type">define</span></h1><pre class="text.syntax"><code class="source">#define MAX_TASKS_PER_SEGMENT 128
</code></pre></section><section class="macro" documented="false" local-identifier="TASKQ_MEMORY_ERROR" id="TASKQ_MEMORY_ERROR"><h1><span class="prefix"></span><a class="title" href="#TASKQ_MEMORY_ERROR"><span class="text.normal">TASKQ_MEMORY_ERROR</span></a><span class="abstract-type">macro</span></h1><p><code class="signature">TASKQ_MEMORY_ERROR()</code></p></section><section class="macro" documented="false" local-identifier="TASKQ_PARALLEL_ERROR" id="TASKQ_PARALLEL_ERROR"><h1><span class="prefix"></span><a class="title" href="#TASKQ_PARALLEL_ERROR"><span class="text.normal">TASKQ_PARALLEL_ERROR</span></a><span class="abstract-type">macro</span></h1><p><code class="signature">TASKQ_PARALLEL_ERROR()</code></p></section><section class="macro" documented="false" local-identifier="TASKQ_FULL" id="TASKQ_FULL"><h1><span class="prefix"></span><a class="title" href="#TASKQ_FULL"><span class="text.normal">TASKQ_FULL</span></a><span class="abstract-type">macro</span></h1><p><code class="signature">TASKQ_FULL()</code></p></section><section class="macro" documented="false" local-identifier="TASKQ_ALLOCATION_SIZE" id="TASKQ_ALLOCATION_SIZE"><h1><span class="prefix"></span><a class="title" href="#TASKQ_ALLOCATION_SIZE"><span class="text.normal">TASKQ_ALLOCATION_SIZE</span></a><span class="abstract-type">macro</span></h1><p><code class="signature">TASKQ_ALLOCATION_SIZE()</code></p></section><section class="define" documented="false" local-identifier="TASKQ_MEMORY_ACQUIRE" id="TASKQ_MEMORY_ACQUIRE"><h1><span class="prefix"></span><a class="title" href="#TASKQ_MEMORY_ACQUIRE"><span class="text.normal">TASKQ_MEMORY_ACQUIRE</span></a><span class="abstract-type">define</span></h1><pre class="text.syntax"><code class="source">#define TASKQ_MEMORY_ACQUIRE PyMem_Malloc
</code></pre></section><section class="define" documented="false" local-identifier="TASKQ_MEMORY_RELEASE" id="TASKQ_MEMORY_RELEASE"><h1><span class="prefix"></span><a class="title" href="#TASKQ_MEMORY_RELEASE"><span class="text.normal">TASKQ_MEMORY_RELEASE</span></a><span class="abstract-type">define</span></h1><pre class="text.syntax"><code class="source">#define TASKQ_MEMORY_RELEASE PyMem_Free
</code></pre></section><section class="macro" documented="false" local-identifier="TASKQ_ALLOCATE" id="TASKQ_ALLOCATE"><h1><span class="prefix"></span><a class="title" href="#TASKQ_ALLOCATE"><span class="text.normal">TASKQ_ALLOCATE</span></a><span class="abstract-type">macro</span></h1><p><code class="signature">TASKQ_ALLOCATE()</code></p></section><section class="function" documented="true" local-identifier="taskq_extend" id="taskq_extend"><h1><span class="prefix"></span><a class="title" href="#taskq_extend"><span class="text.normal">taskq_extend</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">taskq_extend(tq)</code></p><p><span class="text.normal">Append a memory allocation to the task queue.</span></p></section><section class="function" documented="true" local-identifier="taskq_insert" id="taskq_insert"><h1><span class="prefix"></span><a class="title" href="#taskq_insert"><span class="text.normal">taskq_insert</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">taskq_insert(tq, callable)</code></p><p><span class="text.normal">Insert task at the end of the queue.</span><span class="text.line-break"> </span><span class="text.normal">Presume available space.</span></p></section><section class="function" documented="true" local-identifier="taskq_enqueue" id="taskq_enqueue"><h1><span class="prefix"></span><a class="title" href="#taskq_enqueue"><span class="text.normal">taskq_enqueue</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">taskq_enqueue(tq, callable)</code></p><p><span class="text.normal">High-level append.</span></p></section><section class="function" documented="true" local-identifier="trap_execution_error" id="trap_execution_error"><h1><span class="prefix"></span><a class="title" href="#trap_execution_error"><span class="text.normal">trap_execution_error</span></a><span class="abstract-type">function</span><code class="type">void</code></h1><p><code class="signature">trap_execution_error(errctl, errctx, task)</code></p><p><span class="text.normal">Handle error cases using </span><a class="factor-local" href="#trap_execution_error.Parameters.errctl"><span class="parameter">errctl</span></a><span class="text.normal"> and </span><a class="invalid" href="#PyErr_WriteUnraisable"><span class="unknown">PyErr_WriteUnraisable</span></a><span class="text.line-break"> </span><span class="text.normal">when it or other critical operations fail.</span></p></section><section class="function" documented="true" local-identifier="taskq_continue" id="taskq_continue"><h1><span class="prefix"></span><a class="title" href="#taskq_continue"><span class="text.normal">taskq_continue</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">taskq_continue(tq)</code></p><p><span class="text.normal">Pop segments from </span><a class="invalid" href="#TaskQueue.q_executing"><span class="unknown">TaskQueue.q_executing</span></a><span class="text.normal">.</span></p></section><section class="function" documented="true" local-identifier="taskq_execute" id="taskq_execute"><h1><span class="prefix"></span><a class="title" href="#taskq_execute"><span class="text.normal">taskq_execute</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">taskq_execute(tq, errctl, errctx)</code></p><p><span class="text.normal">Execute the tasks in the </span><a class="invalid" href="#TaskQueue.q_executing"><span class="unknown">TaskQueue.q_executing</span></a><span class="text.normal">,</span><span class="text.line-break"> </span><span class="text.normal">and rotate </span><a class="invalid" href="#TaskQueue.q_loading"><span class="unknown">TaskQueue.q_loading</span></a><span class="text.normal"> for the next cycle.</span></p></section><section class="function" documented="true" local-identifier="taskq_clear" id="taskq_clear"><h1><span class="prefix"></span><a class="title" href="#taskq_clear"><span class="text.normal">taskq_clear</span></a><span class="abstract-type">function</span><code class="type">void</code></h1><p><code class="signature">taskq_clear(tq)</code></p><p><span class="text.normal">Release all objects held by the queue.</span></p></section><section class="function" documented="true" local-identifier="taskq_traverse" id="taskq_traverse"><h1><span class="prefix"></span><a class="title" href="#taskq_traverse"><span class="text.normal">taskq_traverse</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">taskq_traverse(tq, visit, arg)</code></p><p><span class="text.normal">Container traversal for GC support.</span></p></section><section class="function" documented="true" local-identifier="taskq_initialize" id="taskq_initialize"><h1><span class="prefix"></span><a class="title" href="#taskq_initialize"><span class="text.normal">taskq_initialize</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">taskq_initialize(tq)</code></p><p><span class="text.normal">Initialize the given, already allocated, task queue.</span></p></section><section class="macro" documented="false" local-identifier="KPORT_TRANSFER" id="KPORT_TRANSFER"><h1><span class="prefix"></span><a class="title" href="#KPORT_TRANSFER"><span class="text.normal">KPORT_TRANSFER</span></a><span class="abstract-type">macro</span></h1><p><code class="signature">KPORT_TRANSFER()</code></p></section><section class="define" documented="false" local-identifier="PortsType" id="PortsType"><h1><span class="prefix"></span><a class="title" href="#PortsType"><span class="text.normal">PortsType</span></a><span class="abstract-type">define</span></h1><pre class="text.syntax"><code class="source">#define PortsType KPortsType
</code></pre></section><section class="macro" documented="false" local-identifier="PYTHON_TYPES" id="PYTHON_TYPES"><h1><span class="prefix"></span><a class="title" href="#PYTHON_TYPES"><span class="text.normal">PYTHON_TYPES</span></a><span class="abstract-type">macro</span></h1><p><code class="signature">PYTHON_TYPES()</code></p></section><section class="define" documented="false" local-identifier="k_preserve" id="k_preserve"><h1><span class="prefix"></span><a class="title" href="#k_preserve"><span class="text.normal">k_preserve</span></a><span class="abstract-type">define</span></h1><pre class="text.syntax"><code class="source">#define k_preserve kport_clear_cloexec
</code></pre></section><section class="define" documented="false" local-identifier="k_released" id="k_released"><h1><span class="prefix"></span><a class="title" href="#k_released"><span class="text.normal">k_released</span></a><span class="abstract-type">define</span></h1><pre class="text.syntax"><code class="source">#define k_released kport_set_cloexec
</code></pre></section><section class="define" documented="false" local-identifier="k_hostname" id="k_hostname"><h1><span class="prefix"></span><a class="title" href="#k_hostname"><span class="text.normal">k_hostname</span></a><span class="abstract-type">define</span></h1><pre class="text.syntax"><code class="source">#define k_hostname get_hostname
</code></pre></section><section class="define" documented="false" local-identifier="k_machine_execution_context" id="k_machine_execution_context"><h1><span class="prefix"></span><a class="title" href="#k_machine_execution_context"><span class="text.normal">k_machine_execution_context</span></a><span class="abstract-type">define</span></h1><pre class="text.syntax"><code class="source">#define k_machine_execution_context get_uname
</code></pre></section><section class="define" documented="false" local-identifier="k_machine" id="k_machine"><h1><span class="prefix"></span><a class="title" href="#k_machine"><span class="text.normal">k_machine</span></a><span class="abstract-type">define</span></h1><pre class="text.syntax"><code class="source">#define k_machine get_uname
</code></pre></section><section class="define" documented="false" local-identifier="k_clockticks" id="k_clockticks"><h1><span class="prefix"></span><a class="title" href="#k_clockticks"><span class="text.normal">k_clockticks</span></a><span class="abstract-type">define</span></h1><pre class="text.syntax"><code class="source">#define k_clockticks get_clock_ticks
</code></pre></section><section class="define" documented="false" local-identifier="k_set_process_title" id="k_set_process_title"><h1><span class="prefix"></span><a class="title" href="#k_set_process_title"><span class="text.normal">k_set_process_title</span></a><span class="abstract-type">define</span></h1><pre class="text.syntax"><code class="source">#define k_set_process_title set_process_title
</code></pre></section><section class="define" documented="false" local-identifier="k_signalexit" id="k_signalexit"><h1><span class="prefix"></span><a class="title" href="#k_signalexit"><span class="text.normal">k_signalexit</span></a><span class="abstract-type">define</span></h1><pre class="text.syntax"><code class="source">#define k_signalexit signalexit
</code></pre></section><section class="macro" documented="false" local-identifier="MODULE_FUNCTIONS" id="MODULE_FUNCTIONS"><h1><span class="prefix"></span><a class="title" href="#MODULE_FUNCTIONS"><span class="text.normal">MODULE_FUNCTIONS</span></a><span class="abstract-type">macro</span></h1><p><code class="signature">MODULE_FUNCTIONS()</code></p></section><section class="define" documented="false" local-identifier="ID" id="ID"><h1><span class="prefix"></span><a class="title" href="#ID"><span class="text.normal">ID</span></a><span class="abstract-type">define</span></h1><pre class="text.syntax"><code class="source">#define ID(NAME) \
	if (PyType_Ready((PyTypeObject *) &#38;( NAME##Type ))) \
		goto error; \
	Py_INCREF((PyObj) &#38;( NAME##Type )); \
	if (PyModule_AddObject(module, #NAME, (PyObj) &#38;( NAME##Type )) &#60; 0) \
		{ Py_DECREF((PyObj) &#38;( NAME##Type )); goto error; }
</code></pre></section><section class="function" documented="false" local-identifier="get_hostname" id="get_hostname"><h1><span class="prefix"></span><a class="title" href="#get_hostname"><span class="text.normal">get_hostname</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">get_hostname(mod)</code></p></section><section class="function" documented="false" local-identifier="get_uname" id="get_uname"><h1><span class="prefix"></span><a class="title" href="#get_uname"><span class="text.normal">get_uname</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">get_uname(mod)</code></p></section><section class="structure" documented="false" local-identifier="utsname" id="utsname"><h1><span class="prefix"></span><a class="title" href="#utsname"><span class="text.normal">utsname</span></a><span class="abstract-type">structure</span></h1></section><section class="function" documented="false" local-identifier="get_clock_ticks" id="get_clock_ticks"><h1><span class="prefix"></span><a class="title" href="#get_clock_ticks"><span class="text.normal">get_clock_ticks</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">get_clock_ticks(mod)</code></p></section><section class="function" documented="false" local-identifier="set_process_title" id="set_process_title"><h1><span class="prefix"></span><a class="title" href="#set_process_title"><span class="text.normal">set_process_title</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">set_process_title(mod, title)</code></p></section><section class="structure" documented="false" local-identifier="inherit" id="inherit"><h1><span class="prefix"></span><a class="title" href="#inherit"><span class="text.normal">inherit</span></a><span class="abstract-type">structure</span></h1><section class="field" documented="false" local-identifier="process_id" id="inherit.process_id"><h1><span class="prefix"></span><a class="section" href="#inherit">inherit</a><a class="title" href="#inherit.process_id"><span class="text.normal">process_id</span></a><span class="abstract-type">field</span><code class="type">int</code></h1></section></section><section class="function" documented="false" local-identifier="prepare" id="prepare"><h1><span class="prefix"></span><a class="title" href="#prepare"><span class="text.normal">prepare</span></a><span class="abstract-type">function</span><code class="type">void</code></h1><p><code class="signature">prepare()</code></p></section><section class="function" documented="true" local-identifier="_after_fork_parent" id="_after_fork_parent"><h1><span class="prefix"></span><a class="title" href="#_after_fork_parent"><span class="text.normal">_after_fork_parent</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">_after_fork_parent(pc_param)</code></p><p><span class="text.normal">Execute the </span><a class="project-local" href="../process#_after_fork_parent"><span class="unknown">process._after_fork_parent</span></a><span class="text.normal"> object from a pending call.</span></p></section><section class="function" documented="false" local-identifier="parent" id="parent"><h1><span class="prefix"></span><a class="title" href="#parent"><span class="text.normal">parent</span></a><span class="abstract-type">function</span><code class="type">void</code></h1><p><code class="signature">parent()</code></p></section><section class="function" documented="true" local-identifier="_after_fork_child" id="_after_fork_child"><h1><span class="prefix"></span><a class="title" href="#_after_fork_child"><span class="text.normal">_after_fork_child</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">_after_fork_child(pc_param)</code></p><p><span class="text.normal">Execute the </span><a class="project-local" href="../process#_after_fork_child"><span class="unknown">process._after_fork_child</span></a><span class="text.normal"> object from a pending call.</span></p></section><section class="function" documented="true" local-identifier="child" id="child"><h1><span class="prefix"></span><a class="title" href="#child"><span class="text.normal">child</span></a><span class="abstract-type">function</span><code class="type">void</code></h1><p><code class="signature">child()</code></p><p><span class="text.normal">Synchronize with the parent process.</span></p></section><section class="function" documented="false" local-identifier="ltracefunc" id="ltracefunc"><h1><span class="prefix"></span><a class="title" href="#ltracefunc"><span class="text.normal">ltracefunc</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">ltracefunc(ob, f, event, arg)</code></p></section><section class="function" documented="true" local-identifier="trace" id="trace"><h1><span class="prefix"></span><a class="title" href="#trace"><span class="text.normal">trace</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">trace(self, args)</code></p><p><span class="text.normal">Set the trace object on a set of threads.</span><span class="text.line-break"> </span><span class="text.normal">Only supports callable-object level.</span><span class="text.line-break"> </span><span class="text.normal">This is intended for debuggers.</span></p></section><section class="function" documented="true" local-identifier="_exit_by_signal" id="_exit_by_signal"><h1><span class="prefix"></span><a class="title" href="#_exit_by_signal"><span class="text.normal">_exit_by_signal</span></a><span class="abstract-type">function</span><code class="type">void</code></h1><p><code class="signature">_exit_by_signal()</code></p><p><span class="text.normal">Executed in atexit in order to preserve the signal's exit code.</span></p></section><section class="function" documented="true" local-identifier="signalexit" id="signalexit"><h1><span class="prefix"></span><a class="title" href="#signalexit"><span class="text.normal">signalexit</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">signalexit(mod, ob)</code></p><p><span class="text.normal">Register low-level atexit handler for exiting via a signal.</span></p></section><section class="function" documented="true" local-identifier="kport_clear_cloexec" id="kport_clear_cloexec"><h1><span class="prefix"></span><a class="title" href="#kport_clear_cloexec"><span class="text.normal">kport_clear_cloexec</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">kport_clear_cloexec(mod, seq)</code></p><p><span class="text.normal">Ensure that the kport is preserved across process images.</span><span class="text.line-break"> </span><span class="text.normal">Used by system to hold on to listening sockets.</span></p><p><span class="text.normal">Generally, most file descriptors created by </span><a class="project-local" href="../system"><span class="unknown">system</span></a><span class="text.normal"> will have</span><span class="text.line-break"> </span><span class="text.normal">the FD_CLOEXEC flag set.</span></p></section><section class="function" documented="false" local-identifier="kport_set_cloexec" id="kport_set_cloexec"><h1><span class="prefix"></span><a class="title" href="#kport_set_cloexec"><span class="text.normal">kport_set_cloexec</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">kport_set_cloexec(mod, seq)</code></p></section><section class="function" documented="false" local-identifier="k_initialize" id="k_initialize"><h1><span class="prefix"></span><a class="title" href="#k_initialize"><span class="text.normal">k_initialize</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">k_initialize(mod, ctx)</code></p></section><section class="function" documented="false" local-identifier="kernelq_clear" id="kernelq_clear"><h1><span class="prefix"></span><a class="title" href="#kernelq_clear"><span class="text.normal">kernelq_clear</span></a><span class="abstract-type">function</span><code class="type">void</code></h1><p><code class="signature">kernelq_clear(kq)</code></p></section><section class="function" documented="false" local-identifier="kernelq_traverse" id="kernelq_traverse"><h1><span class="prefix"></span><a class="title" href="#kernelq_traverse"><span class="text.normal">kernelq_traverse</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">kernelq_traverse(kq, visit, arg)</code></p></section><section class="function" documented="true" local-identifier="kernelq_reference_update" id="kernelq_reference_update"><h1><span class="prefix"></span><a class="title" href="#kernelq_reference_update"><span class="text.normal">kernelq_reference_update</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">kernelq_reference_update(kq, ln, current)</code></p><p><span class="text.normal">Replace the link in the reference dictionary, but return</span><span class="text.line-break"> </span><span class="text.normal">the existing object if any.</span></p></section><section class="function" documented="false" local-identifier="kernelq_reference_delete" id="kernelq_reference_delete"><h1><span class="prefix"></span><a class="title" href="#kernelq_reference_delete"><span class="text.normal">kernelq_reference_delete</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">kernelq_reference_delete(kq, ev)</code></p></section><section class="function" documented="true" local-identifier="kernelq_cyclic_event" id="kernelq_cyclic_event"><h1><span class="prefix"></span><a class="title" href="#kernelq_cyclic_event"><span class="text.normal">kernelq_cyclic_event</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">kernelq_cyclic_event(kq, cyclic, ln, kev)</code></p><p><span class="text.normal">Set or clear the cyclic flag on </span><a class="factor-local" href="#kernelq_cyclic_event.Parameters.ln"><span class="parameter">ln</span></a><span class="text.normal"> or raise an error if</span><span class="text.line-break"> </span><span class="text.normal">it's not acceptable for the given filter.</span></p></section><section class="function" documented="false" local-identifier="kernelq_transition" id="kernelq_transition"><h1><span class="prefix"></span><a class="title" href="#kernelq_transition"><span class="text.normal">kernelq_transition</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">kernelq_transition(kq, tq)</code></p></section><section class="function" documented="false" local-identifier="kernelq_cancel" id="kernelq_cancel"><h1><span class="prefix"></span><a class="title" href="#kernelq_cancel"><span class="text.normal">kernelq_cancel</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">kernelq_cancel(kq, ev)</code></p></section><section class="define" documented="false" local-identifier="IOPTION_SET_PGROUP" id="IOPTION_SET_PGROUP"><h1><span class="prefix"></span><a class="title" href="#IOPTION_SET_PGROUP"><span class="text.normal">IOPTION_SET_PGROUP</span></a><span class="abstract-type">define</span></h1><pre class="text.syntax"><code class="source">#define IOPTION_SET_PGROUP 1
</code></pre></section><section class="macro" documented="false" local-identifier="SPAWN_ATTRIBUTES" id="SPAWN_ATTRIBUTES"><h1><span class="prefix"></span><a class="title" href="#SPAWN_ATTRIBUTES"><span class="text.normal">SPAWN_ATTRIBUTES</span></a><span class="abstract-type">macro</span></h1><p><code class="signature">SPAWN_ATTRIBUTES()</code></p></section><section class="macro" documented="false" local-identifier="APPLE_SPAWN_EXTENSIONS" id="APPLE_SPAWN_EXTENSIONS"><h1><span class="prefix"></span><a class="title" href="#APPLE_SPAWN_EXTENSIONS"><span class="text.normal">APPLE_SPAWN_EXTENSIONS</span></a><span class="abstract-type">macro</span></h1><p><code class="signature">APPLE_SPAWN_EXTENSIONS()</code></p></section><section class="macro" documented="false" local-identifier="POSIX_SPAWN_ATTRIBUTES" id="POSIX_SPAWN_ATTRIBUTES"><h1><span class="prefix"></span><a class="title" href="#POSIX_SPAWN_ATTRIBUTES"><span class="text.normal">POSIX_SPAWN_ATTRIBUTES</span></a><span class="abstract-type">macro</span></h1><p><code class="signature">POSIX_SPAWN_ATTRIBUTES()</code></p></section><section class="macro" documented="false" local-identifier="free_null_terminated_array" id="free_null_terminated_array"><h1><span class="prefix"></span><a class="title" href="#free_null_terminated_array"><span class="text.normal">free_null_terminated_array</span></a><span class="abstract-type">macro</span></h1><p><code class="signature">free_null_terminated_array()</code></p></section><section class="function" documented="false" local-identifier="inv_spawn" id="inv_spawn"><h1><span class="prefix"></span><a class="title" href="#inv_spawn"><span class="text.normal">inv_spawn</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">inv_spawn(self, args, kw)</code></p></section><section class="function" documented="false" local-identifier="inv_new" id="inv_new"><h1><span class="prefix"></span><a class="title" href="#inv_new"><span class="text.normal">inv_new</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">inv_new(subtype, args, kw)</code></p></section><section class="function" documented="false" local-identifier="inv_dealloc" id="inv_dealloc"><h1><span class="prefix"></span><a class="title" href="#inv_dealloc"><span class="text.normal">inv_dealloc</span></a><span class="abstract-type">function</span><code class="type">void</code></h1><p><code class="signature">inv_dealloc(self)</code></p></section><section class="define" documented="false" local-identifier="EV_TYPE" id="EV_TYPE"><h1><span class="prefix"></span><a class="title" href="#EV_TYPE"><span class="text.normal">EV_TYPE</span></a><span class="abstract-type">define</span></h1><pre class="text.syntax"><code class="source">#define EV_TYPE(NAME, CONVERT, CYCLIC) \
	STATIC(PyObj) \
	ev_##NAME(PyTypeObject *PYTYPE, PyObj args, PyObj kw) { \
		PyObj ROB; \
		Event ev; \
		ROB = PYTYPE-&#62;tp_alloc(PYTYPE, 0); \
		if (ROB == NULL) \
			return(NULL); \
		ev = (Event) ROB; \
		Event_Type(ev) = EV_TYPE_ID(NAME); \
		Event_SetTime(ev, 0); \
		Event_SetSource(ev, NULL); \
		Event_SetKPort(ev, -1); \
		if (CONVERT(ev, args, kw) &#60; 0) \
		{ \
			Py_DECREF(ROB); \
			return(NULL); \
		} \
		Py_INCREF(Event_GetSource(ev)); \
		return(ROB); \
	}
</code></pre><pre class="text.syntax"><code class="source">#define EV_TYPE(NAME, C, CYCLIC) \
	case EV_TYPE_ID(NAME): \
		normal = #NAME; \
	break;
</code></pre><pre class="text.syntax"><code class="source">#define EV_TYPE(NAME, C, CYCLIC) PyMethod_Keywords(NAME),
</code></pre></section><section class="function" documented="true" local-identifier="ev_time_units" id="ev_time_units"><h1><span class="prefix"></span><a class="title" href="#ev_time_units"><span class="text.normal">ev_time_units</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">ev_time_units(ev, args, kw)</code></p><p><span class="text.normal">Initialize an event for scheduling a timer.</span></p></section><section class="function" documented="true" local-identifier="ev_pid_reference" id="ev_pid_reference"><h1><span class="prefix"></span><a class="title" href="#ev_pid_reference"><span class="text.normal">ev_pid_reference</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">ev_pid_reference(ev, args, kw)</code></p><p><span class="text.normal">Initialize an event with a process identifier and optional port.</span></p></section><section class="function" documented="true" local-identifier="ev_signal_reference" id="ev_signal_reference"><h1><span class="prefix"></span><a class="title" href="#ev_signal_reference"><span class="text.normal">ev_signal_reference</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">ev_signal_reference(ev, args, kw)</code></p><p><span class="text.normal">Initialize an event with a signal code and optional port.</span></p></section><section class="function" documented="true" local-identifier="ev_reference" id="ev_reference"><h1><span class="prefix"></span><a class="title" href="#ev_reference"><span class="text.normal">ev_reference</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">ev_reference(ev, args, kw)</code></p><p><span class="text.normal">Initialize an event with an arbitrary reference.</span></p></section><section class="function" documented="true" local-identifier="ev_filesystem_reference" id="ev_filesystem_reference"><h1><span class="prefix"></span><a class="title" href="#ev_filesystem_reference"><span class="text.normal">ev_filesystem_reference</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">ev_filesystem_reference(ev, args, kw)</code></p><p><span class="text.normal">Initialize an event with a filesystem Path.</span><span class="text.line-break"> </span><span class="text.normal">Monitoring events(fs_delta, fs_void, fs_status).</span></p></section><section class="function" documented="true" local-identifier="ev_io_reference" id="ev_io_reference"><h1><span class="prefix"></span><a class="title" href="#ev_io_reference"><span class="text.normal">ev_io_reference</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">ev_io_reference(ev, args, kw)</code></p><p><span class="text.normal">Initialize an event with a pair of kport_t.</span></p></section><section class="function" documented="false" local-identifier="ev_constructor" id="ev_constructor"><h1><span class="prefix"></span><a class="title" href="#ev_constructor"><span class="text.normal">ev_constructor</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">ev_constructor(typ, typstring)</code></p></section><section class="function" documented="false" local-identifier="ev_get_type" id="ev_get_type"><h1><span class="prefix"></span><a class="title" href="#ev_get_type"><span class="text.normal">ev_get_type</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">ev_get_type(ev, closure)</code></p></section><section class="function" documented="false" local-identifier="ev_get_port" id="ev_get_port"><h1><span class="prefix"></span><a class="title" href="#ev_get_port"><span class="text.normal">ev_get_port</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">ev_get_port(ev, closure)</code></p></section><section class="function" documented="false" local-identifier="ev_get_source" id="ev_get_source"><h1><span class="prefix"></span><a class="title" href="#ev_get_source"><span class="text.normal">ev_get_source</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">ev_get_source(ev, closure)</code></p></section><section class="function" documented="false" local-identifier="ev_hash" id="ev_hash"><h1><span class="prefix"></span><a class="title" href="#ev_hash"><span class="text.normal">ev_hash</span></a><span class="abstract-type">function</span><code class="type">Py_hash_t</code></h1><p><code class="signature">ev_hash(ev)</code></p></section><section class="function" documented="false" local-identifier="ev_richcompare" id="ev_richcompare"><h1><span class="prefix"></span><a class="title" href="#ev_richcompare"><span class="text.normal">ev_richcompare</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">ev_richcompare(ev, operand, cmpop)</code></p></section><section class="function" documented="true" local-identifier="ev_new" id="ev_new"><h1><span class="prefix"></span><a class="title" href="#ev_new"><span class="text.normal">ev_new</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">ev_new(typ, args, kw)</code></p><p><span class="text.normal">Copy Event. Type specific constructors must be used to create new instances.</span></p></section><section class="function" documented="false" local-identifier="ev_release" id="ev_release"><h1><span class="prefix"></span><a class="title" href="#ev_release"><span class="text.normal">ev_release</span></a><span class="abstract-type">function</span><code class="type">void</code></h1><p><code class="signature">ev_release(ev)</code></p></section><section class="function" documented="false" local-identifier="ev_clear" id="ev_clear"><h1><span class="prefix"></span><a class="title" href="#ev_clear"><span class="text.normal">ev_clear</span></a><span class="abstract-type">function</span><code class="type">void</code></h1><p><code class="signature">ev_clear(ev)</code></p></section><section class="function" documented="false" local-identifier="ev_traverse" id="ev_traverse"><h1><span class="prefix"></span><a class="title" href="#ev_traverse"><span class="text.normal">ev_traverse</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">ev_traverse(self, visit, arg)</code></p></section><section class="function" documented="false" local-identifier="ev_dealloc" id="ev_dealloc"><h1><span class="prefix"></span><a class="title" href="#ev_dealloc"><span class="text.normal">ev_dealloc</span></a><span class="abstract-type">function</span><code class="type">void</code></h1><p><code class="signature">ev_dealloc(ev)</code></p></section><section class="function" documented="true" local-identifier="interrupt_wait" id="interrupt_wait"><h1><span class="prefix"></span><a class="title" href="#interrupt_wait"><span class="text.normal">interrupt_wait</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">interrupt_wait(ks)</code></p><p><span class="text.normal">Interrupt a running </span><a class="project-local" href="../kernel#Scheduler.wait"><span class="unknown">kernel.Scheduler.wait</span></a><span class="text.normal"> call.</span></p><section class="unspecified" documented="true" local-identifier="Returns" id="interrupt_wait.Returns"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#interrupt_wait">interrupt_wait</a><a class="title" href="#interrupt_wait.Returns"><span class="text.normal">Returns</span></a><span class="abstract-type"></span></h1><dl class="text.mapping"><div id="interrupt_wait.Returns.0" documented="true"><dt><a class="dkn" href="#interrupt_wait.Returns.0"></a><span class="directory-key"><code class="">0</code></span></dt><dd><div class="status"></div><p><span class="text.normal">Not Waiting; no interrupt issued.</span></p></dd></div><div id="interrupt_wait.Returns.1" documented="true"><dt><a class="dkn" href="#interrupt_wait.Returns.1"></a><span class="directory-key"><code class="">1</code></span></dt><dd><div class="status"></div><p><span class="text.normal">Scheduler was waiting, but interrupt was already issued.</span></p></dd></div><div id="interrupt_wait.Returns.2" documented="true"><dt><a class="dkn" href="#interrupt_wait.Returns.2"></a><span class="directory-key"><code class="">2</code></span></dt><dd><div class="status"></div><p><span class="text.normal">Interrupt issued to system.</span></p></dd></div></dl></section></section><section class="structure" documented="false" local-identifier="timespec" id="timespec"><h1><span class="prefix"></span><a class="title" href="#timespec"><span class="text.normal">timespec</span></a><span class="abstract-type">structure</span></h1></section><section class="function" documented="true" local-identifier="ks_enqueue" id="ks_enqueue"><h1><span class="prefix"></span><a class="title" href="#ks_enqueue"><span class="text.normal">ks_enqueue</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">ks_enqueue(ks, callable)</code></p><p><a class="project-local" href="../kernel#Scheduler.enqueue"><span class="unknown">kernel.Scheduler.enqueue</span></a></p></section><section class="function" documented="true" local-identifier="ks_execute" id="ks_execute"><h1><span class="prefix"></span><a class="title" href="#ks_execute"><span class="text.normal">ks_execute</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">ks_execute(self)</code></p><p><a class="project-local" href="../kernel#Scheduler.execute"><span class="unknown">kernel.Scheduler.execute</span></a></p></section><section class="function" documented="false" local-identifier="ks_termination" id="ks_termination"><h1><span class="prefix"></span><a class="title" href="#ks_termination"><span class="text.normal">ks_termination</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">ks_termination(ks, kq, tq)</code></p></section><section class="function" documented="true" local-identifier="ks_close" id="ks_close"><h1><span class="prefix"></span><a class="title" href="#ks_close"><span class="text.normal">ks_close</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">ks_close(self)</code></p><p><a class="project-local" href="../kernel#Scheduler.close"><span class="unknown">kernel.Scheduler.close</span></a></p></section><section class="function" documented="true" local-identifier="ks_void" id="ks_void"><h1><span class="prefix"></span><a class="title" href="#ks_void"><span class="text.normal">ks_void</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">ks_void(self)</code></p><p><a class="project-local" href="../kernel#Scheduler.void"><span class="unknown">kernel.Scheduler.void</span></a></p></section><section class="function" documented="true" local-identifier="ks_interrupt" id="ks_interrupt"><h1><span class="prefix"></span><a class="title" href="#ks_interrupt"><span class="text.normal">ks_interrupt</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">ks_interrupt(self)</code></p><p><a class="project-local" href="../kernel#Scheduler.interrupt"><span class="unknown">kernel.Scheduler.interrupt</span></a></p></section><section class="function" documented="true" local-identifier="ks_dispatch" id="ks_dispatch"><h1><span class="prefix"></span><a class="title" href="#ks_dispatch"><span class="text.normal">ks_dispatch</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">ks_dispatch(self, args, kw)</code></p><p><a class="project-local" href="../kernel#Scheduler.dispatch"><span class="unknown">kernel.Scheduler.dispatch</span></a></p></section><section class="function" documented="true" local-identifier="ks_cancel" id="ks_cancel"><h1><span class="prefix"></span><a class="title" href="#ks_cancel"><span class="text.normal">ks_cancel</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">ks_cancel(self, ref)</code></p><p><a class="project-local" href="../kernel#Scheduler.cancel"><span class="unknown">kernel.Scheduler.cancel</span></a></p></section><section class="function" documented="true" local-identifier="ks_operations" id="ks_operations"><h1><span class="prefix"></span><a class="title" href="#ks_operations"><span class="text.normal">ks_operations</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">ks_operations(self)</code></p><p><a class="project-local" href="../kernel#Scheduler.operations"><span class="unknown">kernel.Scheduler.operations</span></a></p></section><section class="function" documented="false" local-identifier="ks__set_waiting" id="ks__set_waiting"><h1><span class="prefix"></span><a class="title" href="#ks__set_waiting"><span class="text.normal">ks__set_waiting</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">ks__set_waiting(self)</code></p></section><section class="function" documented="true" local-identifier="ks_wait" id="ks_wait"><h1><span class="prefix"></span><a class="title" href="#ks_wait"><span class="text.normal">ks_wait</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">ks_wait(self, args)</code></p><p><a class="project-local" href="../kernel#Scheduler.wait"><span class="unknown">kernel.Scheduler.wait</span></a></p></section><section class="function" documented="false" local-identifier="ks_get_closed" id="ks_get_closed"><h1><span class="prefix"></span><a class="title" href="#ks_get_closed"><span class="text.normal">ks_get_closed</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">ks_get_closed(self, closure)</code></p></section><section class="function" documented="false" local-identifier="ks_get_has_tasks" id="ks_get_has_tasks"><h1><span class="prefix"></span><a class="title" href="#ks_get_has_tasks"><span class="text.normal">ks_get_has_tasks</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">ks_get_has_tasks(self, closure)</code></p></section><section class="function" documented="false" local-identifier="ks_traverse" id="ks_traverse"><h1><span class="prefix"></span><a class="title" href="#ks_traverse"><span class="text.normal">ks_traverse</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">ks_traverse(self, visit, arg)</code></p></section><section class="function" documented="false" local-identifier="ks_clear" id="ks_clear"><h1><span class="prefix"></span><a class="title" href="#ks_clear"><span class="text.normal">ks_clear</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">ks_clear(self)</code></p></section><section class="function" documented="true" local-identifier="ks_dealloc" id="ks_dealloc"><h1><span class="prefix"></span><a class="title" href="#ks_dealloc"><span class="text.normal">ks_dealloc</span></a><span class="abstract-type">function</span><code class="type">void</code></h1><p><code class="signature">ks_dealloc(self)</code></p><p><a class="project-local" href="../kernel#Scheduler.__del__"><span class="unknown">kernel.Scheduler.__del__</span></a></p></section><section class="function" documented="true" local-identifier="ks_new" id="ks_new"><h1><span class="prefix"></span><a class="title" href="#ks_new"><span class="text.normal">ks_new</span></a><span class="abstract-type">function</span><code class="type">PyObj</code></h1><p><code class="signature">ks_new(subtype, args, kw)</code></p><p><a class="project-local" href="../kernel#Scheduler.__new__"><span class="unknown">kernel.Scheduler.__new__</span></a></p></section><section class="define" documented="false" local-identifier="INITIAL_TASKS_ALLOCATED" id="INITIAL_TASKS_ALLOCATED"><h1><span class="prefix"></span><a class="title" href="#INITIAL_TASKS_ALLOCATED"><span class="text.normal">INITIAL_TASKS_ALLOCATED</span></a><span class="abstract-type">define</span></h1><pre class="text.syntax"><code class="source">#define INITIAL_TASKS_ALLOCATED 4
</code></pre></section><section class="define" documented="false" local-identifier="O_EVTONLY" id="O_EVTONLY"><h1><span class="prefix"></span><a class="title" href="#O_EVTONLY"><span class="text.normal">O_EVTONLY</span></a><span class="abstract-type">define</span></h1><pre class="text.syntax"><code class="source">#define O_EVTONLY O_RDONLY
</code></pre></section><section class="define" documented="false" local-identifier="KFILTER" id="KFILTER"><h1><span class="prefix"></span><a class="title" href="#KFILTER"><span class="text.normal">KFILTER</span></a><span class="abstract-type">define</span></h1><pre class="text.syntax"><code class="source">#define KFILTER(B, TYP) case B: fname = #B; break;
</code></pre></section><section class="define" documented="false" local-identifier="FLAG" id="FLAG"><h1><span class="prefix"></span><a class="title" href="#FLAG"><span class="text.normal">FLAG</span></a><span class="abstract-type">define</span></h1><pre class="text.syntax"><code class="source">#define FLAG(FLG) "%s"
</code></pre><pre class="text.syntax"><code class="source">#define FLAG(FLG) (kev-&#62;flags &#38; FLG) ? (#FLG "|") : "",
</code></pre></section><section class="function" documented="true" local-identifier="fs_event_open" id="fs_event_open"><h1><span class="prefix"></span><a class="title" href="#fs_event_open"><span class="text.normal">fs_event_open</span></a><span class="abstract-type">function</span><code class="type">kport_t</code></h1><p><code class="signature">fs_event_open(path, ev_type)</code></p><p><span class="text.normal">ev_type is ignored here as the subevent set is determined by kernelq_identify.</span></p></section><section class="function" documented="false" local-identifier="kernelq_delta" id="kernelq_delta"><h1><span class="prefix"></span><a class="title" href="#kernelq_delta"><span class="text.normal">kernelq_delta</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">kernelq_delta(kq, ctl, kp, event)</code></p></section><section class="function" documented="true" local-identifier="kernelq_identify" id="kernelq_identify"><h1><span class="prefix"></span><a class="title" href="#kernelq_identify"><span class="text.normal">kernelq_identify</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">kernelq_identify(kev, evs)</code></p><p><span class="text.normal">Interpret event_t for use with a kqueue filter.</span></p></section><section class="function" documented="true" local-identifier="kernelq_interrupt" id="kernelq_interrupt"><h1><span class="prefix"></span><a class="title" href="#kernelq_interrupt"><span class="text.normal">kernelq_interrupt</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">kernelq_interrupt(kq)</code></p><p><span class="text.normal">Called by </span><a class="project-local" href="../kernel#Scheduler.interrupt"><span class="unknown">kernel.Scheduler.interrupt</span></a><span class="text.normal">.</span></p></section><section class="function" documented="true" local-identifier="kernelq_interrupt_accept" id="kernelq_interrupt_accept"><h1><span class="prefix"></span><a class="title" href="#kernelq_interrupt_accept"><span class="text.normal">kernelq_interrupt_accept</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">kernelq_interrupt_accept(kq)</code></p><p><span class="text.normal">Nothing to do for kqueue.</span></p></section><section class="function" documented="false" local-identifier="kernelq_interrupt_setup" id="kernelq_interrupt_setup"><h1><span class="prefix"></span><a class="title" href="#kernelq_interrupt_setup"><span class="text.normal">kernelq_interrupt_setup</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">kernelq_interrupt_setup(kq)</code></p></section><section class="function" documented="false" local-identifier="kevent_set_timer" id="kevent_set_timer"><h1><span class="prefix"></span><a class="title" href="#kevent_set_timer"><span class="text.normal">kevent_set_timer</span></a><span class="abstract-type">function</span><code class="type">void</code></h1><p><code class="signature">kevent_set_timer(kev, ns)</code></p></section><section class="function" documented="true" local-identifier="kernelq_schedule" id="kernelq_schedule"><h1><span class="prefix"></span><a class="title" href="#kernelq_schedule"><span class="text.normal">kernelq_schedule</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">kernelq_schedule(kq, cyclic, ln)</code></p><p><span class="text.normal">Establish the link with the kernel event.</span></p></section><section class="function" documented="false" local-identifier="kernelq_default_flags" id="kernelq_default_flags"><h1><span class="prefix"></span><a class="title" href="#kernelq_default_flags"><span class="text.normal">kernelq_default_flags</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">kernelq_default_flags(kq)</code></p></section><section class="function" documented="false" local-identifier="kernelq_initialize" id="kernelq_initialize"><h1><span class="prefix"></span><a class="title" href="#kernelq_initialize"><span class="text.normal">kernelq_initialize</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">kernelq_initialize(kq)</code></p></section><section class="function" documented="true" local-identifier="kernelq_close" id="kernelq_close"><h1><span class="prefix"></span><a class="title" href="#kernelq_close"><span class="text.normal">kernelq_close</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">kernelq_close(kq)</code></p><p><span class="text.normal">Close the event queue kernel resources.</span></p><section class="unspecified" documented="true" local-identifier="Returns" id="kernelq_close.Returns"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#kernelq_close">kernelq_close</a><a class="title" href="#kernelq_close.Returns"><span class="text.normal">Returns</span></a><span class="abstract-type"></span></h1><p><span class="text.normal">Zero if already closed, one if resources were destroyed.</span><span class="text.line-break"> </span><span class="text.normal">Negative one if </span><code class="">errno</code><span class="text.normal"> was set.</span></p></section></section><section class="function" documented="true" local-identifier="kernelq_receive" id="kernelq_receive"><h1><span class="prefix"></span><a class="title" href="#kernelq_receive"><span class="text.normal">kernelq_receive</span></a><span class="abstract-type">function</span><code class="type">int</code></h1><p><code class="signature">kernelq_receive(kq, seconds, ns)</code></p><p><span class="text.normal">Receive events from the kernel.</span><span class="text.line-break"> </span><span class="text.normal">Retry logic is not desired here as the event loop will naturally try again.</span></p></section><section class="function" documented="false" local-identifier="pkevent" id="pkevent"><h1><span class="prefix"></span><a class="title" href="#pkevent"><span class="text.normal">pkevent</span></a><span class="abstract-type">function</span><code class="type">void</code></h1><p><code class="signature">pkevent(kev)</code></p></section><h1 class="footing"></h1></main></body></html>