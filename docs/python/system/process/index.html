<html root="2"><head><title>fault.system.process</title><meta charset="utf-8"/><link as="style" rel="preload" href="../../.legacy-web/core.css"></link><link as="style" rel="preload" href="../../.legacy-web/factor.css"></link><link rel="stylesheet" href="../../.legacy-web/core.css"></link><link rel="stylesheet" href="../../.legacy-web/factor.css"></link></head><body><main><h1><span class="prefix"></span><div class="page-subject"><img class="icon" src="../../.factor-type-icon/if.fault.io/python-module.svg"></img><span class="subject-identifier">process</span><a href="http://if.fault.io/factors/python.module"><code class="type">python.module</code></a></div><div class="page-context"><a href="../"><img class="icon" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTYiIGhlaWdodD0iMjU2Ij48dGV4dCB4PSI0IiB5PSIwLjg4ZW0iIGZvbnQtc2l6ZT0iMjQ4Ij7impnvuI88L3RleHQ+PC9zdmc+"></img></a><span class="context-identifier">fault.system</span></div></h1><section class="chapter"><p><span class="text.normal">Process invocation and management interfaces.</span></p></section><section class="import" documented="false" local-identifier="sys" id="sys"><h1><span class="prefix"></span><a class="title" href="#sys"><span class="text.normal">sys</span></a><span class="abstract-type">import</span></h1></section><section class="import" documented="false" local-identifier="os" id="os"><h1><span class="prefix"></span><a class="title" href="#os"><span class="text.normal">os</span></a><span class="abstract-type">import</span></h1></section><section class="import" documented="false" local-identifier="signal" id="signal"><h1><span class="prefix"></span><a class="title" href="#signal"><span class="text.normal">signal</span></a><span class="abstract-type">import</span></h1></section><section class="import" documented="false" local-identifier="functools" id="functools"><h1><span class="prefix"></span><a class="title" href="#functools"><span class="text.normal">functools</span></a><span class="abstract-type">import</span></h1></section><section class="import" documented="false" local-identifier="contextlib" id="contextlib"><h1><span class="prefix"></span><a class="title" href="#contextlib"><span class="text.normal">contextlib</span></a><span class="abstract-type">import</span></h1></section><section class="import" documented="false" local-identifier="typing" id="typing"><h1><span class="prefix"></span><a class="title" href="#typing"><span class="text.normal">typing</span></a><span class="abstract-type">import</span></h1></section><section class="import" documented="false" local-identifier="types" id="types"><h1><span class="prefix"></span><a class="title" href="#types"><span class="text.normal">types</span></a><span class="abstract-type">import</span></h1></section><section class="import" documented="false" local-identifier="builtins" id="builtins"><h1><span class="prefix"></span><a class="title" href="#builtins"><span class="text.normal">builtins</span></a><span class="abstract-type">import</span></h1></section><section class="import" documented="false" local-identifier="kernel" id="kernel"><h1><span class="prefix"></span><a class="title" href="#kernel"><span class="text.normal">kernel</span></a><span class="abstract-type">import</span></h1></section><section class="import" documented="false" local-identifier="runtime" id="runtime"><h1><span class="prefix"></span><a class="title" href="#runtime"><span class="text.normal">runtime</span></a><span class="abstract-type">import</span></h1></section><section class="import" documented="false" local-identifier="thread" id="thread"><h1><span class="prefix"></span><a class="title" href="#thread"><span class="text.normal">thread</span></a><span class="abstract-type">import</span></h1></section><section class="import" documented="false" local-identifier="files" id="files"><h1><span class="prefix"></span><a class="title" href="#files"><span class="text.normal">files</span></a><span class="abstract-type">import</span></h1></section><section class="data" documented="false" local-identifier="__control_lock__" id="__control_lock__"><h1><span class="prefix"></span><a class="title" href="#__control_lock__"><span class="text.normal">__control_lock__</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">__control_lock__ = thread.amutex()
</code></pre></section><section class="data" documented="false" local-identifier="__interject_lock__" id="__interject_lock__"><h1><span class="prefix"></span><a class="title" href="#__interject_lock__"><span class="text.normal">__interject_lock__</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">__interject_lock__ = thread.amutex()
</code></pre></section><section class="data" documented="false" local-identifier="controlled" id="controlled"><h1><span class="prefix"></span><a class="title" href="#controlled"><span class="text.normal">controlled</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">controlled = __control_lock__.locked
</code></pre></section><section class="data" documented="false" local-identifier="current_process_id" id="current_process_id"><h1><span class="prefix"></span><a class="title" href="#current_process_id"><span class="text.normal">current_process_id</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">current_process_id = os.getpid()
</code></pre></section><section class="data" documented="false" local-identifier="parent_process_id" id="parent_process_id"><h1><span class="prefix"></span><a class="title" href="#parent_process_id"><span class="text.normal">parent_process_id</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">parent_process_id = os.getppid()
</code></pre></section><section class="data" documented="false" local-identifier="main_thread_id" id="main_thread_id"><h1><span class="prefix"></span><a class="title" href="#main_thread_id"><span class="text.normal">main_thread_id</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">main_thread_id = thread.identify()
</code></pre></section><section class="data" documented="false" local-identifier="index" id="index"><h1><span class="prefix"></span><a class="title" href="#index"><span class="text.normal">index</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">index = {
	'root': ('thread', thread.identify(), None),
}
</code></pre></section><section class="data" documented="false" local-identifier="__fork_lock__" id="__fork_lock__"><h1><span class="prefix"></span><a class="title" href="#__fork_lock__"><span class="text.normal">__fork_lock__</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">__fork_lock__ = thread.amutex()
</code></pre></section><section class="data" documented="false" local-identifier="fork_prepare_callset" id="fork_prepare_callset"><h1><span class="prefix"></span><a class="title" href="#fork_prepare_callset"><span class="text.normal">fork_prepare_callset</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">fork_prepare_callset = set()
</code></pre></section><section class="data" documented="false" local-identifier="fork_parent_callset" id="fork_parent_callset"><h1><span class="prefix"></span><a class="title" href="#fork_parent_callset"><span class="text.normal">fork_parent_callset</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">fork_parent_callset = set()
</code></pre></section><section class="data" documented="false" local-identifier="fork_child_callset" id="fork_child_callset"><h1><span class="prefix"></span><a class="title" href="#fork_child_callset"><span class="text.normal">fork_child_callset</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">fork_child_callset = set()
</code></pre></section><section class="data" documented="false" local-identifier="fork_child_cleanup" id="fork_child_cleanup"><h1><span class="prefix"></span><a class="title" href="#fork_child_cleanup"><span class="text.normal">fork_child_cleanup</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">fork_child_cleanup = set()
</code></pre></section><section class="data" documented="false" local-identifier="getattr" id="getattr"><h1><span class="prefix"></span><a class="title" href="#getattr"><span class="text.normal">getattr</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">getattr=getattr
</code></pre></section><section class="data" documented="true" local-identifier="signal_codes" id="signal_codes"><h1><span class="prefix"></span><a class="title" href="#signal_codes"><span class="text.normal">signal_codes</span></a><span class="abstract-type">data</span></h1><p><span class="text.normal">Mapping of categorized signal names to signal (integer) codes.</span></p><pre class="text.syntax"><code class="source">signal_codes = {
	'process/suspend': signal.SIGTSTP,
	'process/resume': signal.SIGCONT,
	'process/stop': signal.SIGSTOP,
	'process/continue': signal.SIGCONT,
	'process/terminate' : signal.SIGTERM,
	'process/quit' : signal.SIGQUIT,
	'process/interrupt' : signal.SIGINT,
	'process/kill' : signal.SIGKILL,

	'limit/cpu': signal.SIGXCPU,
	'limit/file': signal.SIGXFSZ,
	'limit/time': signal.SIGVTALRM,

	'terminal/stop': signal.SIGTSTP,
	'terminal/query': getattr(signal, 'SIGINFO', None) or getattr(signal, 'SIGUSR1', None),
	'terminal/delta': getattr(signal, 'SIGWINCH', None),
	'terminal/closed': signal.SIGHUP,
	'terminal/background-read': signal.SIGTTIN,
	'terminal/background-write': signal.SIGTTOU,

	'user/1': signal.SIGUSR1,
	'user/2': signal.SIGUSR2,

	'exception/floating-point': signal.SIGFPE,
	'exception/broken-pipe': signal.SIGPIPE,

	'error/invalid-memory-access': signal.SIGBUS,
	'error/restricted-memory-access': signal.SIGSEGV,
	'error/invalid-instruction': signal.SIGILL,
	'error/invalid-system-call': signal.SIGSYS,
}
</code></pre></section><section class="data" documented="false" local-identifier="signals" id="signals"><h1><span class="prefix"></span><a class="title" href="#signals"><span class="text.normal">signals</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">signals = signal_codes
</code></pre></section><section class="data" documented="true" local-identifier="signal_names" id="signal_names"><h1><span class="prefix"></span><a class="title" href="#signal_names"><span class="text.normal">signal_names</span></a><span class="abstract-type">data</span></h1><p><span class="text.normal">Mapping of signal (integer) codes to categorized names.</span></p><pre class="text.syntax"><code class="source">signal_names = dict([(v, k) for k, v in signal_codes.items()])
</code></pre></section><section class="data" documented="true" local-identifier="fatal_signals" id="fatal_signals"><h1><span class="prefix"></span><a class="title" href="#fatal_signals"><span class="text.normal">fatal_signals</span></a><span class="abstract-type">data</span></h1><p><span class="text.normal">Set of signals that would cause an immediate exit if </span><code class="">SIG_DFL</code><span class="text.normal"> were set.</span></p><pre class="text.syntax"><code class="source">fatal_signals = {
	signal.SIGINT,
	signal.SIGTERM,
	getattr(signal, 'SIGXCPU', None),
	getattr(signal, 'SIGXFSZ', None),
	getattr(signal, 'SIGVTALRM', None),
	getattr(signal, 'SIGPROF', None),
	getattr(signal, 'SIGUSR1', None),
	getattr(signal, 'SIGUSR2', None),
}
</code></pre></section><section class="data" documented="true" local-identifier="signal_identifiers" id="signal_identifiers"><h1><span class="prefix"></span><a class="title" href="#signal_identifiers"><span class="text.normal">signal_identifiers</span></a><span class="abstract-type">data</span></h1><p><span class="text.normal">Mapping of signal codes to identifiers used in POSIX header files.</span></p><pre class="text.syntax"><code class="source">signal_identifiers = {
	getattr(signal, name): name
	for name in dir(signal)
	if name.startswith('SIG') and name[3] != '_' and isinstance(getattr(signal, name), int)
}
</code></pre></section><section class="function" documented="true" local-identifier="interject" id="interject"><h1><span class="prefix"></span><a class="title" href="#interject"><span class="text.normal">interject</span></a><span class="abstract-type">function</span></h1><p><code class="signature">interject(main_thread_exec)</code></p><p><span class="text.normal">Trip the main thread by sending the process a SIGUSR2 signal in order to cause any</span><span class="text.line-break"> </span><span class="text.normal">running system call to exit early. Used in conjunction with</span><span class="text.line-break"> </span><a class="project-local" href="../runtime#interject"><span class="factor-element">fault.system.runtime.interject</span></a></p></section><section class="function" documented="true" local-identifier="clear_atexit_callbacks" id="clear_atexit_callbacks"><h1><span class="prefix"></span><a class="title" href="#clear_atexit_callbacks"><span class="text.normal">clear_atexit_callbacks</span></a><span class="abstract-type">function</span></h1><p><code class="signature">clear_atexit_callbacks()</code></p><p><span class="text.normal">In cases where there may be process dependent callbacks, add this to the</span><span class="text.line-break"> </span><a class="factor-local" href="#fork_child_callset"><span class="data">fork_child_callset</span></a><span class="text.normal"> to clear the callbacks.</span></p></section><section class="function" documented="false" local-identifier="_after_fork_parent" id="_after_fork_parent"><h1><span class="prefix"></span><a class="title" href="#_after_fork_parent"><span class="text.normal">_after_fork_parent</span></a><span class="abstract-type">function</span></h1><p><code class="signature">_after_fork_parent(child_pid)</code></p></section><section class="function" documented="false" local-identifier="_after_fork_child" id="_after_fork_child"><h1><span class="prefix"></span><a class="title" href="#_after_fork_child"><span class="text.normal">_after_fork_child</span></a><span class="abstract-type">function</span></h1><p><code class="signature">_after_fork_child()</code></p></section><section class="class" documented="true" local-identifier="Exit" id="Exit"><h1><span class="prefix"></span><a class="title" href="#Exit"><span class="text.normal">Exit</span></a><span class="abstract-type">class</span></h1><div class="inheritance"><code class="type"><a class="invalid" href="#SystemExit"><span class="unknown">SystemExit</span></a></code></div><p><span class="text.normal">Extension of SystemExit for use with interjections.</span></p><section class="data" documented="false" local-identifier="unspecified_status_code" id="Exit.unspecified_status_code"><h1><span class="prefix"></span><a class="section" href="#Exit">Exit</a><a class="title" href="#Exit.unspecified_status_code"><span class="text.normal">unspecified_status_code</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">unspecified_status_code = 255
</code></pre></section><section class="data" documented="false" local-identifier="usage_query_code" id="Exit.usage_query_code"><h1><span class="prefix"></span><a class="section" href="#Exit">Exit</a><a class="title" href="#Exit.usage_query_code"><span class="text.normal">usage_query_code</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">usage_query_code = 200
</code></pre></section><section class="method" documented="false" local-identifier="raised" id="Exit.raised"><h1><span class="prefix"></span><a class="section" href="#Exit">Exit</a><a class="title" href="#Exit.raised"><span class="text.normal">raised</span></a><span class="abstract-type">method</span></h1><p><code class="signature">raised(self)</code></p></section></section><section class="class" documented="true" local-identifier="Invocation" id="Invocation"><h1><span class="prefix"></span><a class="title" href="#Invocation"><span class="text.normal">Invocation</span></a><span class="abstract-type">class</span></h1><div class="inheritance"><code class="type"><a class="invalid" href="#object"><span class="unknown">object</span></a></code></div><p><span class="text.normal">A structure representing the invocation of a system process and the specification</span><span class="text.line-break"> </span><span class="text.normal">of the means of exiting. Normally, used to describe how the process was invoked and the</span><span class="text.line-break"> </span><span class="text.normal">corresponding parameters, argv and environ, in which the invocation should be reacting to.</span></p><p><span class="text.normal">For system invocation, the </span><a class="factor-local" href="#Invocation.parameters"><span class="data">parameters</span></a><span class="text.normal"> dictionary will have two entries by default:</span><span class="text.line-break"> </span><code class="">'system'</code><span class="text.normal"> and </span><code class="">'type'</code><span class="text.normal">.</span></p><section class="data" documented="true" local-identifier="context" id="Invocation.context"><h1><span class="prefix"></span><a class="section" href="#Invocation">Invocation</a><a class="title" href="#Invocation.context"><span class="text.normal">context</span></a><span class="abstract-type">data</span></h1><p><span class="text.normal">The Invocation that caused the creation of this </span><a class="factor-local" href="#Invocation"><span class="class">Invocation</span></a><span class="text.normal">.</span><span class="text.line-break"> </span><span class="text.normal">By default and when created from </span><a class="factor-local" href="#Invocation.system"><span class="classmethod">system</span></a><span class="text.normal">, this property is </span><a class="invalid" href="#None"><span class="unknown">None</span></a><span class="text.normal">.</span></p><pre class="text.syntax"><code class="source">context = None
</code></pre></section><section class="data" documented="true" local-identifier="parameters" id="Invocation.parameters"><h1><span class="prefix"></span><a class="section" href="#Invocation">Invocation</a><a class="title" href="#Invocation.parameters"><span class="text.normal">parameters</span></a><span class="abstract-type">data</span></h1><p><span class="text.normal">Arbitrary storage for the parameteres of the invocation. Usually, </span><code class="">'type'</code><span class="text.normal">, </span><code class="">'system'</code><span class="text.normal">,</span><span class="text.line-break"> </span><span class="text.normal">and </span><code class="">'structured'</code><span class="text.normal"> keys are present.</span></p><pre class="text.syntax"><code class="source">parameters = None
</code></pre></section><section class="method" documented="false" local-identifier="__init__" id="Invocation.__init__"><h1><span class="prefix"></span><a class="section" href="#Invocation">Invocation</a><a class="title" href="#Invocation.__init__"><span class="text.normal">__init__</span></a><span class="abstract-type">method</span></h1><p><code class="signature">__init__(self, exit_method)</code></p></section><section class="method" documented="true" local-identifier="exit" id="Invocation.exit"><h1><span class="prefix"></span><a class="section" href="#Invocation">Invocation</a><a class="title" href="#Invocation.exit"><span class="text.normal">exit</span></a><span class="abstract-type">method</span></h1><p><code class="signature">exit(self, result)</code></p><p><span class="text.normal">Perform the exit method designated during the initialization of the invocation.</span></p></section><section class="property" documented="true" local-identifier="fs_pwd" id="Invocation.fs_pwd"><h1><span class="prefix"></span><a class="section" href="#Invocation">Invocation</a><a class="title" href="#Invocation.fs_pwd"><span class="text.normal">fs_pwd</span></a><span class="abstract-type">property</span></h1><p><span class="text.normal">The working directory of the process when the </span><a class="factor-local" href="#Invocation"><span class="class">Invocation</span></a><span class="text.normal"> was created.</span></p></section><section class="property" documented="true" local-identifier="argv" id="Invocation.argv"><h1><span class="prefix"></span><a class="section" href="#Invocation">Invocation</a><a class="title" href="#Invocation.argv"><span class="text.normal">argv</span></a><span class="abstract-type">property</span></h1><p><span class="text.normal">Arguments provided by the system without the leading command name.</span></p></section><section class="data" documented="false" local-identifier="args" id="Invocation.args"><h1><span class="prefix"></span><a class="section" href="#Invocation">Invocation</a><a class="title" href="#Invocation.args"><span class="text.normal">args</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">args = argv
	@property
</code></pre></section><section class="property" documented="true" local-identifier="environ" id="Invocation.environ"><h1><span class="prefix"></span><a class="section" href="#Invocation">Invocation</a><a class="title" href="#Invocation.environ"><span class="text.normal">environ</span></a><span class="abstract-type">property</span><code class="type"><a class="invalid" href="#dict"><span class="unknown">dict</span></a></code></h1><p><span class="text.normal">The environment variables collected from the system during the creation of the instance.</span></p></section><section class="method" documented="true" local-identifier="imports" id="Invocation.imports"><h1><span class="prefix"></span><a class="section" href="#Invocation">Invocation</a><a class="title" href="#Invocation.imports"><span class="text.normal">imports</span></a><span class="abstract-type">method</span></h1><p><code class="signature">imports(self, envvars)</code></p><p><span class="text.normal">Copy the given </span><a class="factor-local" href="#Invocation.imports.Parameters.envvars"><span class="parameter">envvars</span></a><span class="text.normal"> from </span><a class="none" href="http://fault.io/dev/null"><span class="invalid">os.environ</span></a><span class="text.normal"> into the invocation's </span><a class="factor-local" href="#Invocation.parameters"><span class="data">parameters</span></a><span class="text.normal">.</span><span class="text.line-break"> </span><span class="text.normal">The snapshot of imported environment variables may be accessed using </span><a class="factor-local" href="#Invocation.environ"><span class="property">environ</span></a><span class="text.normal">.</span></p><section class="unspecified" documented="true" local-identifier="Parameters" id="Invocation.imports.Parameters"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#Invocation">Invocation</a><a class="section" href="#Invocation.imports">imports</a><a class="title" href="#Invocation.imports.Parameters"><span class="text.normal">Parameters</span></a><span class="abstract-type"></span></h1><dl class="text.mapping"><div id="Invocation.imports.Parameters.self" class="parameter" documented="false"><dt><a class="dkn" href="#Invocation.imports.Parameters.self"></a><span class="directory-key"><code class="parameter">self</code></span></dt><dd><div class="status"></div><p><code class="control.absent">Undocumented</code><span class="text.normal">.</span></p></dd></div><div id="Invocation.imports.Parameters.envvars" class="parameter" documented="true"><dt><a class="dkn" href="#Invocation.imports.Parameters.envvars"></a><span class="directory-key"><code class="parameter">envvars</code></span></dt><dd><div class="status"></div><ul class="text.set"><li><p><code class="type.syntax">typing.Iterable[str]</code></p></li></ul><p><span class="text.normal">The collection of variables to copy from the environment.</span></p></dd></div></dl></section></section><section class="classmethod" documented="true" local-identifier="system" id="Invocation.system"><h1><span class="prefix"></span><a class="section" href="#Invocation">Invocation</a><a class="title" href="#Invocation.system"><span class="text.normal">system</span></a><span class="abstract-type">classmethod</span></h1><p><code class="signature">system(Class, context, environ)</code></p><p><span class="text.normal">Create an instance representing that of the invocation from the operating</span><span class="text.line-break"> </span><span class="text.normal">system. Primarily, information is retrieved from the </span><a class="none" href="http://fault.io/dev/null"><span class="invalid">sys</span></a><span class="text.normal"> and </span><a class="none" href="http://fault.io/dev/null"><span class="invalid">os</span></a><span class="text.normal"> module.</span></p><section class="unspecified" documented="true" local-identifier="Parameters" id="Invocation.system.Parameters"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#Invocation">Invocation</a><a class="section" href="#Invocation.system">system</a><a class="title" href="#Invocation.system.Parameters"><span class="text.normal">Parameters</span></a><span class="abstract-type"></span></h1><dl class="text.mapping"><div id="Invocation.system.Parameters.Class" class="parameter" documented="false"><dt><a class="dkn" href="#Invocation.system.Parameters.Class"></a><span class="directory-key"><code class="parameter">Class</code></span></dt><dd><div class="status"></div><p><code class="control.absent">Undocumented</code><span class="text.normal">.</span></p></dd></div><div id="Invocation.system.Parameters.context" class="parameter" documented="true"><dt><a class="dkn" href="#Invocation.system.Parameters.context"></a><span class="directory-key"><code class="parameter">context</code></span></dt><dd><div class="status"></div><p><span class="text.normal">A reference context identifying the </span><a class="factor-local" href="#Invocation"><span class="class">Invocation</span></a><span class="text.normal"> caused this invocation to be created.</span></p></dd></div><div id="Invocation.system.Parameters.environ" class="parameter" documented="true"><dt><a class="dkn" href="#Invocation.system.Parameters.environ"></a><span class="directory-key"><code class="parameter">environ</code></span></dt><dd><div class="status"></div><p><span class="text.normal">Sequence declaring the environment variables to acquire a snapshot of.</span></p></dd></div><div id="Invocation.system.Parameters.isinstance" class="parameter" documented="false"><dt><a class="dkn" href="#Invocation.system.Parameters.isinstance"></a><span class="directory-key"><code class="parameter">isinstance</code></span></dt><dd><div class="status"></div><p><code class="control.absent">Undocumented</code><span class="text.normal">.</span></p></dd></div><div id="Invocation.system.Parameters.str" class="parameter" documented="false"><dt><a class="dkn" href="#Invocation.system.Parameters.str"></a><span class="directory-key"><code class="parameter">str</code></span></dt><dd><div class="status"></div><p><code class="control.absent">Undocumented</code><span class="text.normal">.</span></p></dd></div></dl></section></section><section class="classmethod" documented="true" local-identifier="system_exit_method" id="Invocation.system_exit_method"><h1><span class="prefix"></span><a class="section" href="#Invocation">Invocation</a><a class="title" href="#Invocation.system_exit_method"><span class="text.normal">system_exit_method</span></a><span class="abstract-type">classmethod</span></h1><p><code class="signature">system_exit_method(Class, exit_status)</code></p><p><span class="text.normal">A means of exit used with a </span><a class="factor-local" href="#Fork.trap"><span class="classmethod">Fork.trap</span></a><span class="text.normal"> managed process.</span></p><p><span class="text.normal">Injecting the exception on the main thread, this can also</span><span class="text.line-break"> </span><span class="text.normal">be used within regular Python processes.</span></p></section></section><section class="class" documented="true" local-identifier="ControlException" id="ControlException"><h1><span class="prefix"></span><a class="title" href="#ControlException"><span class="text.normal">ControlException</span></a><span class="abstract-type">class</span></h1><div class="inheritance"><code class="type"><a class="invalid" href="#BaseException"><span class="unknown">BaseException</span></a></code></div><p><span class="text.normal">Process control exceptions for significant events.</span></p><p><span class="text.normal">This is a control exception inheriting from </span><a class="invalid" href="#BaseException"><span class="unknown">BaseException</span></a><span class="text.normal">.</span><span class="text.line-break"> </span><span class="text.normal">It should not be directly trapped, but subclasses may use it to classify</span><span class="text.line-break"> </span><span class="text.normal">exceptions that are not necessarily indicative of a failure.</span></p><section class="data" documented="false" local-identifier="__kill__" id="ControlException.__kill__"><h1><span class="prefix"></span><a class="section" href="#ControlException">ControlException</a><a class="title" href="#ControlException.__kill__"><span class="text.normal">__kill__</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">__kill__ = None
</code></pre></section><section class="method" documented="false" local-identifier="raised" id="ControlException.raised"><h1><span class="prefix"></span><a class="section" href="#ControlException">ControlException</a><a class="title" href="#ControlException.raised"><span class="text.normal">raised</span></a><span class="abstract-type">method</span></h1><p><code class="signature">raised(self)</code></p></section></section><section class="class" documented="true" local-identifier="Critical" id="Critical"><h1><span class="prefix"></span><a class="title" href="#Critical"><span class="text.normal">Critical</span></a><span class="abstract-type">class</span></h1><div class="inheritance"><code class="type"><a class="factor-local" href="#ControlException"><span class="class">ControlException</span></a></code></div><p><span class="text.normal">An exception used to communicate that a fatal condition was identified.</span></p><section class="data" documented="false" local-identifier="__kill__" id="Critical.__kill__"><h1><span class="prefix"></span><a class="section" href="#Critical">Critical</a><a class="title" href="#Critical.__kill__"><span class="text.normal">__kill__</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">__kill__ = True
</code></pre></section></section><section class="function" documented="true" local-identifier="panic" id="panic"><h1><span class="prefix"></span><a class="title" href="#panic"><span class="text.normal">panic</span></a><span class="abstract-type">function</span></h1><p><code class="signature">panic()</code></p><p><span class="text.normal">Raise a </span><a class="factor-local" href="#Critical"><span class="class">Critical</span></a><span class="text.normal"> exception in the main thread forcing the process to exit.</span></p></section><section class="class" documented="true" local-identifier="Interruption" id="Interruption"><h1><span class="prefix"></span><a class="title" href="#Interruption"><span class="text.normal">Interruption</span></a><span class="abstract-type">class</span></h1><div class="inheritance"><code class="type"><a class="factor-local" href="#ControlException"><span class="class">ControlException</span></a></code></div><p><span class="text.normal">Similar to </span><a class="invalid" href="#KeyboardInterrupt"><span class="unknown">KeyboardInterrupt</span></a><span class="text.normal">, but causes </span><a class="factor-local" href="#control"><span class="function">control</span></a><span class="text.normal"> to exit with the signal,</span><span class="text.line-break"> </span><span class="text.normal">and calls critical status hooks.</span></p><p><span class="text.normal">Primarily used to cause signal exit codes that are usually masked with</span><span class="text.line-break"> </span><a class="invalid" href="#KeyboardInterrupt"><span class="unknown">KeyboardInterrupt</span></a><span class="text.normal">.</span></p><section class="data" documented="false" local-identifier="__kill__" id="Interruption.__kill__"><h1><span class="prefix"></span><a class="section" href="#Interruption">Interruption</a><a class="title" href="#Interruption.__kill__"><span class="text.normal">__kill__</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">__kill__ = True
</code></pre></section><section class="method" documented="false" local-identifier="__init__" id="Interruption.__init__"><h1><span class="prefix"></span><a class="section" href="#Interruption">Interruption</a><a class="title" href="#Interruption.__init__"><span class="text.normal">__init__</span></a><span class="abstract-type">method</span></h1><p><code class="signature">__init__(self, type)</code></p></section><section class="method" documented="false" local-identifier="__str__" id="Interruption.__str__"><h1><span class="prefix"></span><a class="section" href="#Interruption">Interruption</a><a class="title" href="#Interruption.__str__"><span class="text.normal">__str__</span></a><span class="abstract-type">method</span></h1><p><code class="signature">__str__(self)</code></p></section><section class="method" documented="true" local-identifier="raised" id="Interruption.raised"><h1><span class="prefix"></span><a class="section" href="#Interruption">Interruption</a><a class="title" href="#Interruption.raised"><span class="text.normal">raised</span></a><span class="abstract-type">method</span></h1><p><code class="signature">raised(self)</code></p><p><span class="text.normal">Register a system-level atexit handler that will cause the process to exit with</span><span class="text.line-break"> </span><span class="text.normal">the configured signal.</span></p></section><section class="classmethod" documented="true" local-identifier="interrupt" id="Interruption.interrupt"><h1><span class="prefix"></span><a class="section" href="#Interruption">Interruption</a><a class="title" href="#Interruption.interrupt"><span class="text.normal">interrupt</span></a><span class="abstract-type">classmethod</span></h1><p><code class="signature">interrupt(Class, signo, frame)</code></p><p><span class="text.normal">Signal handler that interjects an Interruption instance into the main thread.</span></p><p><span class="text.normal">Default signal handler for SIGINT.</span></p></section><section class="staticmethod" documented="true" local-identifier="void" id="Interruption.void"><h1><span class="prefix"></span><a class="section" href="#Interruption">Interruption</a><a class="title" href="#Interruption.void"><span class="text.normal">void</span></a><span class="abstract-type">staticmethod</span></h1><p><code class="signature">void(signo, frame)</code></p><p><span class="text.normal">Python-level signal handler that does nothing.</span></p></section><section class="classmethod" documented="true" local-identifier="filter" id="Interruption.filter"><h1><span class="prefix"></span><a class="section" href="#Interruption">Interruption</a><a class="title" href="#Interruption.filter"><span class="text.normal">filter</span></a><span class="abstract-type">classmethod</span></h1><p><code class="signature">filter(Class, *sigs)</code></p><p><span class="text.normal">Assign the void signal handler to the all of the given signal numbers.</span></p></section><section class="classmethod" documented="true" local-identifier="catch" id="Interruption.catch"><h1><span class="prefix"></span><a class="section" href="#Interruption">Interruption</a><a class="title" href="#Interruption.catch"><span class="text.normal">catch</span></a><span class="abstract-type">classmethod</span></h1><p><code class="signature">catch(Class, *sigs)</code></p><p><span class="text.normal">Assign the interrupt signal handler to the all of the given signal numbers.</span></p></section><section class="classmethod" documented="true" local-identifier="trap" id="Interruption.trap"><h1><span class="prefix"></span><a class="section" href="#Interruption">Interruption</a><a class="title" href="#Interruption.trap"><span class="text.normal">trap</span></a><span class="abstract-type">classmethod</span></h1><p><code class="signature">trap(Class)</code></p><p><span class="text.normal">Signal handler for a root process.</span></p></section></section><section class="class" documented="true" local-identifier="Fork" id="Fork"><h1><span class="prefix"></span><a class="title" href="#Fork"><span class="text.normal">Fork</span></a><span class="abstract-type">class</span></h1><div class="inheritance"><code class="type"><a class="factor-local" href="#ControlException"><span class="class">ControlException</span></a></code></div><p><span class="text.normal">Exception used to signal </span><a class="factor-local" href="#Fork.trap"><span class="classmethod">Fork.trap</span></a><span class="text.normal"> to replace the existing managed call.</span></p><p><span class="text.normal">Usual case is that a </span><a class="factor-local" href="#Fork.trap"><span class="classmethod">Fork.trap</span></a><span class="text.normal"> call is made on the main thread where other threads are</span><span class="text.line-break"> </span><span class="text.normal">created to run the actual program. Given that the program is finished and another should be ran</span><span class="text.line-break"> </span><span class="text.emphasis">as if the current program were never ran</span><span class="text.normal">, the </span><a class="factor-local" href="#ControlException"><span class="class">ControlException</span></a><span class="text.normal"> can be raised in the</span><span class="text.line-break"> </span><span class="text.normal">main thread replacing the initial callable given to </span><a class="factor-local" href="#Fork.trap"><span class="classmethod">Fork.trap</span></a><span class="text.normal">.</span></p><p><span class="text.normal">The exception should only be used through the provided classmethods.</span></p><p><span class="text.normal">This exception should never be displayed in a traceback as it is intended to be caught</span><span class="text.line-break"> </span><span class="text.normal">by </span><a class="factor-local" href="#Fork.trap"><span class="classmethod">Fork.trap</span></a><span class="text.normal">.</span></p><section class="data" documented="false" local-identifier="__controlled_thread_id__" id="Fork.__controlled_thread_id__"><h1><span class="prefix"></span><a class="section" href="#Fork">Fork</a><a class="title" href="#Fork.__controlled_thread_id__"><span class="text.normal">__controlled_thread_id__</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">__controlled_thread_id__ = None
</code></pre></section><section class="method" documented="false" local-identifier="__init__" id="Fork.__init__"><h1><span class="prefix"></span><a class="section" href="#Fork">Fork</a><a class="title" href="#Fork.__init__"><span class="text.normal">__init__</span></a><span class="abstract-type">method</span></h1><p><code class="signature">__init__(self, controller, *args, **kw)</code></p></section><section class="method" documented="false" local-identifier="__str__" id="Fork.__str__"><h1><span class="prefix"></span><a class="section" href="#Fork">Fork</a><a class="title" href="#Fork.__str__"><span class="text.normal">__str__</span></a><span class="abstract-type">method</span></h1><p><code class="signature">__str__(self)</code></p></section><section class="method" documented="false" local-identifier="pivot" id="Fork.pivot"><h1><span class="prefix"></span><a class="section" href="#Fork">Fork</a><a class="title" href="#Fork.pivot"><span class="text.normal">pivot</span></a><span class="abstract-type">method</span></h1><p><code class="signature">pivot(self, T)</code></p></section><section class="classmethod" documented="true" local-identifier="substitute" id="Fork.substitute"><h1><span class="prefix"></span><a class="section" href="#Fork">Fork</a><a class="title" href="#Fork.substitute"><span class="text.normal">substitute</span></a><span class="abstract-type">classmethod</span></h1><p><code class="signature">substitute(Class, callable, *args, **kw)</code></p><p><span class="text.normal">Substitute the existing control call with the given one.</span></p><p><span class="text.normal">Immediately raises a </span><a class="factor-local" href="#Fork"><span class="class">Fork</span></a><span class="text.normal"> instance in the calling thread to be caught</span><span class="text.line-break"> </span><span class="text.normal">by a corresponding </span><a class="factor-local" href="#Fork.trap"><span class="classmethod">trap</span></a><span class="text.normal"> call.</span></p><p><span class="text.normal">Only to be used in cases where it is known that the current frame stack is</span><span class="text.line-break"> </span><span class="text.normal">being managed by </span><a class="factor-local" href="#Fork.trap"><span class="classmethod">trap</span></a><span class="text.normal">.</span></p></section><section class="classmethod" documented="true" local-identifier="dispatch" id="Fork.dispatch"><h1><span class="prefix"></span><a class="section" href="#Fork">Fork</a><a class="title" href="#Fork.dispatch"><span class="text.normal">dispatch</span></a><span class="abstract-type">classmethod</span><code class="type"><a class="invalid" href="#int"><span class="unknown">int</span></a></code></h1><p><code class="signature">dispatch(Class, controller, *args, **kw)</code></p><p><span class="text.normal">Execute the given callable with the given arguments in a child process.</span><span class="text.line-break"> </span><span class="text.normal">This performs an </span><a class="factor-local" href="#interject"><span class="function">interject</span></a><span class="text.normal"> call. Given that </span><a class="factor-local" href="#Fork.pivot"><span class="method">pivot</span></a><span class="text.normal"> was called to execute the</span><span class="text.line-break"> </span><span class="text.normal">program, the pivot function will catch the exception, in the child, and</span><span class="text.line-break"> </span><span class="text.normal">execute the replacement.</span></p><section class="unspecified" documented="true" local-identifier="Parameters" id="Fork.dispatch.Parameters"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#Fork">Fork</a><a class="section" href="#Fork.dispatch">dispatch</a><a class="title" href="#Fork.dispatch.Parameters"><span class="text.normal">Parameters</span></a><span class="abstract-type"></span></h1><dl class="text.mapping"><div id="Fork.dispatch.Parameters.Class" class="parameter" documented="false"><dt><a class="dkn" href="#Fork.dispatch.Parameters.Class"></a><span class="directory-key"><code class="parameter">Class</code></span></dt><dd><div class="status"></div><p><code class="control.absent">Undocumented</code><span class="text.normal">.</span></p></dd></div><div id="Fork.dispatch.Parameters.controller" class="parameter" documented="true"><dt><a class="dkn" href="#Fork.dispatch.Parameters.controller"></a><span class="directory-key"><code class="parameter">controller</code></span></dt><dd><div class="status"></div><p><span class="text.normal">The object that will be called in the clone.</span></p></dd></div><div id="Fork.dispatch.Parameters.args" class="parameter" documented="true"><dt><a class="dkn" href="#Fork.dispatch.Parameters.args"></a><span class="directory-key"><code class="parameter">args</code></span></dt><dd><div class="status"></div><p><span class="text.normal">Arguments given to the callable.</span></p></dd></div><div id="Fork.dispatch.Parameters.kw" class="parameter" documented="true"><dt><a class="dkn" href="#Fork.dispatch.Parameters.kw"></a><span class="directory-key"><code class="parameter">kw</code></span></dt><dd><div class="status"></div><p><span class="text.normal">Keywords given to the callable.</span></p></dd></div></dl></section><section class="unspecified" documented="true" local-identifier="Returns" id="Fork.dispatch.Returns"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#Fork">Fork</a><a class="section" href="#Fork.dispatch">dispatch</a><a class="title" href="#Fork.dispatch.Returns"><span class="text.normal">Returns</span></a><span class="abstract-type"></span></h1><dl class="text.mapping"><div id="Fork.dispatch.Returns.int" documented="true"><dt><a class="dkn" href="#Fork.dispatch.Returns.int"></a><span class="directory-key"><a class="invalid" href="#int"><span class="unknown">int</span></a></span></dt><dd><div class="status"></div><p><span class="text.normal">The child process' PID.</span></p></dd></div></dl></section><section class="unspecified" documented="true" local-identifier="Exceptions" id="Fork.dispatch.Exceptions"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#Fork">Fork</a><a class="section" href="#Fork.dispatch">dispatch</a><a class="title" href="#Fork.dispatch.Exceptions"><span class="text.normal">Exceptions</span></a><span class="abstract-type"></span></h1><dl class="text.mapping"><div id="Fork.dispatch.Exceptions.Critical" documented="true"><dt><a class="dkn" href="#Fork.dispatch.Exceptions.Critical"></a><span class="directory-key"><a class="factor-local" href="#Critical"><span class="class">Critical</span></a></span></dt><dd><div class="status"></div><p><span class="text.normal">Raised when the returns in the branches did not return.</span></p></dd></div></dl></section></section><section class="classmethod" documented="true" local-identifier="trap" id="Fork.trap"><h1><span class="prefix"></span><a class="section" href="#Fork">Fork</a><a class="title" href="#Fork.trap"><span class="text.normal">trap</span></a><span class="abstract-type">classmethod</span></h1><p><code class="signature">trap(Class, controller, *args, **kw)</code></p><p><span class="text.normal">Establish a point for substituting the process. Trap provides an</span><span class="text.line-break"> </span><span class="text.normal">exception trap for replacing the controlling stack. This is used to</span><span class="text.line-break"> </span><span class="text.normal">perform safe fork operations that allow tear-down of process specific resources</span><span class="text.line-break"> </span><span class="text.normal">in a well defined manner.</span></p><div class="admonition-NOTE"><table><tr><td><span class="admonition.icon"></span></td><td><span class="admonition.severity">NOTE</span></td></tr><tr><td></td><td><div class="admonition.content"><p><span class="text.normal">Due to the varying global process state that may exist in a given process, it</span><span class="text.line-break"> </span><span class="text.normal">is often better to start a new Python instance.</span></p></div></td></tr></table></div></section></section><section class="function" documented="true" local-identifier="critical" id="critical"><h1><span class="prefix"></span><a class="title" href="#critical"><span class="text.normal">critical</span></a><span class="abstract-type">function</span></h1><p><code class="signature">critical(context, callable, *args, **kw)</code></p><p><span class="text.normal">A callable used to trap exceptions and interject a </span><a class="factor-local" href="#Critical"><span class="class">Critical</span></a><span class="text.normal"> instance caused by the</span><span class="text.line-break"> </span><span class="text.normal">original. This function is intended for critical sections where the failure is likely</span><span class="text.line-break"> </span><span class="text.normal">to cause the application to become unresponsive via usual routes.</span></p><p><a class="factor-local" href="#critical"><span class="function">critical</span></a><span class="text.normal"> may return, but must never raise.</span></p><p><span class="text.normal">For example:</span></p><pre class="text.syntax"><code class="syntax/python">from fault.system.process import critical

def fun():
	while True:
		# critical loop
		# any exception causes the process to terminate
		...

critical(None, fun)
</code></pre></section><section class="function" documented="true" local-identifier="protect" id="protect"><h1><span class="prefix"></span><a class="title" href="#protect"><span class="text.normal">protect</span></a><span class="abstract-type">function</span></h1><p><code class="signature">protect(*init)</code></p><p><span class="text.normal">Perpetually protect the main thread using a sleep loop that can only exit</span><span class="text.line-break"> </span><span class="text.normal">using an interjection.</span></p><p><span class="text.normal">Used by </span><a class="factor-local" href="#control"><span class="function">control</span></a><span class="text.normal"> to hold the main thread in </span><a class="factor-local" href="#Fork.trap"><span class="classmethod">Fork.trap</span></a><span class="text.normal"> for applications</span><span class="text.line-break"> </span><span class="text.normal">that rely on a set of threads to perform the actual work.</span></p><section class="unspecified" documented="true" local-identifier="Exceptions" id="protect.Exceptions"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#protect">protect</a><a class="title" href="#protect.Exceptions"><span class="text.normal">Exceptions</span></a><span class="abstract-type"></span></h1><dl class="text.mapping"><div id="protect.Exceptions.Critical" documented="true"><dt><a class="dkn" href="#protect.Exceptions.Critical"></a><span class="directory-key"><a class="factor-local" href="#Critical"><span class="class">Critical</span></a></span></dt><dd><div class="status"></div><p><span class="text.normal">Raised in cases where the infinite loop exits.</span></p></dd></div><div id="protect.Exceptions.Exit" documented="true"><dt><a class="dkn" href="#protect.Exceptions.Exit"></a><span class="directory-key"><a class="factor-local" href="#Exit"><span class="class">Exit</span></a></span></dt><dd><div class="status"></div><p><span class="text.normal">Raised by an application thread using </span><a class="factor-local" href="#interject"><span class="function">interject</span></a><span class="text.normal">.</span></p></dd></div></dl></section></section><section class="function" documented="true" local-identifier="control" id="control"><h1><span class="prefix"></span><a class="title" href="#control"><span class="text.normal">control</span></a><span class="abstract-type">function</span></h1><p><code class="signature">control(main, *args, **kw)</code></p><p><span class="text.normal">A program that calls this is making an explicit declaration that signals should be</span><span class="text.line-break"> </span><span class="text.normal">defaulted and the main thread should be protected from uninterruptable calls to allow</span><span class="text.line-break"> </span><span class="text.normal">prompt process exits while still performing critical state restoration.</span></p><p><span class="text.normal">The given </span><a class="factor-local" href="#control.Parameters.main"><span class="parameter">main</span></a><span class="text.normal"> is executed with the given positionals </span><a class="factor-local" href="#control.Parameters.args"><span class="parameter">args</span></a><span class="text.normal"> and keywords </span><a class="factor-local" href="#control.Parameters.kw"><span class="parameter">kw</span></a><span class="text.normal"> inside</span><span class="text.line-break"> </span><span class="text.normal">of a </span><a class="factor-local" href="#Fork.trap"><span class="classmethod">Fork.trap</span></a><span class="text.normal"> call. </span><a class="factor-local" href="#Fork"><span class="class">Fork</span></a><span class="text.normal"> handles formal exits and main-call substitution.</span></p></section><section class="function" documented="true" local-identifier="timeout" id="timeout"><h1><span class="prefix"></span><a class="title" href="#timeout"><span class="text.normal">timeout</span></a><span class="abstract-type">function</span></h1><p><code class="signature">timeout()</code></p><p><code class="system.signal">SIGALRM</code><span class="text.normal"> based context manager for maximum time interruptions.</span></p></section><section class="function" documented="true" local-identifier="concurrently" id="concurrently"><h1><span class="prefix"></span><a class="title" href="#concurrently"><span class="text.normal">concurrently</span></a><span class="abstract-type">function</span></h1><p><code class="signature">concurrently(controller)</code></p><p><span class="text.normal">Dispatch the given controller in a child process of a </span><a class="factor-local" href="#control"><span class="function">control</span></a><span class="text.normal"> controlled process.</span><span class="text.line-break"> </span><span class="text.normal">The returned object is a reference to the result that will block until the child</span><span class="text.line-break"> </span><span class="text.normal">process has written the serialized response to a pipe.</span></p><p><span class="text.normal">Used to create </span><span class="text.emphasis">very simple</span><span class="text.normal"> fork trees or workers that need to send completion reports back to</span><span class="text.line-break"> </span><span class="text.normal">the parent. This expects the calling process to have been launched with </span><a class="factor-local" href="#control"><span class="function">control</span></a><span class="text.normal">.</span></p><section class="unspecified" documented="true" local-identifier="Parameters" id="concurrently.Parameters"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#concurrently">concurrently</a><a class="title" href="#concurrently.Parameters"><span class="text.normal">Parameters</span></a><span class="abstract-type"></span></h1><dl class="text.mapping"><div id="concurrently.Parameters.controller" class="parameter" documented="true"><dt><a class="dkn" href="#concurrently.Parameters.controller"></a><span class="directory-key"><code class="parameter">controller</code></span></dt><dd><div class="status"></div><ul class="text.set"><li><p><code class="type.syntax">typing.Callable</code></p></li><li><p><a class="type" href="http://fault.io/dev/null"><span class="none">typing.Callable</span></a></p></li></ul><p><span class="text.normal">The object to call to use the child's controller.</span></p></dd></div><div id="concurrently.Parameters.exe" class="parameter" documented="false"><dt><a class="dkn" href="#concurrently.Parameters.exe"></a><span class="directory-key"><code class="parameter">exe</code></span></dt><dd><div class="status"></div><p><code class="control.absent">Undocumented</code><span class="text.normal">.</span></p></dd></div><div id="concurrently.Parameters.waitpid" class="parameter" documented="false"><dt><a class="dkn" href="#concurrently.Parameters.waitpid"></a><span class="directory-key"><code class="parameter">waitpid</code></span></dt><dd><div class="status"></div><p><code class="control.absent">Undocumented</code><span class="text.normal">.</span></p></dd></div></dl></section></section><section class="function" documented="true" local-identifier="fs_pwd" id="fs_pwd"><h1><span class="prefix"></span><a class="title" href="#fs_pwd"><span class="text.normal">fs_pwd</span></a><span class="abstract-type">function</span><code class="type"><a class="project-local" href="../files#Path"><span class="factor-element">files.Path</span></a></code></h1><p><code class="signature">fs_pwd()</code></p><p><span class="text.normal">Construct a </span><a class="project-local" href="../files#Path"><span class="factor-element">fault.system.files.Path</span></a><span class="text.normal"> instance referring to </span><code class="system.environ">PWD</code><span class="text.normal"> or</span><span class="text.line-break"> </span><span class="text.normal">the current working directory if the environment variable is not defined</span><span class="text.line-break"> </span><span class="text.normal">or it is an empty string.</span></p><p><span class="text.normal">The returned path is not maintained within any cache so repeat calls</span><span class="text.line-break"> </span><span class="text.normal">will create a new instance.</span></p></section><section class="function" documented="true" local-identifier="fs_chdir" id="fs_chdir"><h1><span class="prefix"></span><a class="title" href="#fs_chdir"><span class="text.normal">fs_chdir</span></a><span class="abstract-type">function</span><code class="type"><a class="project-local" href="../files#Path"><span class="factor-element">files.Path</span></a></code></h1><p><code class="signature">fs_chdir(directory)</code></p><p><span class="text.normal">Update </span><code class="system.environ">PWD</code><span class="text.normal"> and the current working directory.</span></p><p><span class="text.normal">The current working directory is set prior to the environment being updated.</span><span class="text.line-break"> </span><span class="text.normal">Exceptions should not require </span><code class="system.environ">PWD</code><span class="text.normal"> to be reset by the caller.</span></p><section class="unspecified" documented="true" local-identifier="Returns" id="fs_chdir.Returns"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#fs_chdir">fs_chdir</a><a class="title" href="#fs_chdir.Returns"><span class="text.normal">Returns</span></a><span class="abstract-type"></span></h1><p><span class="text.normal">The given </span><a class="factor-local" href="#fs_chdir.Parameters.directory"><span class="parameter">directory</span></a><span class="text.normal"> for chaining if it is a </span><a class="project-local" href="../files#Path"><span class="factor-element">fault.system.files.Path</span></a><span class="text.normal"> instance.</span><span class="text.line-break"> </span><span class="text.normal">Otherwise, the result of </span><a class="factor-local" href="#fs_pwd"><span class="function">fs_pwd</span></a><span class="text.normal"> is returned.</span></p></section></section><section class="function" documented="false" local-identifier="_scheduler_loop" id="_scheduler_loop"><h1><span class="prefix"></span><a class="title" href="#_scheduler_loop"><span class="text.normal">_scheduler_loop</span></a><span class="abstract-type">function</span></h1><p><code class="signature">_scheduler_loop(ks, proxy, limit, final)</code></p></section><section class="function" documented="true" local-identifier="Scheduling" id="Scheduling"><h1><span class="prefix"></span><a class="title" href="#Scheduling"><span class="text.normal">Scheduling</span></a><span class="abstract-type">function</span><code class="type"><a class="project-local" href="../kernel#Scheduler"><span class="factor-element">kernel.Scheduler</span></a></code></h1><p><code class="signature">Scheduling()</code></p><p><span class="text.normal">Initialize or return </span><a class="project-local" href="../process#scheduler"><span class="unknown">process.scheduler</span></a><span class="text.normal">.</span></p><p><span class="text.normal">Accessing </span><a class="project-local" href="../process#scheduler"><span class="unknown">process.scheduler</span></a><span class="text.normal"> will perform this automatically.</span></p></section><section class="function" documented="false" local-identifier="__getattr__" id="__getattr__"><h1><span class="prefix"></span><a class="title" href="#__getattr__"><span class="text.normal">__getattr__</span></a><span class="abstract-type">function</span></h1><p><code class="signature">__getattr__(name)</code></p></section><h1 class="footing"></h1></main></body></html>