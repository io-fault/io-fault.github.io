<html root="2"><head><title>fault.system.bootstrap</title><meta charset="utf-8"/><link as="style" rel="preload" href="../../.legacy-web/core.css"></link><link as="style" rel="preload" href="../../.legacy-web/factor.css"></link><link rel="stylesheet" href="../../.legacy-web/core.css"></link><link rel="stylesheet" href="../../.legacy-web/factor.css"></link></head><body><main><h1><span class="prefix"></span><div class="page-subject"><img class="icon" src="../../.factor-type-icon/if.fault.io/python-module.svg"></img><span class="subject-identifier">bootstrap</span><a href="http://if.fault.io/factors/python.module"><code class="type">python.module</code></a></div><div class="page-context"><a href="../"><img class="icon" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTYiIGhlaWdodD0iMjU2Ij48dGV4dCB4PSI0IiB5PSIwLjg4ZW0iIGZvbnQtc2l6ZT0iMjQ4Ij7impnvuI88L3RleHQ+PC9zdmc+"></img></a><span class="context-identifier">fault.system</span></div></h1><section class="chapter"><p><span class="text.normal">Bootstrapping for applications that depend on the </span><a class="project-local" href="../fault.system/factors"><span class="project-factor">fault.system.factors</span></a><span class="text.normal"> loader.</span></p></section><section class="unspecified" documented="true" local-identifier="Rationale" id="Rationale"><h1><span class="prefix"></span><a class="title" href="#Rationale"><span class="text.normal">Rationale</span></a><span class="abstract-type"></span></h1><p><span class="text.normal">While </span><code class="corpus">fault.io/python</code><span class="text.normal"> has alignment with the standard filesystem module</span><span class="text.line-break"> </span><span class="text.normal">protocol, </span><code class="">sys.path</code><span class="text.normal"> compatible directory structure, it is preferred to load from</span><span class="text.line-break"> </span><span class="text.normal">the compiled bytecode when available so that any construction context dependent</span><span class="text.line-break"> </span><span class="text.normal">features are available to applications and so that the fault python context project is</span><span class="text.line-break"> </span><span class="text.normal">available under </span><a class="project-local" href="../system.factors.context"><span class="unknown">system.factors.context</span></a><span class="text.normal">.</span></p></section><section class="import" documented="false" local-identifier="types" id="types"><h1><span class="prefix"></span><a class="title" href="#types"><span class="text.normal">types</span></a><span class="abstract-type">import</span></h1></section><section class="import" documented="false" local-identifier="sys" id="sys"><h1><span class="prefix"></span><a class="title" href="#sys"><span class="text.normal">sys</span></a><span class="abstract-type">import</span></h1></section><section class="import" documented="false" local-identifier="join" id="join"><h1><span class="prefix"></span><a class="title" href="#join"><span class="text.normal">join</span></a><span class="abstract-type">import</span></h1></section><section class="import" documented="false" local-identifier="Load" id="Load"><h1><span class="prefix"></span><a class="title" href="#Load"><span class="text.normal">Load</span></a><span class="abstract-type">import</span></h1></section><section class="import" documented="false" local-identifier="Execute" id="Execute"><h1><span class="prefix"></span><a class="title" href="#Execute"><span class="text.normal">Execute</span></a><span class="abstract-type">import</span></h1></section><section class="import" documented="false" local-identifier="Compile" id="Compile"><h1><span class="prefix"></span><a class="title" href="#Compile"><span class="text.normal">Compile</span></a><span class="abstract-type">import</span></h1></section><section class="data" documented="false" local-identifier="pkglist" id="pkglist"><h1><span class="prefix"></span><a class="title" href="#pkglist"><span class="text.normal">pkglist</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">pkglist = ['context', 'system', 'route', 'project']
</code></pre></section><section class="data" documented="false" local-identifier="modlist" id="modlist"><h1><span class="prefix"></span><a class="title" href="#modlist"><span class="text.normal">modlist</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">modlist = [
	'context.tools',
	'context.types',
	'context.string',

	'route.rewrite',
	'route.core',
	'route.types',
	'system.files',

	'project.types',
	'project.system',
	'project.polynomial',

	'system.factors', # Must be final.
]
</code></pre></section><section class="function" documented="false" local-identifier="package_import" id="package_import"><h1><span class="prefix"></span><a class="title" href="#package_import"><span class="text.normal">package_import</span></a><span class="abstract-type">function</span></h1><p><code class="signature">package_import(bytecode, path, root, pkg)</code></p></section><section class="function" documented="false" local-identifier="module_import" id="module_import"><h1><span class="prefix"></span><a class="title" href="#module_import"><span class="text.normal">module_import</span></a><span class="abstract-type">function</span></h1><p><code class="signature">module_import(bytecode, path, root, mod)</code></p></section><section class="function" documented="true" local-identifier="load_code" id="load_code"><h1><span class="prefix"></span><a class="title" href="#load_code"><span class="text.normal">load_code</span></a><span class="abstract-type">function</span></h1><p><code class="signature">load_code(name, bc, src)</code></p><p><span class="text.normal">Given a marshalled bytecode path and source file, load or compile whichever</span><span class="text.line-break"> </span><span class="text.normal">resource is available prioritizing the compiled form.</span></p><p><a class="factor-local" href="#load_code.Parameters.name"><span class="parameter">name</span></a><span class="text.normal"> is ignored but required in order to allow overrides to use it</span><span class="text.line-break"> </span><span class="text.normal">as a key instead of the file paths.</span></p></section><section class="function" documented="true" local-identifier="install_packages" id="install_packages"><h1><span class="prefix"></span><a class="title" href="#install_packages"><span class="text.normal">install_packages</span></a><span class="abstract-type">function</span></h1><p><code class="signature">install_packages(rename, modules, bytecode, path, root, package_list)</code></p><p><span class="text.normal">Allocate new package module instances and assign them into </span><a class="factor-local" href="#install_packages.Parameters.modules"><span class="parameter">modules</span></a><span class="text.normal">.</span></p></section><section class="function" documented="true" local-identifier="install_modules" id="install_modules"><h1><span class="prefix"></span><a class="title" href="#install_modules"><span class="text.normal">install_modules</span></a><span class="abstract-type">function</span></h1><p><code class="signature">install_modules(rename, modules, bytecode, path, root, module_list)</code></p><p><span class="text.normal">Allocate new module instances and assign them into </span><a class="factor-local" href="#install_modules.Parameters.modules"><span class="parameter">modules</span></a><span class="text.normal">.</span></p></section><section class="data" documented="false" local-identifier="install_operations" id="install_operations"><h1><span class="prefix"></span><a class="title" href="#install_operations"><span class="text.normal">install_operations</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">install_operations = [
	(install_packages, pkglist),
	(install_modules, modlist),
]
</code></pre></section><section class="function" documented="true" local-identifier="install" id="install"><h1><span class="prefix"></span><a class="title" href="#install"><span class="text.normal">install</span></a><span class="abstract-type">function</span></h1><p><code class="signature">install(modules, bytecode, path, root)</code></p><p><span class="text.normal">Install the bootstrap factors into </span><a class="factor-local" href="#install.Parameters.modules"><span class="parameter">modules</span></a><span class="text.normal">. Normally, </span><a class="none" href="http://fault.io/dev/null"><span class="invalid">sys.modules</span></a><span class="text.normal">.</span></p></section><section class="function" documented="true" local-identifier="finish" id="finish"><h1><span class="prefix"></span><a class="title" href="#finish"><span class="text.normal">finish</span></a><span class="abstract-type">function</span></h1><p><code class="signature">finish(factors, finder, modules)</code></p><p><span class="text.normal">Given an activated </span><a class="project-local" href="../fault.system/factors"><span class="project-factor">fault.system.factors</span></a><span class="text.normal"> module, assign specs and loaders to the previously</span><span class="text.line-break"> </span><span class="text.normal">bootstrapped modules and to the factors module itself.</span></p></section><section class="function" documented="true" local-identifier="integrate" id="integrate"><h1><span class="prefix"></span><a class="title" href="#integrate"><span class="text.normal">integrate</span></a><span class="abstract-type">function</span></h1><p><code class="signature">integrate(faultpath, faultname, faultform, images, system, python, arch, form, *products)</code></p><p><span class="text.normal">Integrate the factor environment into Python's import system.</span></p></section><h1 class="footing"></h1></main></body></html>