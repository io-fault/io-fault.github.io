<html root="2"><head><title>fault.route.query</title><meta charset="utf-8"/><link as="style" rel="preload" href="../../.legacy-web/core.css"></link><link as="style" rel="preload" href="../../.legacy-web/factor.css"></link><link rel="stylesheet" href="../../.legacy-web/core.css"></link><link rel="stylesheet" href="../../.legacy-web/factor.css"></link></head><body><main><h1><span class="prefix"></span><div class="page-subject"><img class="icon" src="../../.factor-type-icon/if.fault.io/python-module.svg"></img><span class="subject-identifier">query</span><span class="element-status"><span class="nothing-missed">0</span></span><a href="http://if.fault.io/factors/python.module"><code class="type">python.module</code></a></div><div class="page-context"><a href="../"><img class="icon" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTYiIGhlaWdodD0iMjU2Ij48dGV4dCB4PSI0IiB5PSIwLjg4ZW0iIGZvbnQtc2l6ZT0iMjQ4Ij7wn5qPPC90ZXh0Pjwvc3ZnPg=="></img></a><span class="context-identifier">fault.route</span></div></h1><section class="chapter"><p><span class="text.normal">Tools for navigating element trees.</span></p><p><span class="text.normal">Provides the </span><a class="factor-local" href="#Cursor"><span class="class">Cursor</span></a><span class="text.normal"> class for navigating and retrieving nodes identified</span><span class="text.line-break"> </span><span class="text.normal">using a limited path language.</span></p></section><section class="import" documented="false" local-identifier="Sequence" id="Sequence"><h1><span class="prefix"></span><a class="title" href="#Sequence"><span class="text.normal">Sequence</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">import</span></div></h1></section><section class="import" documented="false" local-identifier="Mapping" id="Mapping"><h1><span class="prefix"></span><a class="title" href="#Mapping"><span class="text.normal">Mapping</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">import</span></div></h1></section><section class="import" documented="false" local-identifier="itertools" id="itertools"><h1><span class="prefix"></span><a class="title" href="#itertools"><span class="text.normal">itertools</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">import</span></div></h1></section><section class="import" documented="false" local-identifier="functools" id="functools"><h1><span class="prefix"></span><a class="title" href="#functools"><span class="text.normal">functools</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">import</span></div></h1></section><section class="import" documented="false" local-identifier="comethod" id="comethod"><h1><span class="prefix"></span><a class="title" href="#comethod"><span class="text.normal">comethod</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">import</span></div></h1></section><section class="import" documented="false" local-identifier="keywords" id="keywords"><h1><span class="prefix"></span><a class="title" href="#keywords"><span class="text.normal">keywords</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">import</span></div></h1></section><section class="class" documented="true" local-identifier="InvalidPath" id="InvalidPath"><h1><span class="prefix"></span><a class="title" href="#InvalidPath"><span class="text.normal">InvalidPath</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">class</span></div></h1><div class="inheritance"><code class="type"><a class="invalid" href="#Exception"><span class="unknown">Exception</span></a></code></div><p><span class="text.normal">Path string given to </span><a class="factor-local" href="#Context.prepare"><span class="method">Context.prepare</span></a><span class="text.normal"> was not valid.</span></p></section><section class="function" documented="true" local-identifier="iselement" id="iselement"><h1><span class="prefix"></span><a class="title" href="#iselement"><span class="text.normal">iselement</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">function</span></div></h1><p><code class="signature">iselement(subject)</code></p><p><span class="text.normal">Determines whether the given object has the properties of an element.</span></p></section><section class="class" documented="true" local-identifier="Context" id="Context"><h1><span class="prefix"></span><a class="title" href="#Context"><span class="text.normal">Context</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">class</span></div></h1><div class="inheritance"><code class="type"><a class="context-local" href="../../context/comethod#object"><span class="factor-element">comethod.object</span></a></code></div><p><span class="text.normal">Query expression context for parsing and interpreting paths.</span></p><section class="method" documented="true" local-identifier="prepare" id="Context.prepare"><h1><span class="prefix"></span><a class="section" href="#Context">Context</a><a class="title" href="#Context.prepare"><span class="text.normal">prepare</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">method</span></div></h1><p><code class="signature">prepare(self, path)</code></p><p><span class="text.normal">Parse the path string into a selection plan.</span></p></section><section class="data" documented="false" local-identifier="_paths_profile" id="Context._paths_profile"><h1><span class="prefix"></span><a class="section" href="#Context">Context</a><a class="title" href="#Context._paths_profile"><span class="text.normal">_paths_profile</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">data</span></div></h1><pre class="text.syntax"><code class="source">_paths_profile = keywords.Profile.from_keywords_v1(
	routers = ["/"],
	operations = [
		"*", # Match any immediate descendant.
		"#", # Slice nodes. 1-based, inclusive.
		"?", # Apply context designated filter.
			"\\\\", # Escape backslash in predicate string.
		"\\]", # Escape predicate close.
		"|",
	],
	terminators = [],
	enclosures = [],
	literals = [
		["[", "]"], # Predicates are text strings.
	],
)
</code></pre></section><section class="data" documented="false" local-identifier="_parser" id="Context._parser"><h1><span class="prefix"></span><a class="section" href="#Context">Context</a><a class="title" href="#Context._parser"><span class="text.normal">_parser</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">data</span></div></h1><pre class="text.syntax"><code class="source">_parser = keywords.Parser.from_profile(_paths_profile).process_document
</code></pre></section><section class="method" documented="false" local-identifier="__init__" id="Context.__init__"><h1><span class="prefix"></span><a class="section" href="#Context">Context</a><a class="title" href="#Context.__init__"><span class="text.normal">__init__</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">method</span></div></h1><p><code class="signature">__init__(self, selectors, aliases)</code></p></section><section class="staticmethod" documented="false" local-identifier="_identify_node" id="Context._identify_node"><h1><span class="prefix"></span><a class="section" href="#Context">Context</a><a class="title" href="#Context._identify_node"><span class="text.normal">_identify_node</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">staticmethod</span></div></h1><p><code class="signature">_identify_node(predicate, node)</code></p></section><section class="staticmethod" documented="false" local-identifier="_parse_slice" id="Context._parse_slice"><h1><span class="prefix"></span><a class="section" href="#Context">Context</a><a class="title" href="#Context._parse_slice"><span class="text.normal">_parse_slice</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">staticmethod</span></div></h1><p><code class="signature">_parse_slice(string)</code></p></section><section class="staticmethod" documented="false" local-identifier="_read_string" id="Context._read_string"><h1><span class="prefix"></span><a class="section" href="#Context">Context</a><a class="title" href="#Context._read_string"><span class="text.normal">_read_string</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">staticmethod</span></div></h1><p><code class="signature">_read_string(itokens)</code></p></section><section class="method" documented="true" local-identifier="structure" id="Context.structure"><h1><span class="prefix"></span><a class="section" href="#Context">Context</a><a class="title" href="#Context.structure"><span class="text.normal">structure</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">method</span></div></h1><p><code class="signature">structure(self, tokens)</code></p><p><span class="text.normal">Process tokens into selector sequences.</span><span class="text.line-break"> </span><span class="text.normal">Usually used indirectly by </span><a class="factor-local" href="#Context.prepare"><span class="method">prepare</span></a><span class="text.normal">.</span></p></section><section class="method" documented="false" local-identifier="_select" id="Context._select"><h1><span class="prefix"></span><a class="section" href="#Context">Context</a><a class="title" href="#Context._select"><span class="text.normal">_select</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">method</span></div></h1><p><code class="signature">_select(self, nodes, ident)</code></p></section><section class="method" documented="false" local-identifier="_index" id="Context._index"><h1><span class="prefix"></span><a class="section" href="#Context">Context</a><a class="title" href="#Context._index"><span class="text.normal">_index</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">method</span></div></h1><p><code class="signature">_index(self, nodes, eslice)</code></p></section><section class="method" documented="false" local-identifier="_predicate" id="Context._predicate"><h1><span class="prefix"></span><a class="section" href="#Context">Context</a><a class="title" href="#Context._predicate"><span class="text.normal">_predicate</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">method</span></div></h1><p><code class="signature">_predicate(self, nodes, title)</code></p></section><section class="method" documented="false" local-identifier="_all" id="Context._all"><h1><span class="prefix"></span><a class="section" href="#Context">Context</a><a class="title" href="#Context._all"><span class="text.normal">_all</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">method</span></div></h1><p><code class="signature">_all(self, nodes, type)</code></p></section><section class="method" documented="false" local-identifier="_filter" id="Context._filter"><h1><span class="prefix"></span><a class="section" href="#Context">Context</a><a class="title" href="#Context._filter"><span class="text.normal">_filter</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">method</span></div></h1><p><code class="signature">_filter(self, nodes, *spec)</code></p></section><section class="method" documented="false" local-identifier="_union" id="Context._union"><h1><span class="prefix"></span><a class="section" href="#Context">Context</a><a class="title" href="#Context._union"><span class="text.normal">_union</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">method</span></div></h1><p><code class="signature">_union(self, origin_nodes, exprnodes)</code></p></section><section class="method" documented="false" local-identifier="switch" id="Context.switch"><h1><span class="prefix"></span><a class="section" href="#Context">Context</a><a class="title" href="#Context.switch"><span class="text.normal">switch</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">method</span></div></h1><p><code class="signature">switch(self, operation, nodes)</code></p></section><section class="method" documented="false" local-identifier="interpret" id="Context.interpret"><h1><span class="prefix"></span><a class="section" href="#Context">Context</a><a class="title" href="#Context.interpret"><span class="text.normal">interpret</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">method</span></div></h1><p><code class="signature">interpret(self, plan, root, context)</code></p></section></section><section class="class" documented="true" local-identifier="Cursor" id="Cursor"><h1><span class="prefix"></span><a class="title" href="#Cursor"><span class="text.normal">Cursor</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">class</span></div></h1><div class="inheritance"><code class="type"><a class="invalid" href="#object"><span class="unknown">object</span></a></code></div><p><span class="text.normal">Navigation state class providing a query interface to an element tree.</span></p><section class="method" documented="false" local-identifier="__init__" id="Cursor.__init__"><h1><span class="prefix"></span><a class="section" href="#Cursor">Cursor</a><a class="title" href="#Cursor.__init__"><span class="text.normal">__init__</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">method</span></div></h1><p><code class="signature">__init__(self, context, root)</code></p></section><section class="method" documented="true" local-identifier="seek" id="Cursor.seek"><h1><span class="prefix"></span><a class="section" href="#Cursor">Cursor</a><a class="title" href="#Cursor.seek"><span class="text.normal">seek</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">method</span></div></h1><p><code class="signature">seek(self, path)</code></p><p><span class="text.normal">Adjust the cursor position to the nodes identified by </span><a class="factor-local" href="#Cursor.seek.Parameters.path"><span class="parameter">path</span></a><span class="text.normal">.</span></p></section><section class="method" documented="true" local-identifier="reset" id="Cursor.reset"><h1><span class="prefix"></span><a class="section" href="#Cursor">Cursor</a><a class="title" href="#Cursor.reset"><span class="text.normal">reset</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">method</span></div></h1><p><code class="signature">reset(self)</code></p><p><span class="text.normal">Select the root as the current working node.</span></p></section><section class="method" documented="true" local-identifier="fork" id="Cursor.fork"><h1><span class="prefix"></span><a class="section" href="#Cursor">Cursor</a><a class="title" href="#Cursor.fork"><span class="text.normal">fork</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">method</span></div></h1><p><code class="signature">fork(self, path)</code></p><p><span class="text.normal">Create a new instance using the given </span><a class="factor-local" href="#Cursor.fork.Parameters.path"><span class="parameter">path</span></a><span class="text.normal"> to the select the nodes</span><span class="text.line-break"> </span><span class="text.normal">used as the root content of the new </span><a class="factor-local" href="#Cursor"><span class="class">Cursor</span></a><span class="text.normal">.</span></p></section><section class="method" documented="true" local-identifier="select" id="Cursor.select"><h1><span class="prefix"></span><a class="section" href="#Cursor">Cursor</a><a class="title" href="#Cursor.select"><span class="text.normal">select</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">method</span></div></h1><p><code class="signature">select(self, path)</code></p><p><span class="text.normal">Retrieve nodes relative to the context node using </span><a class="factor-local" href="#Cursor.select.Parameters.path"><span class="parameter">path</span></a><span class="text.normal">.</span></p></section></section><h1 class="footing"></h1></main></body></html>