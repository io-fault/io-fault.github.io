<html root="2"><head><title>fault.format.frames</title><meta charset="utf-8"/><link as="style" rel="preload" href="../../.legacy-web/core.css"></link><link as="style" rel="preload" href="../../.legacy-web/factor.css"></link><link rel="stylesheet" href="../../.legacy-web/core.css"></link><link rel="stylesheet" href="../../.legacy-web/factor.css"></link></head><body><main><h1><span class="prefix"></span><div class="page-subject"><img class="icon" src="../../.factor-type-icon/if.fault.io/python-module.svg"></img><span class="subject-identifier">frames</span><a href="http://if.fault.io/factors/python.module"><code class="type">python.module</code></a></div><div class="page-context"><a href="../"><img class="icon" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTYiIGhlaWdodD0iMjU2Ij48dGV4dCB4PSI0IiB5PSIwLjg4ZW0iIGZvbnQtc2l6ZT0iMjQ4Ij7wn5KOPC90ZXh0Pjwvc3ZnPg=="></img></a><span class="context-identifier">fault.format</span></div></h1><section class="chapter"><p><span class="text.normal">Inline box rendering for replayable views of text content.</span></p><p><a class="project-local" href="../frames"><span class="unknown">frames</span></a><span class="text.normal"> provides functions for formatting framed text from </span><a class="factor-local" href="#Content"><span class="data">Content</span></a><span class="text.normal">.</span><span class="text.line-break"> </span><a class="factor-local" href="#Content"><span class="data">Content</span></a><span class="text.normal"> represents a sequence rows consisting of a single column;</span><span class="text.line-break"> </span><span class="text.normal">the placement of </span><a class="invalid" href="#str"><span class="unknown">str</span></a><span class="text.normal"> instances within the tuples contained by the</span><span class="text.line-break"> </span><span class="text.normal">sequence controls the alignment of the displayed text. A leading</span><span class="text.line-break"> </span><a class="invalid" href="#None"><span class="unknown">None</span></a><span class="text.normal"> within the instance causes a horizontal separator to be drawn</span><span class="text.line-break"> </span><span class="text.normal">according to the selected box theme.</span></p></section><section class="unspecified" documented="true" local-identifier="Engineering" id="Engineering"><h1><span class="prefix"></span><a class="title" href="#Engineering"><span class="text.normal">Engineering</span></a><span class="abstract-type"></span></h1><p><span class="text.normal">Somewhat of a warning.</span><span class="text.line-break"> </span><span class="text.normal">Raw (integer) indexes are commonly used within this module; the "themes" are regular</span><span class="text.line-break"> </span><span class="text.normal">strings, </span><a class="factor-local" href="#f_solid"><span class="data">f_solid</span></a><span class="text.normal">, and the indexes refer to the boundary character at that index within the theme.</span><span class="text.line-break"> </span><span class="text.normal">The included themes have identical character counts, but customized themes may have extensions</span><span class="text.line-break"> </span><span class="text.normal">in order to support transitions by </span><a class="factor-local" href="#stitch"><span class="function">stitch</span></a><span class="text.normal">.</span></p></section><section class="import" documented="false" local-identifier="typing" id="typing"><h1><span class="prefix"></span><a class="title" href="#typing"><span class="text.normal">typing</span></a><span class="abstract-type">import</span></h1></section><section class="import" documented="false" local-identifier="itertools" id="itertools"><h1><span class="prefix"></span><a class="title" href="#itertools"><span class="text.normal">itertools</span></a><span class="abstract-type">import</span></h1></section><section class="import" documented="false" local-identifier="functools" id="functools"><h1><span class="prefix"></span><a class="title" href="#functools"><span class="text.normal">functools</span></a><span class="abstract-type">import</span></h1></section><section class="data" documented="false" local-identifier="halves" id="halves"><h1><span class="prefix"></span><a class="title" href="#halves"><span class="text.normal">halves</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">halves = "\u258C\u2590"
</code></pre></section><section class="function" documented="true" local-identifier="charif" id="charif"><h1><span class="prefix"></span><a class="title" href="#charif"><span class="text.normal">charif</span></a><span class="abstract-type">function</span></h1><p><code class="signature">charif(characters)</code></p><p><span class="text.normal">Whether the character is a Unicode Box Drawing character.</span></p></section><section class="data" documented="false" local-identifier="Content" id="Content"><h1><span class="prefix"></span><a class="title" href="#Content"><span class="text.normal">Content</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">Content = typing.Sequence[
	typing.Union[
		# Left and Right text; use empty strings to disable a side.
		typing.Tuple[str, str],
		# Aligned center; only one field is allowed for centering.
		typing.Tuple[str, None],
		# Division (horizontal bar)
		typing.Tuple[None],
		# Division, custom horizontal.
		typing.Tuple[None, str],
	]
]
</code></pre></section><section class="function" documented="false" local-identifier="dlength" id="dlength"><h1><span class="prefix"></span><a class="title" href="#dlength"><span class="text.normal">dlength</span></a><span class="abstract-type">function</span></h1><p><code class="signature">dlength(field)</code></p></section><section class="function" documented="false" local-identifier="dformat" id="dformat"><h1><span class="prefix"></span><a class="title" href="#dformat"><span class="text.normal">dformat</span></a><span class="abstract-type">function</span></h1><p><code class="signature">dformat(context, field)</code></p></section><section class="function" documented="true" local-identifier="strings" id="strings"><h1><span class="prefix"></span><a class="title" href="#strings"><span class="text.normal">strings</span></a><span class="abstract-type">function</span></h1><p><code class="signature">strings(sequence)</code></p><p><span class="text.normal">Emit the formatted lines of a prepared sequence as </span><a class="invalid" href="#str"><span class="unknown">str</span></a><span class="text.normal"> instances.</span><span class="text.line-break"> </span><span class="text.normal">Newline characters are </span><span class="text.emphasis">not</span><span class="text.normal"> added to line.</span></p></section><section class="data" documented="false" local-identifier="keys" id="keys"><h1><span class="prefix"></span><a class="title" href="#keys"><span class="text.normal">keys</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">keys = [
	'top-left-corner',
	'top-horizontal-left',
	'top-intersection',
	'top-horizontal-right',
	'top-right-corner',
	'heading-vertical-open',
	'space',
	'heading-vertical-center',
	'space',
	'heading-vertical-close',
	'left-intersection',
	'body-horizontal-left',
	'full-intersection',
	'body-horizontal-right',
	'right-intersection',
	'body-vertical-open',
	'space',
	'body-vertical-center',
	'space',
	'body-vertical-close',
	'bottom-left-corner',
	'bottom-horizontal-left',
	'bottom-intersection',
	'bottom-horizontal-right',
	'bottom-right-corner',
	# Any extensions will be local to the frame theme.
]
</code></pre></section><section class="data" documented="false" local-identifier="corners" id="corners"><h1><span class="prefix"></span><a class="title" href="#corners"><span class="text.normal">corners</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">corners = [
	'top-left-corner',
	'top-right-corner',
	'bottom-left-corner',
	'bottom-right-corner',
]
</code></pre></section><section class="data" documented="false" local-identifier="f_ascii" id="f_ascii"><h1><span class="prefix"></span><a class="title" href="#f_ascii"><span class="text.normal">f_ascii</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">f_ascii = (
	'+' '-' '+' '-' '+'
	'|' ' ' '|' ' ' '|'
	'+' '-' '+' '-' '+'
	'|' ' ' '|' ' ' '|'
	'+' '-' '+' '-' '+'
)
</code></pre></section><section class="data" documented="false" local-identifier="f_bold" id="f_bold"><h1><span class="prefix"></span><a class="title" href="#f_bold"><span class="text.normal">f_bold</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">f_bold = (
	'┏' '━' '┳' '━' '┓'
	'┃' ' ' '┃' ' ' '┃'
	'┣' '━' '╋' '━' '┫'
	'┃' ' ' '┃' ' ' '┃'
	'┗' '━' '┻' '━' '┛'
)
</code></pre></section><section class="data" documented="false" local-identifier="f_solid" id="f_solid"><h1><span class="prefix"></span><a class="title" href="#f_solid"><span class="text.normal">f_solid</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">f_solid = (
	'┌' '─' '┬' '─' '┐'
	'│' ' ' '│' ' ' '│'
	'├' '─' '┼' '─' '┤'
	'│' ' ' '│' ' ' '│'
	'└' '─' '┴' '─' '┘'
)
</code></pre></section><section class="data" documented="false" local-identifier="f_double" id="f_double"><h1><span class="prefix"></span><a class="title" href="#f_double"><span class="text.normal">f_double</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">f_double = (
	'╔' '═' '╦' '═' '╗'
	'║' ' ' '║' ' ' '║'
	'╠' '═' '╬' '═' '╣'
	'║' ' ' '║' ' ' '║'
	'╚' '═' '╩' '═' '╝'
)
</code></pre></section><section class="data" documented="false" local-identifier="rounds" id="rounds"><h1><span class="prefix"></span><a class="title" href="#rounds"><span class="text.normal">rounds</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">rounds=('╭' '╮' '╰' '╯')
</code></pre></section><section class="function" documented="false" local-identifier="_corner_adjustments" id="_corner_adjustments"><h1><span class="prefix"></span><a class="title" href="#_corner_adjustments"><span class="text.normal">_corner_adjustments</span></a><span class="abstract-type">function</span></h1><p><code class="signature">_corner_adjustments(space, selections)</code></p></section><section class="function" documented="true" local-identifier="round" id="round"><h1><span class="prefix"></span><a class="title" href="#round"><span class="text.normal">round</span></a><span class="abstract-type">function</span></h1><p><code class="signature">round(theme, *corners)</code></p><p><span class="text.normal">Create a new theme based on </span><a class="factor-local" href="#round.Parameters.theme"><span class="parameter">theme</span></a><span class="text.normal"> applying rounded corners where specified in </span><a class="factor-local" href="#round.Parameters.corners"><span class="parameter">corners</span></a><span class="text.normal">.</span></p><pre class="text.syntax"><code class="syntax/python">rdiagonal = round(f_solid, 'top-left', 'bottom-right')
</code></pre></section><section class="function" documented="true" local-identifier="width" id="width"><h1><span class="prefix"></span><a class="title" href="#width"><span class="text.normal">width</span></a><span class="abstract-type">function</span></h1><p><code class="signature">width(sequence)</code></p><p><span class="text.normal">Calculate the sum of the lengths of each item in the sequence;</span><span class="text.line-break"> </span><span class="text.normal">excepting values starting with </span><a class="invalid" href="#None"><span class="unknown">None</span></a><span class="text.normal"> representing a division.</span></p></section><section class="function" documented="true" local-identifier="prepare" id="prepare"><h1><span class="prefix"></span><a class="title" href="#prepare"><span class="text.normal">prepare</span></a><span class="abstract-type">function</span></h1><p><code class="signature">prepare(theme, width, sequence)</code></p><p><span class="text.normal">Build sequences of strings providing the necessary formatting for the display</span><span class="text.line-break"> </span><span class="text.normal">of the framed data.</span></p><section class="unspecified" documented="true" local-identifier="Parameters" id="prepare.Parameters"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#prepare">prepare</a><a class="title" href="#prepare.Parameters"><span class="text.normal">Parameters</span></a><span class="abstract-type"></span></h1><dl class="text.mapping"><div id="prepare.Parameters.theme" class="parameter" documented="true"><dt><a class="dkn" href="#prepare.Parameters.theme"></a><span class="directory-key"><code class="parameter">theme</code></span></dt><dd><div class="status"></div><p><span class="text.normal">The frame characters to use by default. Usually one of</span><span class="text.line-break"> </span><a class="factor-local" href="#f_ascii"><span class="data">f_ascii</span></a><span class="text.normal">, </span><a class="factor-local" href="#f_solid"><span class="data">f_solid</span></a><span class="text.normal">, </span><a class="factor-local" href="#f_bold"><span class="data">f_bold</span></a><span class="text.normal">, </span><a class="factor-local" href="#f_double"><span class="data">f_double</span></a><span class="text.normal">.</span></p></dd></div><div id="prepare.Parameters.width" class="parameter" documented="true"><dt><a class="dkn" href="#prepare.Parameters.width"></a><span class="directory-key"><code class="parameter">width</code></span></dt><dd><div class="status"></div><p><span class="text.normal">The span of the data to align on. Usually, the maximum length of</span><span class="text.line-break"> </span><span class="text.normal">a row calculated by </span><code class="">max(width(sequence))</code><span class="text.normal">.</span></p></dd></div><div id="prepare.Parameters.sequence" class="parameter" documented="true"><dt><a class="dkn" href="#prepare.Parameters.sequence"></a><span class="directory-key"><code class="parameter">sequence</code></span></dt><dd><div class="status"></div><p><span class="text.normal">An iterable producing tuples of strings that will populate the</span><span class="text.line-break"> </span><span class="text.normal">displayed rows.</span></p></dd></div><div id="prepare.Parameters.minimum" class="parameter" documented="false"><dt><a class="dkn" href="#prepare.Parameters.minimum"></a><span class="directory-key"><code class="parameter">minimum</code></span></dt><dd><div class="status"></div><p><code class="control.absent">Undocumented</code><span class="text.normal">.</span></p></dd></div><div id="prepare.Parameters.margins" class="parameter" documented="false"><dt><a class="dkn" href="#prepare.Parameters.margins"></a><span class="directory-key"><code class="parameter">margins</code></span></dt><dd><div class="status"></div><p><code class="control.absent">Undocumented</code><span class="text.normal">.</span></p></dd></div><div id="prepare.Parameters.border" class="parameter" documented="false"><dt><a class="dkn" href="#prepare.Parameters.border"></a><span class="directory-key"><code class="parameter">border</code></span></dt><dd><div class="status"></div><p><code class="control.absent">Undocumented</code><span class="text.normal">.</span></p></dd></div><div id="prepare.Parameters.len" class="parameter" documented="false"><dt><a class="dkn" href="#prepare.Parameters.len"></a><span class="directory-key"><code class="parameter">len</code></span></dt><dd><div class="status"></div><p><code class="control.absent">Undocumented</code><span class="text.normal">.</span></p></dd></div></dl></section></section><section class="function" documented="true" local-identifier="align" id="align"><h1><span class="prefix"></span><a class="title" href="#align"><span class="text.normal">align</span></a><span class="abstract-type">function</span></h1><p><code class="signature">align(left, right, offsets)</code></p><p><span class="text.normal">Vertically pad the two prepared images with empty records</span><span class="text.line-break"> </span><span class="text.normal">according to the describes </span><a class="factor-local" href="#align.Parameters.offsets"><span class="parameter">offsets</span></a><span class="text.normal">.</span></p><section class="unspecified" documented="true" local-identifier="Parameters" id="align.Parameters"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#align">align</a><a class="title" href="#align.Parameters"><span class="text.normal">Parameters</span></a><span class="abstract-type"></span></h1><dl class="text.mapping"><div id="align.Parameters.left" class="parameter" documented="true"><dt><a class="dkn" href="#align.Parameters.left"></a><span class="directory-key"><code class="parameter">left</code></span></dt><dd><div class="status"></div><p><span class="text.normal">The frame that will be placed on the left side.</span></p></dd></div><div id="align.Parameters.right" class="parameter" documented="true"><dt><a class="dkn" href="#align.Parameters.right"></a><span class="directory-key"><code class="parameter">right</code></span></dt><dd><div class="status"></div><p><span class="text.normal">The frame that will be placed on the right side.</span></p></dd></div><div id="align.Parameters.offsets" class="parameter" documented="true"><dt><a class="dkn" href="#align.Parameters.offsets"></a><span class="directory-key"><code class="parameter">offsets</code></span></dt><dd><div class="status"></div><p><span class="text.normal">The pair of vertical offsets for the </span><a class="factor-local" href="#align.Parameters.left"><span class="parameter">left</span></a><span class="text.normal"> and </span><a class="factor-local" href="#align.Parameters.right"><span class="parameter">right</span></a><span class="text.normal"> designating</span><span class="text.line-break"> </span><span class="text.normal">where their top will be placed. Defaults to zeros.</span></p></dd></div><div id="align.Parameters.len" class="parameter" documented="false"><dt><a class="dkn" href="#align.Parameters.len"></a><span class="directory-key"><code class="parameter">len</code></span></dt><dd><div class="status"></div><p><code class="control.absent">Undocumented</code><span class="text.normal">.</span></p></dd></div><div id="align.Parameters.sum" class="parameter" documented="false"><dt><a class="dkn" href="#align.Parameters.sum"></a><span class="directory-key"><code class="parameter">sum</code></span></dt><dd><div class="status"></div><p><code class="control.absent">Undocumented</code><span class="text.normal">.</span></p></dd></div><div id="align.Parameters.map" class="parameter" documented="false"><dt><a class="dkn" href="#align.Parameters.map"></a><span class="directory-key"><code class="parameter">map</code></span></dt><dd><div class="status"></div><p><code class="control.absent">Undocumented</code><span class="text.normal">.</span></p></dd></div><div id="align.Parameters.range" class="parameter" documented="false"><dt><a class="dkn" href="#align.Parameters.range"></a><span class="directory-key"><code class="parameter">range</code></span></dt><dd><div class="status"></div><p><code class="control.absent">Undocumented</code><span class="text.normal">.</span></p></dd></div></dl></section></section><section class="data" documented="false" local-identifier="combinations" id="combinations"><h1><span class="prefix"></span><a class="title" href="#combinations"><span class="text.normal">combinations</span></a><span class="abstract-type">data</span></h1><pre class="text.syntax"><code class="source">combinations = {
	(5, 1): 12,
	(1, 5): 12,
	(4, 10): 12,
	(4, 20): 12,
	(14, 0): 12,
	(14, 10): 12,
	(14, 20): 12,
	(24, 10): 12,
	(24, 0): 12,

	(4, 5): 14,
	(14, 5): 14,
	(24, 5): 14,

	(5, 20): 10,
	(5, 10): 10,
	(5, 0): 10,
	(5, 15): 15,

	(4, 0): 2,
	(0, 4): 2,
	(5, 24): 19,
	(24, 20): 22,
}
</code></pre></section><section class="function" documented="true" local-identifier="combine" id="combine"><h1><span class="prefix"></span><a class="title" href="#combine"><span class="text.normal">combine</span></a><span class="abstract-type">function</span></h1><p><code class="signature">combine(theme, mapping, borders)</code></p><p><span class="text.normal">Calculate the combined border for the given characters according to the</span><span class="text.line-break"> </span><a class="factor-local" href="#combine.Parameters.theme"><span class="parameter">theme</span></a><span class="text.normal">, combination </span><a class="factor-local" href="#combine.Parameters.mapping"><span class="parameter">mapping</span></a><span class="text.normal"> using the adjacent </span><a class="factor-local" href="#combine.Parameters.borders"><span class="parameter">borders</span></a><span class="text.normal">.</span></p></section><section class="function" documented="true" local-identifier="stitch" id="stitch"><h1><span class="prefix"></span><a class="title" href="#stitch"><span class="text.normal">stitch</span></a><span class="abstract-type">function</span></h1><p><code class="signature">stitch(aligned)</code></p><p><span class="text.normal">Connects prepared frames along the vertical borders.</span></p><p><span class="text.normal">Join two prepared frames so that intersections are properly combined.</span><span class="text.line-break"> </span><span class="text.normal">Both the left and right sides are modified in place respecting the boundaries.</span></p><p><span class="text.normal">If the two prepared frames are not of equal length (rows), </span><a class="factor-local" href="#align"><span class="function">align</span></a><span class="text.normal"> must be called</span><span class="text.line-break"> </span><span class="text.normal">on the two frames before being given to </span><a class="factor-local" href="#stitch"><span class="function">stitch</span></a><span class="text.normal">.</span></p><section class="unspecified" documented="true" local-identifier="Parameters" id="stitch.Parameters"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#stitch">stitch</a><a class="title" href="#stitch.Parameters"><span class="text.normal">Parameters</span></a><span class="abstract-type"></span></h1><dl class="text.mapping"><div id="stitch.Parameters.aligned" class="parameter" documented="true"><dt><a class="dkn" href="#stitch.Parameters.aligned"></a><span class="directory-key"><code class="parameter">aligned</code></span></dt><dd><div class="status"></div><p><span class="text.normal">An iterator of aligned pairs providing the left and right side</span><span class="text.line-break"> </span><span class="text.normal">to connect together into a combined image.</span></p><p><span class="text.normal">Multiple pairs are accepted to stitch the vertical edges</span><span class="text.line-break"> </span><span class="text.normal">as well as the horizontal.</span></p></dd></div><div id="stitch.Parameters.combinations" class="parameter" documented="false"><dt><a class="dkn" href="#stitch.Parameters.combinations"></a><span class="directory-key"><code class="parameter">combinations</code></span></dt><dd><div class="status"></div><p><code class="control.absent">Undocumented</code><span class="text.normal">.</span></p></dd></div></dl></section></section><h1 class="footing"></h1></main></body></html>