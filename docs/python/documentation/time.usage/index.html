<html root="2"><head><title>fault.documentation.time.usage</title><meta charset="utf-8"/><link as="style" rel="preload" href="../../.legacy-web/core.css"></link><link as="style" rel="preload" href="../../.legacy-web/factor.css"></link><link rel="stylesheet" href="../../.legacy-web/core.css"></link><link rel="stylesheet" href="../../.legacy-web/factor.css"></link></head><body><main><h1><span class="prefix"></span><div class="page-subject"><img class="icon" src="../../.factor-type-icon/if.fault.io/meta-chapter.svg"></img><span class="subject-identifier">usage</span><span class="element-status"><span class="nothing-missed">0</span></span><a href="http://if.fault.io/factors/meta.chapter"><code class="type">meta.chapter</code></a></div><div class="page-context"><a href="../"><img class="icon" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTYiIGhlaWdodD0iMjU2Ij48dGV4dCB4PSI0IiB5PSIwLjg4ZW0iIGZvbnQtc2l6ZT0iMjQ4Ij7wn5OaPC90ZXh0Pjwvc3ZnPg=="></img></a><span class="context-identifier">fault.documentation</span></div></h1><section class="chapter"></section><section class="unspecified" documented="true" local-identifier="Overview" id="Overview"><h1><span class="prefix"></span><a class="title" href="#Overview"><span class="text.normal">Overview</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><p><span class="text.normal">Units of unbound quantities of time are called "eternals". They are a special Measure and</span><span class="text.line-break"> </span><span class="text.normal">Point type that have only three values: zero, infinity, and negative infinity.</span></p><p><span class="text.normal">Time classes are created by Time Contexts. The default context is</span><span class="text.line-break"> </span><span class="text.normal">initialized and provided by the </span><a class="project-local" href="../types"><span class="unknown">types</span></a><span class="text.normal"> module. The following</span><span class="text.line-break"> </span><span class="text.normal">lists are the time classes created by that context.</span></p><p><span class="text.normal">Point In Time types:</span></p><ul class="text.set"><li><p><a class="project-local" href="../types.Timestamp"><span class="unknown">types.Timestamp</span></a></p></li><li><p><a class="project-local" href="../types.Date"><span class="unknown">types.Date</span></a></p></li><li><p><a class="project-local" href="../types.Week"><span class="unknown">types.Week</span></a></p></li><li><p><a class="project-local" href="../types.GregorianMonth"><span class="unknown">types.GregorianMonth</span></a></p></li></ul><p><span class="text.normal">Measure types:</span></p><ul class="text.set"><li><p><a class="project-local" href="../types.Measure"><span class="unknown">types.Measure</span></a></p></li><li><p><a class="project-local" href="../types.Days"><span class="unknown">types.Days</span></a></p></li><li><p><a class="project-local" href="../types.Weeks"><span class="unknown">types.Weeks</span></a></p></li><li><p><a class="project-local" href="../types.Months"><span class="unknown">types.Months</span></a></p></li></ul><p><span class="text.normal">The interfaces are described by the abstract base classes in</span><span class="text.line-break"> </span><a class="project-local" href="../abstract"><span class="unknown">abstract</span></a><span class="text.normal">. Primarily:</span></p><dl class="text.mapping"><div id="Overview.abstract.Time" documented="true"><dt><a class="dkn" href="#Overview.abstract.Time"></a><span class="directory-key"><a class="project-local" href="../abstract.Time"><span class="unknown">abstract.Time</span></a></span></dt><dd><div class="status"></div><p><span class="text.normal">A measure or point. The common abstract base class.</span></p></dd></div><div id="Overview.abstract.Measure" documented="true"><dt><a class="dkn" href="#Overview.abstract.Measure"></a><span class="directory-key"><a class="project-local" href="../abstract.Measure"><span class="unknown">abstract.Measure</span></a></span></dt><dd><div class="status"></div><p><span class="text.normal">A measurement of time.</span></p></dd></div><div id="Overview.abstract.Point" documented="true"><dt><a class="dkn" href="#Overview.abstract.Point"></a><span class="directory-key"><a class="project-local" href="../abstract.Point"><span class="unknown">abstract.Point</span></a></span></dt><dd><div class="status"></div><p><span class="text.normal">A point in time. Points are used to specify calendar dates or</span><span class="text.line-break"> </span><span class="text.normal">calendar dates with time of day.</span></p></dd></div></dl></section><section class="unspecified" documented="true" local-identifier="Eccentricities" id="Eccentricities"><h1><span class="prefix"></span><a class="title" href="#Eccentricities"><span class="text.normal">Eccentricities</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><section class="unspecified" documented="true" local-identifier="Points and Measures are Python Integers" id="Eccentricities.Points-and-Measures-are-Python-Integers"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#Eccentricities">Eccentricities</a><a class="title" href="#Eccentricities.Points-and-Measures-are-Python-Integers"><span class="text.normal">Points and Measures are Python Integers</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><p><span class="text.normal">This has the effect that integers with the same value will be seen as the same</span><span class="text.line-break"> </span><span class="text.normal">key in dictionaries:</span></p><pre class="text.syntax"><code class="python">&#62;&#62;&#62; from fault.time import types
&#62;&#62;&#62; from fault.time import constants
&#62;&#62;&#62; d = {}
&#62;&#62;&#62; d[types.Date(0)] = 'Hello, World!'
&#62;&#62;&#62; print d[0]
Hello, World!
</code></pre><p><span class="text.normal">If type based scoping is needed, the key can be qualified with the type:</span></p><pre class="text.syntax"><code class="python">d = {}
d[(types.Date, types.Date(0))] = 'date-value'
d[(types.Timestamp, types.Timestamp(0))] = 'timestamp-value'
</code></pre><p><span class="text.normal">Or, nested dictionaries could be used:</span></p><pre class="text.syntax"><code class="python">d = {types.Date: {}, types.Timestamp: {}}
d[types.Date][types.Date(0))] = 'date-value'
d[types.Timestamp][types.Timestamp(0))] = 'timestamp-value'
</code></pre></section><section class="unspecified" documented="true" local-identifier="Datetime Math" id="Eccentricities.Datetime-Math"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#Eccentricities">Eccentricities</a><a class="title" href="#Eccentricities.Datetime-Math"><span class="text.normal">Datetime Math</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><p><a class="context-local" href="../../time"><span class="project-name">fault.time</span></a><span class="text.normal"> is heavily based on direct Python </span><a class="invalid" href="#int"><span class="unknown">int</span></a><span class="text.normal"> subclasses. This offers many</span><span class="text.line-break"> </span><span class="text.normal">benefits, but it also avoids overriding the integer's operators leaving a,</span><span class="text.line-break"> </span><span class="text.normal">contextually, low-level operation that should normally be avoided. This likely</span><span class="text.line-break"> </span><span class="text.normal">offers a suprise as the usual addition (</span><code class="">+</code><span class="text.normal">) and subtraction (</span><code class="">-</code><span class="text.normal">) operators</span><span class="text.line-break"> </span><span class="text.normal">do not perform as they would with the standard library's </span><a class="invalid" href="#datetime.datetime"><span class="unknown">datetime.datetime</span></a><span class="text.line-break"> </span><span class="text.normal">or many other datetime packages.</span></p><p><span class="text.normal">Instead, </span><a class="context-local" href="../../time"><span class="project-name">fault.time</span></a><span class="text.normal"> relies on the higher-level methods to perform delta</span><span class="text.line-break"> </span><span class="text.normal">calculation and point positioning.</span></p></section><section class="unspecified" documented="true" local-identifier="Day and Month Fields" id="Eccentricities.Day-and-Month-Fields"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#Eccentricities">Eccentricities</a><a class="title" href="#Eccentricities.Day-and-Month-Fields"><span class="text.normal">Day and Month Fields</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><p><span class="text.normal">The </span><code class="">day</code><span class="text.normal"> and </span><code class="">month</code><span class="text.normal"> fields of the standard time context are </span><span class="text.emphasis.heavy">offsets</span><span class="text.normal"> and</span><span class="text.line-break"> </span><span class="text.normal">are not consistent with the usual representation of gregorian day-of-month and</span><span class="text.line-break"> </span><span class="text.normal">month-of-year. Some of the Container keywords do, however, use the usual</span><span class="text.line-break"> </span><span class="text.normal">gregorian representation.</span></p><p><span class="text.normal">More clearly:</span></p><pre class="text.syntax"><code class="python">pit = types.Timestamp.of(iso="2002-01-01T00:00:00")
assert pit.select('day', 'month') == 0
assert pit.select('month', 'year') == 0
</code></pre><p><span class="text.normal">As opposed to the day-of-month and month-of-year fields being equal to </span><code class="">1</code><span class="text.normal"> as</span><span class="text.line-break"> </span><span class="text.normal">one might expect them to be. Rather, </span><span class="text.emphasis">they are offsets</span><span class="text.normal">.</span></p></section><section class="unspecified" documented="true" local-identifier="Month Arithmetic Can Overflow" id="Eccentricities.Month-Arithmetic-Can-Overflow"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#Eccentricities">Eccentricities</a><a class="title" href="#Eccentricities.Month-Arithmetic-Can-Overflow"><span class="text.normal">Month Arithmetic Can Overflow</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><p><span class="text.normal">The implementation of month arithmetic is sensitive to the selected day:</span></p><pre class="text.syntax"><code class="python"># working with a leap year
pit = types.Timestamp.of(iso='2012-01-31T18:55:33.946259')
pit.elapse(month=1)
types.Timestamp.of(iso='2012-03-02T18:55:33.946259')
</code></pre><p><span class="text.normal">The issue can be avoided by adjusting the PiT to the beginning of the month:</span></p><pre class="text.syntax"><code class="python">pit = pit.update('day', 0, 'month')
pit.elapse(month=1)
</code></pre></section><section class="unspecified" documented="true" local-identifier="Annums and Years" id="Eccentricities.Annums-and-Years"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#Eccentricities">Eccentricities</a><a class="title" href="#Eccentricities.Annums-and-Years"><span class="text.normal">Annums and Years</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><p><span class="text.normal">The "year" unit in </span><a class="context-local" href="../../time"><span class="project-name">fault.time</span></a><span class="text.normal"> is strictly referring to gregorian years. This means</span><span class="text.line-break"> </span><span class="text.normal">that a "year" in </span><a class="context-local" href="../../time"><span class="project-name">fault.time</span></a><span class="text.normal"> is actually twelve gregorian months, which means</span><span class="text.line-break"> </span><span class="text.emphasis">years are a subjective unit of time</span><span class="text.normal">.</span><span class="text.line-break"> </span><span class="text.normal">For </span><span class="text.emphasis">metric</span><span class="text.normal"> measures--Python timedeltas analog--this</span><span class="text.line-break"> </span><span class="text.normal">poses a problem in that years should not be used to represent the span when working</span><span class="text.line-break"> </span><span class="text.normal">with </span><a class="project-local" href="../types.Measure"><span class="unknown">types.Measure</span></a><span class="text.normal">.</span></p><p><span class="text.normal">In order to compensate, the </span><a class="project-local" href="../types.Month"><span class="unknown">types.Month</span></a><span class="text.normal"> class provides a means to</span><span class="text.line-break"> </span><span class="text.normal">express such subjective time spans.</span></p></section><section class="unspecified" documented="true" local-identifier="Unit Aware Comparison" id="Eccentricities.Unit-Aware-Comparison"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#Eccentricities">Eccentricities</a><a class="title" href="#Eccentricities.Unit-Aware-Comparison"><span class="text.normal">Unit Aware Comparison</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><p><span class="text.normal">Unit subclasses do </span><span class="text.emphasis">not</span><span class="text.normal"> override the built-in comparison methods implemented by the</span><span class="text.line-break"> </span><a class="invalid" href="#int"><span class="unknown">int</span></a><span class="text.normal"> type that all unit classes are based on. Given that these classes can</span><span class="text.line-break"> </span><span class="text.normal">represent different units, comparisons </span><span class="text.emphasis">must</span><span class="text.normal"> be performed with </span><span class="text.emphasis">like units</span><span class="text.normal"> in order</span><span class="text.line-break"> </span><span class="text.normal">to yield consistently correct results. In order to compensate, unit aware comparisons are</span><span class="text.line-break"> </span><span class="text.normal">provided for </span><a class="project-local" href="../abstract.Point"><span class="unknown">abstract.Point</span></a><span class="text.normal"> types:</span><span class="text.line-break"> </span><a class="project-local" href="../abstract.Point.leads"><span class="unknown">abstract.Point.leads</span></a><span class="text.normal"> and </span><a class="project-local" href="../abstract.Point.follows"><span class="unknown">abstract.Point.follows</span></a><span class="text.normal">.</span></p><p><span class="text.normal">Measures do not implement unit-aware comparisons and must be converted to like-units</span><span class="text.line-break"> </span><span class="text.normal">before the integer comparisons may be used.</span></p></section></section><section class="unspecified" documented="true" local-identifier="Math in Python datetime Terms" id="Math-in-Python-datetime-Terms"><h1><span class="prefix"></span><a class="title" href="#Math-in-Python-datetime-Terms"><span class="text.normal">Math in Python datetime Terms</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><p><a class="context-local" href="../../time"><span class="project-name">fault.time</span></a><span class="text.normal"> does not use the usual arithmetic operators for performing datetime</span><span class="text.line-break"> </span><span class="text.normal">math. Rather, </span><a class="context-local" href="../../time"><span class="project-name">fault.time</span></a><span class="text.line-break"> </span><span class="text.emphasis">uses named methods in order to draw a semantic distinction</span><span class="text.normal">.</span><span class="text.line-break"> </span><span class="text.normal">Not to mention, it is sometimes desirable to use the integer's operators directly</span><span class="text.line-break"> </span><span class="text.normal">in order to avoid semantics involved with representation types.</span></p><p><span class="text.normal">The list here points to the abstract base classes.</span><span class="text.line-break"> </span><span class="text.normal">Points </span><span class="text.emphasis">are</span><span class="text.normal"> timestamps, datetimes,. Measures </span><span class="text.emphasis">are</span><span class="text.normal"> intervals, timedeltas.</span></p><dl class="text.mapping"><div id="Math-in-Python-datetime-Terms.timedelta()-+-timedelta()" documented="true"><dt><a class="dkn" href="#Math-in-Python-datetime-Terms.timedelta()-+-timedelta()"></a><span class="directory-key"><code class="">timedelta() + timedelta()</code></span></dt><dd><div class="status"></div><p><a class="project-local" href="../abstract.Measure.increase"><span class="unknown">abstract.Measure.increase</span></a><span class="text.normal">:</span></p><pre class="text.syntax"><code class="python">m1 = types.Measure(second=0)
m2 = types.Measure(second=1)
d = m1.increase(m2)
</code></pre></dd></div><div id="Math-in-Python-datetime-Terms.timedelta()---timedelta()" documented="true"><dt><a class="dkn" href="#Math-in-Python-datetime-Terms.timedelta()---timedelta()"></a><span class="directory-key"><code class="">timedelta() - timedelta()</code></span></dt><dd><div class="status"></div><p><a class="project-local" href="../abstract.Measure.decrease"><span class="unknown">abstract.Measure.decrease</span></a><span class="text.normal">:</span></p><pre class="text.syntax"><code class="python">m1 = types.Measure(second=2)
m2 = types.Measure(second=1)
d = m1.decrease(m2)
</code></pre></dd></div><div id="Math-in-Python-datetime-Terms.datetime()-+-timedelta()" documented="true"><dt><a class="dkn" href="#Math-in-Python-datetime-Terms.datetime()-+-timedelta()"></a><span class="directory-key"><code class="">datetime() + timedelta()</code></span></dt><dd><div class="status"></div><p><a class="project-local" href="../abstract.Point.elapse"><span class="unknown">abstract.Point.elapse</span></a><span class="text.normal">:</span></p><pre class="text.syntax"><code class="python">ts = types.Timestamp.of(...)
measure = types.Measure(second=1)
d = ts.elapse(measure)
</code></pre></dd></div><div id="Math-in-Python-datetime-Terms.datetime()---timedelta()" documented="true"><dt><a class="dkn" href="#Math-in-Python-datetime-Terms.datetime()---timedelta()"></a><span class="directory-key"><code class="">datetime() - timedelta()</code></span></dt><dd><div class="status"></div><p><span class="text.normal">Point in Time subtraction is handled with</span><span class="text.line-break"> </span><a class="project-local" href="../abstract.Point.rollback"><span class="unknown">abstract.Point.rollback</span></a><span class="text.normal">:</span></p><pre class="text.syntax"><code class="python">ts = types.Timestamp.of()
measure = types.Measure(second=1)
d = ts.rollback(measure)
</code></pre></dd></div><div id="Math-in-Python-datetime-Terms.datetime()---datetime()" documented="true"><dt><a class="dkn" href="#Math-in-Python-datetime-Terms.datetime()---datetime()"></a><span class="directory-key"><code class="">datetime() - datetime()</code></span></dt><dd><div class="status"></div><p><a class="project-local" href="../abstract.Point.measure"><span class="unknown">abstract.Point.measure</span></a><span class="text.normal">:</span></p><pre class="text.syntax"><code class="python">ts1 = types.Timestamp.of(...)
ts2 = types.Timestamp.of(...)
d = ts1.measure(ts2) # measure the distance between
</code></pre></dd></div></dl></section><section class="unspecified" documented="true" local-identifier="Calendar Representation" id="Calendar-Representation"><h1><span class="prefix"></span><a class="title" href="#Calendar-Representation"><span class="text.normal">Calendar Representation</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><p><span class="text.normal">A Date can be used to represent the span of the entire day.</span></p><pre class="text.syntax"><code class="python">date = types.Date.of(year=1982, month=4, day=17)
assert date.select('day', 'month') == 17
</code></pre><p><span class="text.normal">However, the above actually represents.</span></p><pre class="text.syntax"><code class="python">assert date.select('date') == (1982, 5, 18)
</code></pre><p><span class="text.normal">Usually, using the </span><code class="">date</code><span class="text.normal"> keyword is best way to to work with</span><span class="text.line-break"> </span><span class="text.normal">literal dates.</span></p><pre class="text.syntax"><code class="python">assert types.Date.of(date=(1982,5,18)) == date
</code></pre><p><span class="text.normal">The calendrical </span><span class="text.emphasis.heavy">representation</span><span class="text.normal"> only takes effect through certain</span><span class="text.line-break"> </span><span class="text.normal">interfaces.</span></p><pre class="text.syntax"><code class="python">ts = types.Timestamp.of(iso="2001-01-01T05:30:01")
print(repr(ts))
types.Timestamp.of(iso='2001-01-01T05:30:01.000000')
</code></pre><p><span class="text.normal">And from a datetime tuple.</span></p><pre class="text.syntax"><code class="python">ts2 = types.Timestamp.of(datetime = (2001, 1, 1, 5, 30, 1, 0))
assert ts == ts2
</code></pre><p><a class="context-local" href="../../time"><span class="project-name">fault.time</span></a><span class="text.normal"> PiTs do not perform calendrical validation; rather, fields with excess</span><span class="text.line-break"> </span><span class="text.normal">values overflow onto larger units. This is similar to how MySQL handles</span><span class="text.line-break"> </span><span class="text.normal">overflow. For </span><a class="context-local" href="../../time"><span class="project-name">fault.time</span></a><span class="text.normal">, this choice is deliberate and the user is expected to</span><span class="text.line-break"> </span><span class="text.normal">perform any desired validation.</span></p><pre class="text.syntax"><code class="python">pit = types.Date.of(date=(1982,5,0))
</code></pre><p><span class="text.normal">The assigned </span><code class="">pit</code><span class="text.normal"> now points to the last day of the month preceding the fifth</span><span class="text.line-break"> </span><span class="text.normal">month in the year 1982.</span></p></section><section class="unspecified" documented="true" local-identifier="Datetime Math" id="Datetime-Math"><h1><span class="prefix"></span><a class="title" href="#Datetime-Math"><span class="text.normal">Datetime Math</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><p><a class="context-local" href="../../time"><span class="project-name">fault.time</span></a><span class="text.normal"> can easily answer questions like, "What was third weekend of the fifth</span><span class="text.line-break"> </span><span class="text.normal">month of last year?".</span></p><pre class="text.syntax"><code class="python">pit = system.utc()
pit = pit.update('day', 0, 'month') # set to the first day to avoid overflow
pit = pit.rollback(year=1) # subtract one gregorian year
pit = pit.update('month', 5-1, 'year') # set to the fifth month
pit = pit.update('day', 6, 'week') # set to the weekend of the week
pit = pit.elapse(week = 2)
</code></pre><p><span class="text.normal">Things can get a little more interesting when asking about the last weekend</span><span class="text.line-break"> </span><span class="text.normal">of a given month.</span></p><pre class="text.syntax"><code class="python"># move the beginning of month (to avoid possible day overflow)
pit = system.utc().update('day', 0, 'month')
# to the next month and then to the end of the previous
pit = pit.elapse(month = 1).update('day', -1, 'month') # move to the end of the month.
# 0 is the beginning of the week, so -1 is the end of the prior week.
pit = pit.update('day', -1, 'week')
</code></pre><p><span class="text.normal">On day overflow, the following illustrates the effect:</span></p><pre class="text.syntax"><code class="python"># working with a leap year
pit = types.Timestamp.of(iso='2012-01-31T18:55:33.946259')
pit.elapse(month=1)
types.Timestamp.of(iso='2012-03-02T18:55:33.946259')
</code></pre><p><span class="text.normal">Month arithmetic does not lose days in order to align the edge of a month.</span><span class="text.line-break"> </span><span class="text.normal">In order to keep overflow from causing invalid calculations, adjust to the</span><span class="text.line-break"> </span><span class="text.normal">beginning of the month.</span></p><p><span class="text.normal">Things can get even more interesting when asking,</span><span class="text.line-break"> </span><span class="text.normal">"What is the second to last Thursday of the month". Questions like this require</span><span class="text.line-break"> </span><span class="text.normal">alignment in order to be answered:</span></p><pre class="text.syntax"><code class="python">pit = system.utc()
pit = pit.update('day', 0, 'month') # let's say this month
# but we need the end of the month
pit = pit.elapse(month=1)
pit = pit.update('day', -1, 'month') # set to the first day
# And now something that will appear almost magical if
# you haven't used a datetime package with a similar feature.
pit = pit.update('day', 0, 'week', align=-4) # last thursday of month
pit = pit.rollback(week=1) # second to last
</code></pre><p><span class="text.normal">Essentially, alignment allows Thursdays to be seen as the first day of the</span><span class="text.line-break"> </span><span class="text.normal">week, warranting that the day field will stay the same or be subtracted when</span><span class="text.line-break"> </span><span class="text.normal">set to zero. This is why the day is set to the last day of the month, in case</span><span class="text.line-break"> </span><span class="text.normal">the Thursday is the last day of the month, and with proper alignment the first</span><span class="text.line-break"> </span><span class="text.normal">day of the re-aligned week.</span></p></section><section class="unspecified" documented="true" local-identifier="Time Zones" id="Time-Zones"><h1><span class="prefix"></span><a class="title" href="#Time-Zones"><span class="text.normal">Time Zones</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><p><span class="text.normal">Time zone adjustments are supported by zone objects:</span></p><pre class="text.syntax"><code class="python">pit = system.utc()
tz = views.Zone.open('America/Los_Angeles')
local_pit = tz.localize(pit)
print(local_pit.select('iso'))

</code></pre></section><section class="unspecified" documented="true" local-identifier="Constructing Points and Measures" id="Constructing-Points-and-Measures"><h1><span class="prefix"></span><a class="title" href="#Constructing-Points-and-Measures"><span class="text.normal">Constructing Points and Measures</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><p><span class="text.normal">A Point is a Point in Time; like a date or a date and time of day. Usually, this</span><span class="text.line-break"> </span><span class="text.normal">is referring to instances of the </span><a class="project-local" href="../types.Timestamp"><span class="unknown">types.Timestamp</span></a><span class="text.normal"> class. A Measure</span><span class="text.line-break"> </span><span class="text.normal">is an arbitrary unit of time and is usually referring to instances the</span><span class="text.line-break"> </span><a class="project-local" href="../types.Measure"><span class="unknown">types.Measure</span></a><span class="text.normal"> class.</span></p><p><span class="text.normal">Constructing instances is usually performed with the class method</span><span class="text.line-break"> </span><a class="project-local" href="../types.Measure.of"><span class="unknown">types.Measure.of</span></a><span class="text.normal">. Or, </span><a class="project-local" href="../types.Timestamp.of"><span class="unknown">types.Timestamp.of</span></a><span class="text.normal"> for Points.</span></p><section class="unspecified" documented="true" local-identifier="Creating a Timestamp" id="Constructing-Points-and-Measures.Creating-a-Timestamp"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#Constructing-Points-and-Measures">Constructing Points and Measures</a><a class="title" href="#Constructing-Points-and-Measures.Creating-a-Timestamp"><span class="text.normal">Creating a Timestamp</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><p><span class="text.normal">The </span><a class="project-local" href="../types.Timestamp"><span class="unknown">types.Timestamp</span></a><span class="text.normal"> type is the Point In Time Representation</span><span class="text.line-break"> </span><span class="text.normal">Type with the finest precision available </span><span class="text.emphasis">by default</span><span class="text.normal">:</span></p><pre class="text.syntax"><code class="python">near_y2k = types.Timestamp.of(date=(2000,1,1), hour=8, minute=24, second=15)
&#62;&#62;&#62; near_y2k
types.Timestamp.of(iso='2000-01-01T08:24:15.000000')
</code></pre><p><span class="text.normal">Currently, The </span><a class="project-local" href="../types.Timestamp"><span class="unknown">types.Timestamp</span></a><span class="text.normal"> and </span><a class="project-local" href="../types.Measure"><span class="unknown">types.Measure</span></a><span class="text.normal"> types use nanosecond precision.</span></p></section><section class="unspecified" documented="true" local-identifier="Creating a Date" id="Constructing-Points-and-Measures.Creating-a-Date"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#Constructing-Points-and-Measures">Constructing Points and Measures</a><a class="title" href="#Constructing-Points-and-Measures.Creating-a-Date"><span class="text.normal">Creating a Date</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><p><span class="text.normal">A Date is also considered a Point In Time type. The Date type exists for the</span><span class="text.line-break"> </span><span class="text.normal">purpose of representing the point in which the specified day starts, </span><span class="text.emphasis">and</span><span class="text.normal"> the</span><span class="text.line-break"> </span><span class="text.normal">period between that point and the start of the next day; non-inclusive:</span></p><pre class="text.syntax"><code class="python">types.Date.of(year=1982, month=4, day=17) # month and day are offsets.
types.Date.of(iso='1982-05-18')
</code></pre><p><span class="text.normal">While a little suprising, the above reveals an apparent inconsistency: the</span><span class="text.line-break"> </span><code class="">month</code><span class="text.normal"> keyword parameter acts as a month offset. To compensate,</span><span class="text.line-break"> </span><span class="text.normal">the </span><code class="">date</code><span class="text.normal"> container keyword parameter is treated specially to accept</span><span class="text.line-break"> </span><span class="text.normal">gregorian calendar representation. The keyword parameters are literal</span><span class="text.line-break"> </span><span class="text.normal">increments of units. Subsequently, using the </span><code class="">date</code><span class="text.normal"> container can more</span><span class="text.line-break"> </span><span class="text.normal">appropriate:</span></p><pre class="text.syntax"><code class="python">&#62;&#62;&#62; types.Date.of(date=(1982,5,18))
types.Date.of(iso='1982-05-18')

</code></pre></section><section class="unspecified" documented="true" local-identifier="Getting the Current Point in Time" id="Constructing-Points-and-Measures.Getting-the-Current-Point-in-Time"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#Constructing-Points-and-Measures">Constructing Points and Measures</a><a class="title" href="#Constructing-Points-and-Measures.Getting-the-Current-Point-in-Time"><span class="text.normal">Getting the Current Point in Time</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><p><span class="text.normal">The primary interface for accessing the system clock is using the</span><span class="text.line-break"> </span><a class="project-local" href="../system.utc"><span class="unknown">system.utc</span></a><span class="text.normal"> callable:</span></p><pre class="text.syntax"><code class="python">current_time = system.utc()
</code></pre><p><span class="text.normal">The returned timestamp is a UTC timestamp.</span></p></section><section class="unspecified" documented="true" local-identifier="Creating a Timestamp from an ISO-8601 String" id="Constructing-Points-and-Measures.Creating-a-Timestamp-from-an-ISO-8601-String"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#Constructing-Points-and-Measures">Constructing Points and Measures</a><a class="title" href="#Constructing-Points-and-Measures.Creating-a-Timestamp-from-an-ISO-8601-String"><span class="text.normal">Creating a Timestamp from an ISO-8601 String</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><p><span class="text.normal">While the </span><a class="project-local" href="../format"><span class="unknown">format</span></a><span class="text.normal"> module manages the details, the</span><span class="text.line-break"> </span><span class="text.normal">types have access to the functionality:</span></p><pre class="text.syntax"><code class="python">ts = types.Timestamp.of(iso='2009-02-01T3:33:45.123321')
</code></pre><p><a class="context-local" href="../../time"><span class="project-name">fault.time</span></a><span class="text.normal"> provides parsers for both ISO-8601 and RFC-1123 datetime formats. The</span><span class="text.line-break"> </span><span class="text.normal">above example shows how to construct a Point in Time from an ISO-8601 string.</span><span class="text.line-break"> </span><span class="text.normal">The following shows RFC-1123, the format used by HTTP:</span></p><pre class="text.syntax"><code class="python">ts = types.Timestamp.of(rfc='Sun, 19 Mar 2012 07:27:58')
</code></pre></section><section class="unspecified" documented="true" local-identifier="Formatting a Standard Timestamp" id="Constructing-Points-and-Measures.Formatting-a-Standard-Timestamp"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#Constructing-Points-and-Measures">Constructing Points and Measures</a><a class="title" href="#Constructing-Points-and-Measures.Formatting-a-Standard-Timestamp"><span class="text.normal">Formatting a Standard Timestamp</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><p><span class="text.normal">Likewise, instances can be formatted by the standards:</span></p><pre class="text.syntax"><code class="python">ts = types.Timestamp.of(iso='2009-01-01T7:30:0')
print(ts.select('iso'))
</code></pre><p><span class="text.normal">And RFC as well:</span></p><pre class="text.syntax"><code class="python">assert "Sat, 01 Jan 2000 00:00:00" == types.Timestamp(date=(2000,1,1)).select('rfc')
</code></pre></section><section class="unspecified" documented="true" local-identifier="Constructing a Timestamp from Parts" id="Constructing-Points-and-Measures.Constructing-a-Timestamp-from-Parts"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#Constructing-Points-and-Measures">Constructing Points and Measures</a><a class="title" href="#Constructing-Points-and-Measures.Constructing-a-Timestamp-from-Parts"><span class="text.normal">Constructing a Timestamp from Parts</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><p><span class="text.normal">A </span><a class="project-local" href="../types.Timestamp"><span class="unknown">types.Timestamp</span></a><span class="text.normal"> can be constructed from time parts using the</span><span class="text.line-break"> </span><a class="project-local" href="../abstract.Time.of"><span class="unknown">abstract.Time.of</span></a><span class="text.normal"> class method. This method takes</span><span class="text.line-break"> </span><span class="text.normal">arbitrary positional parameters and keyword parameters whose keys are the name</span><span class="text.line-break"> </span><span class="text.normal">of a unit of time known by the time context:</span></p><pre class="text.syntax"><code class="python">ts = types.Timestamp.of(hour = 55, second = 78)
</code></pre><p><span class="text.normal">Notably, the above is not particularly useful without a date:</span></p><pre class="text.syntax"><code class="python">types.Timestamp.of(
	date = (2015, 1, 1),
	hour = 13, minute = 7,
	second = 4,
	microsecond = 324159
)
</code></pre></section><section class="unspecified" documented="true" local-identifier="Constructing a Timestamp from a UNIX Timestamp" id="Constructing-Points-and-Measures.Constructing-a-Timestamp-from-a-UNIX-Timestamp"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#Constructing-Points-and-Measures">Constructing Points and Measures</a><a class="title" href="#Constructing-Points-and-Measures.Constructing-a-Timestamp-from-a-UNIX-Timestamp"><span class="text.normal">Constructing a Timestamp from a UNIX Timestamp</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><p><span class="text.normal">The </span><code class="">unix</code><span class="text.normal"> container keyword provides an interface from seconds since the</span><span class="text.line-break"> </span><span class="text.normal">UNIX-epoch, "January 1, 1970". A timestamp can be made using the</span><span class="text.line-break"> </span><a class="project-local" href="../abstract.Time.of"><span class="unknown">abstract.Time.of</span></a><span class="text.normal"> method:</span></p><pre class="text.syntax"><code class="python">epoch = types.Timestamp.of(unix=0)
</code></pre><p><span class="text.normal">Subseqently, a given PiT can yield a UNIX timestamp using the</span><span class="text.line-break"> </span><a class="project-local" href="../abstract.Time.select"><span class="unknown">abstract.Time.select</span></a><span class="text.normal"> method:</span></p><pre class="text.syntax"><code class="python">now = system.utc()
unix = now.select('unix')
</code></pre><p><span class="text.normal">And a contrived use-case where the file </span><code class="">f</code><span class="text.normal"> contains lines containing unix timestamps:</span></p><pre class="text.syntax"><code class="python">with open(...) as f:
	times = list(map(from_unix, map(int, f.readlines())))
</code></pre></section></section><section class="unspecified" documented="true" local-identifier="Arithmetic of Points and Measures" id="Arithmetic-of-Points-and-Measures"><h1><span class="prefix"></span><a class="title" href="#Arithmetic-of-Points-and-Measures"><span class="text.normal">Arithmetic of Points and Measures</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><p><span class="text.normal">Time types are all based on subclasses of Python's </span><a class="invalid" href="#int"><span class="unknown">int</span></a><span class="text.normal">.</span><span class="text.line-break"> </span><span class="text.normal">The usual arithmetic operators are essentially low-level operations that can be</span><span class="text.line-break"> </span><span class="text.normal">used in certain cases, but they should be restricted to performance critical</span><span class="text.line-break"> </span><span class="text.normal">situations where the higher-level methods cannot be used.</span></p><section class="unspecified" documented="true" local-identifier="Getting a Particular Day of the Week" id="Arithmetic-of-Points-and-Measures.Getting-a-Particular-Day-of-the-Week"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#Arithmetic-of-Points-and-Measures">Arithmetic of Points and Measures</a><a class="title" href="#Arithmetic-of-Points-and-Measures.Getting-a-Particular-Day-of-the-Week"><span class="text.normal">Getting a Particular Day of the Week</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><p><span class="text.normal">Points and scalars can both update arbitrary fields according to a boundary.</span><span class="text.line-break"> </span><span class="text.normal">With Timestamps and Dates aligned on the beginning of a week, an arbitrary</span><span class="text.line-break"> </span><span class="text.normal">day of week can be found by field modification:</span></p><pre class="text.syntax"><code class="python">ts = types.Timestamp.of(iso="2000-01-01T3:30:00")
&#62;&#62;&#62; print(ts.select('day', 'week'))
6
ts = ts.update('day', 1, 'week') # 0-6, Sun-Sat.
&#62;&#62;&#62; print(ts)
'1999-12-27T03:30:00.000000'
&#62;&#62;&#62; print(ts.select('weekday'))
'monday'
</code></pre><p><span class="text.normal">By extension, to get the following Monday, just add seven:</span></p><pre class="text.syntax"><code class="python">ts = types.Timestamp.of(iso="2000-01-01T3:30:00")
ts = ts.update('day', 8, 'week')
&#62;&#62;&#62; print(ts)
'2000-01-03T03:30:00.000000'
&#62;&#62;&#62; print(ts.select('weekday'))
'monday'
</code></pre><p><span class="text.normal">Or, to get the preceding Monday, just substract seven:</span></p><pre class="text.syntax"><code class="python">&#62;&#62;&#62; ts = types.Timestamp.of(iso="2000-01-01T3:30:00")
&#62;&#62;&#62; ts = ts.update('day', 1-7, 'week')
&#62;&#62;&#62; print(ts)
1999-12-20T03:30:00.000000
&#62;&#62;&#62; print(ts.select('weekday'))
monday
</code></pre><p><span class="text.normal">And so on: </span><code class="">1+|-14</code><span class="text.normal">, </span><code class="">1+|-21</code><span class="text.normal">, ...</span></p></section><section class="unspecified" documented="true" local-identifier="Getting a Particular Weekday of a Month" id="Arithmetic-of-Points-and-Measures.Getting-a-Particular-Weekday-of-a-Month"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#Arithmetic-of-Points-and-Measures">Arithmetic of Points and Measures</a><a class="title" href="#Arithmetic-of-Points-and-Measures.Getting-a-Particular-Weekday-of-a-Month"><span class="text.normal">Getting a Particular Weekday of a Month</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><p><span class="text.normal">Occasionally, the need may arise to fetch the N-th weekday of the month. This is</span><span class="text.line-break"> </span><span class="text.normal">trickier than getting an arbitrary weekday as it requires the part to be aligned</span><span class="text.line-break"> </span><span class="text.normal">on a month. Given an arbitrary time type supporting gregorian units, </span><code class="">ts</code><span class="text.normal">, the</span><span class="text.line-break"> </span><span class="text.normal">month must first be adjusted to the beginning of the month:</span></p><pre class="text.syntax"><code class="python"># Find the third Saturday of the month.
ts = types.Timestamp.of(...)

# Get the first of the month.
ts = ts.update('day', 0, 'month')
# Now the first Saturday of the month.
ts = ts.update('day', 6, 'week')
ts.elapse(day=14)
</code></pre><p><span class="text.normal">The above, however, is hiding a factor due to Saturday's nature of being on</span><span class="text.line-break"> </span><span class="text.normal">the end of the week: alignment. Alignment allows the repositioning of the</span><span class="text.line-break"> </span><span class="text.normal">boundary that a part is selected from or updated by. This provides the ability</span><span class="text.line-break"> </span><span class="text.normal">to designate that a particular weekday be the beginning or end of the week.</span><span class="text.line-break"> </span><span class="text.normal">Subsequently, allowing quick identification:</span></p><pre class="text.syntax"><code class="python">ts = types.Timestamp.of(...)
# Get the last day of the Month.
ts = ts.elapse(month=1).update('day', -1, 'month')
ts.update('day', 0, 'week', align=-2)
</code></pre></section></section><section class="unspecified" documented="true" local-identifier="Working with Time Zones" id="Working-with-Time-Zones"><h1><span class="prefix"></span><a class="title" href="#Working-with-Time-Zones"><span class="text.normal">Working with Time Zones</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><p><span class="text.normal">Time zones are </span><span class="text.emphasis">difficult</span><span class="text.normal"> to work with. In the best situations, use is not necessary, but that is,</span><span class="text.line-break"> </span><span class="text.normal">unfortunately, not often. Time zones offer a rather unique problem as programmers are</span><span class="text.line-break"> </span><span class="text.normal">indirectly forced into supporting designations often defined by local government. This</span><span class="text.line-break"> </span><span class="text.normal">imposition complicates the situation dramatically. Even in the case where the right</span><span class="text.line-break"> </span><span class="text.normal">process is followed, it is possible to come to the wrong conclusion given rotten time zone</span><span class="text.line-break"> </span><span class="text.normal">information.</span></p><p><span class="text.normal">There is no easy mode when being time zone aware. It's an extra level of detail that</span><span class="text.line-break"> </span><span class="text.emphasis">must</span><span class="text.normal"> be managed by the application.</span></p><section class="unspecified" documented="true" local-identifier="Understanding Time Zones" id="Working-with-Time-Zones.Understanding-Time-Zones"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#Working-with-Time-Zones">Working with Time Zones</a><a class="title" href="#Working-with-Time-Zones.Understanding-Time-Zones"><span class="text.normal">Understanding Time Zones</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><p><span class="text.normal">The difficulty of time zones stems from the need to transition to and from an</span><span class="text.line-break"> </span><span class="text.normal">offset for appropriating the representation of a Point in Time. This is referring to</span><span class="text.line-break"> </span><span class="text.normal">a couple tasks:</span></p><ul class="text.set"><li><p><span class="text.normal">Representing a UTC Point in Time in a local form.</span></p></li><li><p><span class="text.normal">Converting a local form to a UTC Point in Time.</span></p></li></ul><p><span class="text.normal">While this is trivial on the face, the local form is actually a moving target. A</span><span class="text.line-break"> </span><span class="text.normal">time zone database is maintained by a standards body in order to keep</span><span class="text.line-break"> </span><span class="text.normal">track of how the local form varies. Often this involves daylight savings time,</span><span class="text.line-break"> </span><span class="text.normal">but extends into situations where political decisions alter the offsets for a</span><span class="text.line-break"> </span><span class="text.normal">given region altogether. At a wider scope the database </span><span class="text.emphasis">can</span><span class="text.normal"> change entirely.</span><span class="text.line-break"> </span><span class="text.normal">Consider database corrections, updates, or complete substitutions.</span></p><p><span class="text.normal">This subjective offsetting can create situations where a given time of day</span><span class="text.line-break"> </span><span class="text.normal">of a local form </span><span class="text.emphasis">is either ambiguous or invalid</span><span class="text.normal">. Proper handling of these cases</span><span class="text.line-break"> </span><span class="text.normal">is often dependent on the context in which a given local form is being used.</span></p><p><span class="text.normal">When working with zoned PiTs, there are two situations:</span></p><ol class="text.sequence"><li><p><span class="text.normal">A canonical Point, normally a PiT in UTC associated with a zone.</span></p></li><li><p><span class="text.normal">A local Point where the local form is being represented.</span></p></li></ol><p><span class="text.normal">Each situation has its own requirements for proper zone handling.</span></p><p><span class="text.normal">In the first, the zone identifier should be associated with the PiT object.</span><span class="text.line-break"> </span><span class="text.normal">These objects should always be a type capable of designating a date and time of</span><span class="text.line-break"> </span><span class="text.normal">day, the </span><a class="project-local" href="../types.Timestamp"><span class="unknown">types.Timestamp</span></a><span class="text.normal"> type. Representation types like</span><span class="text.line-break"> </span><a class="project-local" href="../types.Date"><span class="unknown">types.Date</span></a><span class="text.normal"> don't require zone adjustments unless it</span><span class="text.line-break"> </span><span class="text.normal">is ultimately intended to refer to the beginning of the day in that particular</span><span class="text.line-break"> </span><span class="text.normal">zone in UTC.</span></p><p><span class="text.normal">In the second, the actual offset </span><span class="text.emphasis">and</span><span class="text.normal"> zone identifier applied to the zone</span><span class="text.line-break"> </span><span class="text.normal">should be associated with the PiT object.</span></p></section><section class="unspecified" documented="true" local-identifier="Getting an Offset from a UTC Point in Time" id="Working-with-Time-Zones.Getting-an-Offset-from-a-UTC-Point-in-Time"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#Working-with-Time-Zones">Working with Time Zones</a><a class="title" href="#Working-with-Time-Zones.Getting-an-Offset-from-a-UTC-Point-in-Time"><span class="text.normal">Getting an Offset from a UTC Point in Time</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><p><span class="text.normal">While </span><a class="project-local" href="../views"><span class="unknown">views</span></a><span class="text.normal"> provides the implementation of Zone objects, high level</span><span class="text.line-break"> </span><span class="text.normal">access is provided via the </span><a class="project-local" href="../views.Zone.open"><span class="unknown">views.Zone.open</span></a><span class="text.normal"> class method:</span></p><pre class="text.syntax"><code class="python">tz = views.Zone.open('America/Los_Angeles')
pit = system.utc()
offset = tz.find(pit)
</code></pre><p><span class="text.normal">Once the </span><a class="project-local" href="../views.Zone.Offset"><span class="unknown">views.Zone.Offset</span></a><span class="text.normal"> object has been found for a given point in</span><span class="text.line-break"> </span><span class="text.normal">time, the UTC point can be adjusted:</span></p><pre class="text.syntax"><code class="python">la_pit = pit.elapse(offset)
</code></pre></section><section class="unspecified" documented="true" local-identifier="Localizing a UTC Point in Time" id="Working-with-Time-Zones.Localizing-a-UTC-Point-in-Time"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#Working-with-Time-Zones">Working with Time Zones</a><a class="title" href="#Working-with-Time-Zones.Localizing-a-UTC-Point-in-Time"><span class="text.normal">Localizing a UTC Point in Time</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><p><span class="text.normal">The examples in the previous section show the details of localization.</span><span class="text.line-break"> </span><a class="project-local" href="../views.Zone"><span class="unknown">views.Zone</span></a><span class="text.normal"> instances have the above functionality packed into a</span><span class="text.line-break"> </span><span class="text.normal">single method, </span><a class="project-local" href="../views.Zone.localize"><span class="unknown">views.Zone.localize</span></a><span class="text.normal">:</span></p><pre class="text.syntax"><code class="python">pit, offset = views.Zone.open().localize(system.utc())
</code></pre><p><span class="text.normal">The offset applied to the point in time is returned with the adjusted point as it is</span><span class="text.line-break"> </span><span class="text.normal">often necessary in order to properly represent the timestamp:</span></p><pre class="text.syntax"><code class="python">offset.iso(pit)
# "2013-01-17T15:36:35.834813000 PST-28800"
</code></pre></section><section class="unspecified" documented="true" local-identifier="Normalizing a Local Point in Time" id="Working-with-Time-Zones.Normalizing-a-Local-Point-in-Time"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#Working-with-Time-Zones">Working with Time Zones</a><a class="title" href="#Working-with-Time-Zones.Normalizing-a-Local-Point-in-Time"><span class="text.normal">Normalizing a Local Point in Time</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><p><span class="text.normal">Normalization is the process of adjusting a localized timestamp by its </span><span class="text.emphasis">known</span><span class="text.normal"> offset into</span><span class="text.line-break"> </span><span class="text.normal">a UTC timestamp and then localizing it. The </span><a class="project-local" href="../views.Zone.normalize"><span class="unknown">views.Zone.normalize</span></a><span class="text.line-break"> </span><span class="text.normal">method has this functionality:</span></p><pre class="text.syntax"><code class="python">pit, offset = views.Zone.open().localize(system.utc())
normalized_pit, new_offset = views.Zone.open().normalize(offset, pit)
</code></pre><p><span class="text.normal">Where </span><code class="">normalized_pit</code><span class="text.normal"> and </span><code class="">new_offset</code><span class="text.normal"> are the </span><span class="text.emphasis">exact</span><span class="text.normal"> same objects if no change was</span><span class="text.line-break"> </span><span class="text.normal">necessary.</span></p></section></section><h1 class="footing"></h1></main></body></html>