<html root="2"><head><title>fault.context.tools</title><meta charset="utf-8"/><link as="style" rel="preload" href="../../.legacy-web/core.css"></link><link as="style" rel="preload" href="../../.legacy-web/factor.css"></link><link rel="stylesheet" href="../../.legacy-web/core.css"></link><link rel="stylesheet" href="../../.legacy-web/factor.css"></link></head><body><main><h1><span class="prefix"></span><div class="page-subject"><img class="icon" src="../../.factor-type-icon/if.fault.io/python-module.svg"></img><span class="subject-identifier">tools</span><span class="element-status"><span class="misses">23</span><span class="completion-isolation"></span><span class="completion">74%</span></span><a href="http://if.fault.io/factors/python.module"><code class="type">python.module</code></a></div><div class="page-context"><a href="../"><img class="icon" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogPHRleHQgeT0iMzIiIGZvbnQtc2l6ZT0iMzIiPvCflIs8L3RleHQ+Cjwvc3ZnPgo="></img></a><span class="context-identifier">fault.context</span></div></h1><section class="chapter"><p><span class="text.normal">Function and iterator tools used by local projects.</span></p></section><section class="import" documented="false" local-identifier="functools" id="functools"><h1><span class="prefix"></span><a class="title" href="#functools"><span class="text.normal">functools</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">import</span></div></h1></section><section class="import" documented="false" local-identifier="itertools" id="itertools"><h1><span class="prefix"></span><a class="title" href="#itertools"><span class="text.normal">itertools</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">import</span></div></h1></section><section class="import" documented="false" local-identifier="typing" id="typing"><h1><span class="prefix"></span><a class="title" href="#typing"><span class="text.normal">typing</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">import</span></div></h1></section><section class="import" documented="false" local-identifier="dataclasses" id="dataclasses"><h1><span class="prefix"></span><a class="title" href="#dataclasses"><span class="text.normal">dataclasses</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">import</span></div></h1></section><section class="data" documented="false" local-identifier="cachedcalls" id="cachedcalls"><h1><span class="prefix"></span><a class="title" href="#cachedcalls"><span class="text.normal">cachedcalls</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">data</span></div></h1><pre class="text.syntax"><code class="source">cachedcalls = functools.lru_cache
</code></pre></section><section class="data" documented="false" local-identifier="partial" id="partial"><h1><span class="prefix"></span><a class="title" href="#partial"><span class="text.normal">partial</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">data</span></div></h1><pre class="text.syntax"><code class="source">partial = functools.partial
</code></pre></section><section class="function" documented="true" local-identifier="nothing" id="nothing"><h1><span class="prefix"></span><a class="title" href="#nothing"><span class="text.normal">nothing</span></a><span class="element-status"><span class="misses">2</span><span class="completion-isolation"></span><span class="completion">0%</span></span><div class="factor-element-meta"><span class="abstract-type">function</span></div><code class="type">None</code></h1><p><code class="signature">nothing(*args, **kw)</code></p><p><span class="text.normal">Callable that returns </span><a class="invalid" href="#None"><span class="unknown">None</span></a><span class="text.normal"> regardless of the arguments and keywords given.</span></p></section><section class="function" documented="true" local-identifier="reflect" id="reflect"><h1><span class="prefix"></span><a class="title" href="#reflect"><span class="text.normal">reflect</span></a><span class="element-status"><span class="nothing-missed">0</span></span><div class="factor-element-meta"><span class="abstract-type">function</span></div></h1><p><code class="signature">reflect(obj)</code></p><p><span class="text.normal">Callable that returns the single argument that it was given.</span></p></section><section class="function" documented="true" local-identifier="constant" id="constant"><h1><span class="prefix"></span><a class="title" href="#constant"><span class="text.normal">constant</span></a><span class="element-status"><span class="misses">4</span><span class="completion-isolation"></span><span class="completion">0%</span></span><div class="factor-element-meta"><span class="abstract-type">function</span></div></h1><p><code class="signature">constant(obj)</code></p><p><span class="text.normal">Return a callable that returns the given object regardless of</span><span class="text.line-break"> </span><span class="text.normal">the given parameters.</span></p></section><section class="function" documented="true" local-identifier="unique" id="unique"><h1><span class="prefix"></span><a class="title" href="#unique"><span class="text.normal">unique</span></a><span class="element-status"><span class="nothing-missed">0</span></span><div class="factor-element-meta"><span class="abstract-type">function</span></div></h1><p><code class="signature">unique(iterable, *existing)</code></p><p><span class="text.normal">Iterate through the contents of the </span><a class="factor-local" href="#unique.Parameters.iterable"><span class="parameter">iterable</span></a><span class="text.normal">,</span><span class="text.line-break"> </span><span class="text.normal">but only allow an item to be emitted once.</span></p><div class="admonition-WARNING"><table><tr><td><span class="admonition.icon"></span></td><td><span class="admonition.severity">WARNING</span></td></tr><tr><td></td><td><div class="admonition.content"><p><span class="text.normal">The implementation uses a </span><a class="factor-local" href="#unique.Parameters.set"><span class="parameter">set</span></a><span class="text.normal"> to track which items have transpired.</span><span class="text.line-break"> </span><span class="text.normal">It is never reset internally, so the generator can allocate</span><span class="text.line-break"> </span><span class="text.normal">arbitrary quantities of memory.</span></p></div></td></tr></table></div><section class="unspecified" documented="true" local-identifier="Parameters" id="unique.Parameters"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#unique">unique</a><a class="title" href="#unique.Parameters"><span class="text.normal">Parameters</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><dl class="text.mapping"><div id="unique.Parameters.iterable" class="parameter" documented="true"><dt><a class="dkn" href="#unique.Parameters.iterable"></a><span class="directory-key"><code class="parameter">iterable</code></span></dt><dd><div class="status"></div><p><span class="text.normal">The iterable whose duplicate items should be eliminated.</span></p></dd></div><div id="unique.Parameters.existing" class="parameter" documented="true"><dt><a class="dkn" href="#unique.Parameters.existing"></a><span class="directory-key"><code class="parameter">existing</code></span></dt><dd><div class="status"></div><p><span class="text.normal">The initial items in the filter set. Arguments given as</span><span class="text.line-break"> </span><a class="factor-local" href="#unique.Parameters.existing"><span class="parameter">existing</span></a><span class="text.normal"> will never be emitted. For instance, filtering</span><span class="text.line-break"> </span><a class="invalid" href="#None"><span class="unknown">None</span></a><span class="text.normal"> may be common.</span></p></dd></div><div id="unique.Parameters.set" class="parameter" documented="false"><dt><a class="dkn" href="#unique.Parameters.set"></a><span class="directory-key"><code class="parameter">set</code></span></dt><dd><div class="status"></div><p><code class="control.absent">Undocumented</code><span class="text.normal">.</span></p></dd></div></dl></section></section><section class="function" documented="true" local-identifier="interlace" id="interlace"><h1><span class="prefix"></span><a class="title" href="#interlace"><span class="text.normal">interlace</span></a><span class="element-status"><span class="nothing-missed">0</span></span><div class="factor-element-meta"><span class="abstract-type">function</span></div></h1><p><code class="signature">interlace(*iters)</code></p><p><span class="text.normal">An iterator constructor that takes a sequence of</span><span class="text.line-break"> </span><span class="text.normal">iterables and interlaces their items one after another.</span><span class="text.line-break"> </span><span class="text.normal">While uncommon, the pattern produced by interlace is complicated</span><span class="text.line-break"> </span><span class="text.normal">enough that forcing its recreation is undesirable.</span></p><p><span class="text.normal">Interlace produces an iterator following the pattern:</span></p><pre class="text.syntax"><code class="text">interlace(i1, i2, ..., in) -&#62; (
	i1-0, i2-0, ..., in-0,
	i1-1, i2-1, ..., in-1,
	â‹®
	i1-n, i2-n, ..., in-n,
)
</code></pre></section><section class="function" documented="true" local-identifier="compose" id="compose"><h1><span class="prefix"></span><a class="title" href="#compose"><span class="text.normal">compose</span></a><span class="element-status"><span class="misses">2</span><span class="completion-isolation"></span><span class="completion">90%</span></span><div class="factor-element-meta"><span class="abstract-type">function</span></div></h1><p><code class="signature">compose(*callables)</code></p><p><span class="text.normal">Return a composition of the given callable arguments.</span></p><p><span class="text.normal">Executing a composition is equivalent to: </span><code class="">g(f(x))</code><span class="text.normal"> where</span><span class="text.line-break"> </span><span class="text.normal">g and f are the parameters to compose: </span><code class="">compose(g,f)(x)</code><span class="text.normal">.</span></p><p><span class="text.normal">Compose has some trivial intelligence in that compositions</span><span class="text.line-break"> </span><span class="text.normal">of single functions return the function and compositions</span><span class="text.line-break"> </span><span class="text.normal">of no functions returns </span><a class="factor-local" href="#reflect"><span class="function">reflect</span></a><span class="text.normal">.</span></p><p><span class="text.normal">The resulting composition exposes the callables on the</span><span class="text.line-break"> </span><span class="text.normal">function's "callables" attribute.</span></p></section><section class="function" documented="true" local-identifier="plural" id="plural"><h1><span class="prefix"></span><a class="title" href="#plural"><span class="text.normal">plural</span></a><span class="element-status"><span class="misses">2</span><span class="completion-isolation"></span><span class="completion">0%</span></span><div class="factor-element-meta"><span class="abstract-type">function</span></div></h1><p><code class="signature">plural(f)</code></p><p><span class="text.normal">Create a function that pluralizes the return of the given callable, </span><a class="factor-local" href="#plural.Parameters.f"><span class="parameter">f</span></a><span class="text.normal">.</span></p></section><section class="function" documented="true" local-identifier="unroll" id="unroll"><h1><span class="prefix"></span><a class="title" href="#unroll"><span class="text.normal">unroll</span></a><span class="element-status"><span class="nothing-missed">0</span></span><div class="factor-element-meta"><span class="abstract-type">function</span></div></h1><p><code class="signature">unroll(f)</code></p><p><span class="text.normal">Given a callable taking a single parameter, create another</span><span class="text.line-break"> </span><span class="text.normal">that maps the callable against a sequence.</span></p><p><span class="text.normal">Equivalence:</span></p><pre class="text.syntax"><code class="syntax/python">unroll(f)(iterable) == [f(x) for x in iterable]
</code></pre></section><section class="data" documented="false" local-identifier="sum_lengths" id="sum_lengths"><h1><span class="prefix"></span><a class="title" href="#sum_lengths"><span class="text.normal">sum_lengths</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type">data</span></div></h1><pre class="text.syntax"><code class="source">sum_lengths = compose(sum, partial(map, len))
</code></pre></section><section class="function" documented="true" local-identifier="group" id="group"><h1><span class="prefix"></span><a class="title" href="#group"><span class="text.normal">group</span></a><span class="element-status"><span class="misses">10</span><span class="completion-isolation"></span><span class="completion">0%</span></span><div class="factor-element-meta"><span class="abstract-type">function</span></div></h1><p><code class="signature">group(condition, iterable, initial)</code></p><p><span class="text.normal">Structure the given </span><a class="factor-local" href="#group.Parameters.iterable"><span class="parameter">iterable</span></a><span class="text.normal"> by the given </span><a class="factor-local" href="#group.Parameters.condition"><span class="parameter">condition</span></a><span class="text.normal">.</span><span class="text.line-break"> </span><span class="text.normal">Returns a generator producing (grouping, sequence) pairs.</span></p><p><span class="text.normal">A </span><a class="invalid" href="#True"><span class="unknown">True</span></a><span class="text.normal"> result from </span><a class="factor-local" href="#group.Parameters.condition"><span class="parameter">condition</span></a><span class="text.normal"> essentially terminates the subsequence,</span><span class="text.line-break"> </span><span class="text.normal">and creates a new sequence to be populated while </span><a class="factor-local" href="#group.Parameters.condition"><span class="parameter">condition</span></a><span class="text.normal"> is </span><a class="invalid" href="#False"><span class="unknown">False</span></a><span class="text.normal">.</span></p><section class="unspecified" documented="true" local-identifier="Parameters" id="group.Parameters"><h1 class="integrate"><span class="prefix"></span><a class="section" href="#group">group</a><a class="title" href="#group.Parameters"><span class="text.normal">Parameters</span></a><span class="element-status"></span><div class="factor-element-meta"><span class="abstract-type"></span></div></h1><dl class="text.mapping"><div id="group.Parameters.condition" class="parameter" documented="true"><dt><a class="dkn" href="#group.Parameters.condition"></a><span class="directory-key"><code class="parameter">condition</code></span></dt><dd><div class="status"></div><p><span class="text.normal">The grouping item in the tuple is the item that triggers</span><span class="text.line-break"> </span><span class="text.normal">a </span><a class="invalid" href="#True"><span class="unknown">True</span></a><span class="text.normal"> result from </span><a class="factor-local" href="#group.Parameters.condition"><span class="parameter">condition</span></a><span class="text.normal">.</span></p></dd></div><div id="group.Parameters.iterable" class="parameter" documented="true"><dt><a class="dkn" href="#group.Parameters.iterable"></a><span class="directory-key"><code class="parameter">iterable</code></span></dt><dd><div class="status"></div><p><span class="text.normal">The sequence item in the tuple is a sequence of items</span><span class="text.line-break"> </span><span class="text.normal">where the result of the </span><a class="factor-local" href="#group.Parameters.condition"><span class="parameter">condition</span></a><span class="text.normal"> was </span><a class="invalid" href="#False"><span class="unknown">False</span></a><span class="text.normal">.</span></p></dd></div><div id="group.Parameters.initial" class="parameter" documented="true"><dt><a class="dkn" href="#group.Parameters.initial"></a><span class="directory-key"><code class="parameter">initial</code></span></dt><dd><div class="status"></div><p><span class="text.normal">Designate the initial grouping to be emitted.</span><span class="text.line-break"> </span><span class="text.normal">Defaults to </span><a class="invalid" href="#None"><span class="unknown">None</span></a><span class="text.normal">.</span></p></dd></div><div id="group.Parameters.Sequence" class="parameter" documented="false"><dt><a class="dkn" href="#group.Parameters.Sequence"></a><span class="directory-key"><code class="parameter">Sequence</code></span></dt><dd><div class="status"></div><p><code class="control.absent">Undocumented</code><span class="text.normal">.</span></p></dd></div></dl></section></section><section class="class" documented="true" local-identifier="cachedproperty" id="cachedproperty"><h1><span class="prefix"></span><a class="title" href="#cachedproperty"><span class="text.normal">cachedproperty</span></a><span class="element-status"><span class="nothing-missed">0</span></span><div class="factor-element-meta"><span class="abstract-type">class</span></div></h1><div class="inheritance"><code class="type"><a class="invalid" href="#object"><span class="unknown">object</span></a></code></div><p><span class="text.normal">Attribute override for immutable property methods.</span></p><p><span class="text.normal">Presumes the wrapped method name is consistent with the property name.</span></p><section class="method" documented="false" local-identifier="__init__" id="cachedproperty.__init__"><h1><span class="prefix"></span><a class="section" href="#cachedproperty">cachedproperty</a><a class="title" href="#cachedproperty.__init__"><span class="text.normal">__init__</span></a><span class="element-status"><span class="nothing-missed">0</span></span><div class="factor-element-meta"><span class="abstract-type">method</span></div></h1><p><code class="signature">__init__(self, method)</code></p></section><section class="method" documented="false" local-identifier="__get__" id="cachedproperty.__get__"><h1><span class="prefix"></span><a class="section" href="#cachedproperty">cachedproperty</a><a class="title" href="#cachedproperty.__get__"><span class="text.normal">__get__</span></a><span class="element-status"><span class="misses">1</span><span class="completion-isolation"></span><span class="completion">75%</span></span><div class="factor-element-meta"><span class="abstract-type">method</span></div></h1><p><code class="signature">__get__(self, instance, Class)</code></p></section></section><section class="function" documented="true" local-identifier="consistency" id="consistency"><h1><span class="prefix"></span><a class="title" href="#consistency"><span class="text.normal">consistency</span></a><span class="element-status"><span class="nothing-missed">0</span></span><div class="factor-element-meta"><span class="abstract-type">function</span></div><code class="type"><a class="invalid" href="#int"><span class="unknown">int</span></a></code></h1><p><code class="signature">consistency(*iterables)</code></p><p><span class="text.normal">Return the level of consistency among the elements produced by the given </span><a class="factor-local" href="#consistency.Parameters.iterables"><span class="parameter">iterables</span></a><span class="text.normal">.</span><span class="text.line-break"> </span><span class="text.normal">The counting stops when an element is not equal to the others at the same index.</span></p><p><span class="text.normal">More commonly, the common prefix depth or length of all the given iterables.</span><span class="text.line-break"> </span><span class="text.normal">Elements must be hashable; equality is indirectly performed by forming a set.</span></p></section><h1 class="footing"></h1></main></body></html>